(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,360621,e=>{e.v(e.b(["static/chunks/b5ee164a48010721.js","static/chunks/turbopack-2f49257e1c37777f.js"]))},687124,e=>{"use strict";let r;var n,i,a,l,s=e.i(843476),o=e.i(271645),f=e.i(871315),c=e.i(678631),u=e.i(958155),d=e.i(59042),h=e.i(195883),g=e.i(940605),m=e.i(86019);function p({format:e,quality:r,onFormatChange:n,onQualityChange:i}){return(0,s.jsx)(g.default,{icon:"bi-file-earmark-image",title:"Image Format",message:"Choose output format",children:(0,s.jsx)(h.default,{alignment:"end",distribution:"center",children:(0,s.jsx)(m.Picker,{value:e,onChange:n,options:[{value:"webp",label:"WebP"},{value:"jpeg",label:"JPEG"},{value:"avif",label:"AVIF"}],pickerStyle:"segmented"})})})}var b=e.i(826024);function w({isDragging:e}){return e?(0,s.jsx)("div",{className:"position-fixed inset-0 d-flex align-items-center justify-content-center bg-black/40 backdrop-blur-sm z-50 pointer-events-none",children:(0,s.jsxs)("div",{className:"text-center pointer-events-auto",children:[(0,s.jsx)("i",{className:"bi bi-cloud-arrow-up-fill display-1 text-primary mb-4"}),(0,s.jsx)(b.default,{size:"1",weight:"bold",color:"primary",children:"Drop images anywhere"}),(0,s.jsx)(b.default,{size:"4",color:"light",children:"Duplicates are automatically ignored"})]})}):null}var v=e.i(507273),A=e.i(109876);function y({data:e,columns:r,keyExtractor:n,sortBy:i,sortDirection:a=null,onSort:l,emptyMessage:f="No data available",className:c="",striped:u=!0,pagination:d,pageSizeOptions:h=[10,25,50,100],showPageSizeSelector:g=!0,showPageInfo:p=!0}){let{currentTheme:w}=(0,A.useTheme)(),[y,x]=(0,o.useState)(1),[U,F]=(0,o.useState)(h[0]??10),j=!1!==d&&void 0!==d,E=j?d.page:y,k=j?d.pageSize:U,S=j?d.totalItems:e.length,C=j?d.totalPages??Math.max(1,Math.ceil(S/k)):Math.max(1,Math.ceil(e.length/k)),R=(E-1)*k+1,M=Math.min(E*k,S);(0,o.useEffect)(()=>{j||x(1)},[e.length,j]),(0,o.useEffect)(()=>{if(j)return;let r=Math.max(1,Math.ceil(e.length/k));y>r&&x(r)},[e.length,k,y,j]);let _=(0,o.useMemo)(()=>{if(j)return e;let r=(E-1)*k;return e.slice(r,r+k)},[e,j,E,k]),B=e=>{j?d.onPageChange(e,k):x(e)},I=E>1,N=E<C;return(0,s.jsxs)("div",{className:c,children:[(0,s.jsx)("div",{className:`table-responsive rounded-3 border ${"dark"===w?"border-secondary":"border"} mb-3`,children:(0,s.jsxs)("table",{className:`table table-hover align-middle mb-0 ${u?"table-striped":""}`,children:[(0,s.jsx)("thead",{className:`${"dark"===w?"table-dark":"table-light"} small ${"dark"===w?"text-light opacity-75":"text-muted"}`,children:(0,s.jsx)("tr",{children:r.map(e=>{var r;return(0,s.jsx)("th",{style:{width:e.width},className:e.sortable?"cursor-pointer user-select-none":"",onClick:()=>e.sortable&&l?.(e.key),children:(0,s.jsxs)(v.default,{alignment:"center",gap:"1",children:[e.title,e.sortable&&((r=e.key)&&i===r?"asc"===a?(0,s.jsx)("i",{className:"bi bi-arrow-up text-primary ms-1",style:{fontSize:"0.9em"}}):"desc"===a?(0,s.jsx)("i",{className:"bi bi-arrow-down text-primary ms-1",style:{fontSize:"0.9em"}}):null:(0,s.jsx)("i",{className:"bi bi-arrow-down-up opacity-50 ms-1",style:{fontSize:"0.8em"}}))]})},e.key)})})}),(0,s.jsx)("tbody",{children:0===S?(0,s.jsx)("tr",{children:(0,s.jsxs)("td",{colSpan:r.length,className:"text-center py-5",children:[!f&&(0,s.jsx)("i",{className:`bi bi-inbox fs-1 d-block mb-3 ${"dark"===w?"opacity-30":"opacity-50"}`}),(0,s.jsx)(b.default,{size:"4",color:"muted",children:f})]})}):_.map((e,i)=>(0,s.jsx)("tr",{children:r.map(r=>(0,s.jsx)("td",{className:r.align?`text-${r.align}`:"",children:r.render?r.render(e,R+i-1):"actions"===r.key?e[r.key]:String(e[r.key]??"—")},r.key))},n(e)))})]})}),S>0&&(j||e.length>Math.min(...h))&&(0,s.jsxs)(v.default,{alignment:"center",distribution:"between",className:"px-3 pb-2",children:[(0,s.jsxs)(v.default,{gap:"3",alignment:"center",children:[p&&(0,s.jsxs)(b.default,{size:"6",color:"muted",children:["Showing ",R,"–",M," of"," ",S.toLocaleString()]}),!j&&g&&(0,s.jsxs)(v.default,{gap:"2",alignment:"center",children:[(0,s.jsx)(b.default,{size:"6",color:"muted",children:"Rows per page:"}),(0,s.jsx)(m.Picker,{value:k.toString(),onChange:e=>{var r;return r=Number(e),void(j?d.onPageChange(1,r):(F(r),x(1)))},options:h.map(e=>({value:e.toString(),label:e.toString()})),pickerStyle:"select",className:"form-select form-select-sm",style:{width:"auto"}})]})]}),(0,s.jsx)("nav",{"aria-label":"Table pagination",children:(0,s.jsxs)("ul",{className:"pagination pagination-sm mb-0",children:[(0,s.jsx)("li",{className:`page-item ${!I?"disabled":""}`,children:(0,s.jsx)("button",{className:"page-link",onClick:()=>B(E-1),disabled:!I,"aria-label":"Previous",children:(0,s.jsx)("i",{className:"bi bi-chevron-left"})})}),Array.from({length:C},(e,r)=>r+1).filter(e=>!!(C<=7||1===e||e===C||1>=Math.abs(e-E))||e===E-2&&!!(E<=4)||e===E+2&&!!(E>=C-3)).map((e,r,n)=>{let i=r>0&&e>n[r-1]+1&&e!==C;return(0,s.jsxs)(o.default.Fragment,{children:[i&&(0,s.jsx)("li",{className:"page-item disabled",children:(0,s.jsx)("span",{className:"page-link",children:"…"})}),(0,s.jsx)("li",{className:`page-item ${e===E?"active":""}`,children:(0,s.jsx)("button",{className:"page-link",onClick:()=>B(e),children:e})})]},e)}),(0,s.jsx)("li",{className:`page-item ${!N?"disabled":""}`,children:(0,s.jsx)("button",{className:"page-link",onClick:()=>B(E+1),disabled:!N,"aria-label":"Next",children:(0,s.jsx)("i",{className:"bi bi-chevron-right"})})})]})})]})]})}let x=e=>`${e.name}_${e.size}_${e.lastModified}`,U=e=>0===e?"0 B":e<1024?`${e} B`:e<1048576?`${(e/1024).toFixed(1)} KB`:`${(e/1048576).toFixed(2)} MB`,F=e=>new Promise(r=>{let n=new Image;n.onload=()=>r({width:n.width,height:n.height}),n.src=URL.createObjectURL(e)});function j({images:e,processingId:r,onRemove:n,onDownload:i,format:a,...l}){let f=(0,o.useMemo)(()=>[{key:"id",title:"Status",width:"50px",render:e=>e.compressed?(0,s.jsx)("i",{className:"bi bi-check-circle-fill text-success fs-5"}):r===e.id?(0,s.jsx)("span",{className:"spinner-border spinner-border-sm text-primary"}):(0,s.jsx)("i",{className:"bi bi-hourglass-split text-warning"})},{key:"preview",title:"Name",width:"90px",render:e=>(0,s.jsxs)("div",{className:"position-relative",children:[(0,s.jsx)("img",{src:e.preview,alt:"",className:"rounded cursor-pointer transition-transform hover-scale",style:{width:70,height:46,objectFit:"cover"},onClick:()=>window.open(e.preview,"_blank")}),(0,s.jsx)("div",{className:"position-absolute inset-0 d-flex align-items-center justify-content-center opacity-0 hover-opacity-100 transition-opacity bg-black bg-opacity-50 rounded",children:(0,s.jsx)("i",{className:"bi bi-zoom-in text-white fs-4"})})]})},{key:"file",title:"File",render:e=>(0,s.jsx)("div",{className:"text-truncate",style:{maxWidth:220},title:e.file.name,children:(0,s.jsx)(b.default,{weight:"medium",children:e.file.name})})},{key:"originalDims",title:"Original",width:"110px",render:e=>(0,s.jsxs)(b.default,{size:"6",color:"muted",children:[e.originalDims?.width,"×",e.originalDims?.height]})},{key:"newDims",title:"New",width:"110px",render:e=>(0,s.jsxs)(b.default,{size:"6",weight:"semibold",color:"success",children:[e.newDims?.width,"×",e.newDims?.height]})},{key:"originalSize",title:"Size",width:"100px",sortable:!0,render:e=>(0,s.jsx)(b.default,{size:"6",children:U(e.originalSize)})},{key:"compressedSize",title:"New size",width:"100px",sortable:!0,render:e=>{if("number"!=typeof e.compressedSize)return(0,s.jsx)(b.default,{size:"6",weight:"bold",color:"success",children:"-"});let r=e.compressedSize>e.originalSize;return(0,s.jsx)(b.default,{size:"6",weight:"bold",color:r?"danger":"success",children:U(e.compressedSize)})}},{key:"savings",title:"Savings",width:"100px",sortable:!0,render:e=>{let r=e.savings,n="number"==typeof r,i=n&&r<0;return(0,s.jsx)(b.default,{size:"6",weight:"bold",color:i?"danger":"success",children:n?(0,s.jsxs)(s.Fragment,{children:[Math.abs(r).toFixed(1),"%",(0,s.jsx)("i",{className:i?"bi bi-arrow-up-short me-1":"bi bi-arrow-down-short me-1"})]}):"-"})}},{key:"actions",title:"",width:"110px",render:e=>(0,s.jsxs)(v.default,{gap:"1",children:[e.compressed&&(0,s.jsx)("button",{className:"btn btn-sm btn-outline-success",onClick:()=>i(e),title:"Download",children:(0,s.jsx)("i",{className:"bi bi-download"})}),(0,s.jsx)("button",{className:"btn btn-sm btn-outline-danger",onClick:()=>n(e.id),title:"Remove",children:(0,s.jsx)("i",{className:"bi bi-trash"})})]})}],[r]);return(0,s.jsx)(y,{data:e,columns:f,keyExtractor:e=>e.id,sortBy:l.sortKey,sortDirection:l.sortOrder,onSort:l.onSort,emptyMessage:(0,s.jsxs)(h.default,{alignment:"center",gap:"4",className:"py-8",children:[(0,s.jsx)("i",{className:"bi bi-images display-1 text-muted opacity-50"}),(0,s.jsx)(b.default,{size:"2",weight:"semibold",color:"muted",children:"Drop images anywhere on this area"}),(0,s.jsx)(b.default,{size:"5",color:"muted",children:"Supports folders • Duplicates ignored • WebP + AVIF + Resize"})]}),className:"w-100"})}function E({imageCount:e,isCompressing:r,progress:n,onAddImages:i,onAddFolder:a,onRecompress:l,onExportZip:o,onClear:f,isExporting:c}){let u=n&&n.total>0?Math.round(n.current/n.total*100):0;return(0,s.jsxs)(v.default,{gap:"3",alignment:"center",distribution:"start",children:[(0,s.jsxs)("button",{className:"btn btn-success",onClick:i,children:[(0,s.jsx)("i",{className:"bi bi-plus-lg me-2"})," Add Images"]}),(0,s.jsxs)("button",{className:"btn btn-outline-secondary",onClick:a,children:[(0,s.jsx)("i",{className:"bi bi-folder-plus me-2"})," Add Folder"]}),r?(0,s.jsxs)(v.default,{gap:"3",className:"flex-grow-1",children:[(0,s.jsxs)(b.default,{color:"muted",children:[n.current," / ",n.total," • ",u,"%"]}),(0,s.jsx)("div",{className:"progress flex-grow-1",style:{height:8},children:(0,s.jsx)("div",{className:"progress-bar bg-success",style:{width:`${u}%`}})})]}):(0,s.jsx)("div",{className:"flex-grow-1"}),e>0&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("button",{className:"btn btn-primary",onClick:l,disabled:r,children:[(0,s.jsx)("i",{className:"bi bi-arrow-repeat me-2"})," Recompress"]}),(0,s.jsxs)("button",{className:"btn btn-info text-white",onClick:o,disabled:c||r,children:[(0,s.jsx)("i",{className:"bi bi-file-zip me-2"})," ",c?"Zipping...":"Export ZIP"]}),(0,s.jsxs)("button",{className:"btn btn-danger",onClick:f,children:[(0,s.jsx)("i",{className:"bi bi-trash me-2"})," Clear"]})]})]})}function k(e,r){return new Promise(function(n,i){let a;return S(e).then(function(e){try{return a=e,n(new Blob([r.slice(0,2),a,r.slice(2)],{type:"image/jpeg"}))}catch(e){return i(e)}},i)})}let S=e=>new Promise((r,n)=>{let i=new FileReader;i.addEventListener("load",({target:{result:e}})=>{let i=new DataView(e),a=0;if(65496!==i.getUint16(a))return n("not a valid JPEG");for(a+=2;;){let l=i.getUint16(a);if(65498===l)break;let s=i.getUint16(a+2);if(65505===l&&0x45786966===i.getUint32(a+4)){let l,o=a+10;switch(i.getUint16(o)){case 18761:l=!0;break;case 19789:l=!1;break;default:return n("TIFF header contains invalid endian")}if(42!==i.getUint16(o+2,l))return n("TIFF header contains invalid version");let f=i.getUint32(o+4,l),c=o+f+2+12*i.getUint16(o+f,l);for(let e=o+f+2;e<c;e+=12)if(274==i.getUint16(e,l)){if(3!==i.getUint16(e+2,l))return n("Orientation data type is invalid");if(1!==i.getUint32(e+4,l))return n("Orientation data count is invalid");i.setUint16(e+8,1,l);break}return r(e.slice(a,a+2+s))}a+=2+s}return r(new Blob)}),i.readAsArrayBuffer(e)});var C={};({get exports(){return C},set exports(t){C=t}}).exports=a={},a.parse=function(e,r){for(var n=a.bin.readUshort,i=a.bin.readUint,l=0,s={},o=new Uint8Array(e),f=o.length-4;0x6054b50!=i(o,f);)f--;var c=n(o,l=f+4+4);n(o,l+=2);var u=i(o,l+=2),d=i(o,l+=4);l+=4,l=d;for(var h=0;h<c;h++){i(o,l),l+=4,l+=4,l+=4,i(o,l+=4),u=i(o,l+=4);var g=i(o,l+=4),m=n(o,l+=4),p=n(o,l+2),b=n(o,l+4);l+=6;var w=i(o,l+=8);l+=4,l+=m+p+b,a._readLocal(o,w,s,u,g,r)}return s},a._readLocal=function(e,r,n,i,l,s){var o=a.bin.readUshort,f=a.bin.readUint;f(e,r),o(e,r+=4),o(e,r+=2);var c=o(e,r+=2);f(e,r+=2),f(e,r+=4),r+=4;var u=o(e,r+=8),d=o(e,r+=2);r+=2;var h=a.bin.readUTF8(e,r,u);if(r+=u,r+=d,s)n[h]={size:l,csize:i};else{var g=new Uint8Array(e.buffer,r);if(0==c)n[h]=new Uint8Array(g.buffer.slice(r,r+i));else{if(8!=c)throw"unknown compression method: "+c;var m=new Uint8Array(l);a.inflateRaw(g,m),n[h]=m}}},a.inflateRaw=function(e,r){return a.F.inflate(e,r)},a.inflate=function(e,r){return e[0],e[1],a.inflateRaw(new Uint8Array(e.buffer,e.byteOffset+2,e.length-6),r)},a.deflate=function(e,r){null==r&&(r={level:6});var n=0,i=new Uint8Array(50+Math.floor(1.1*e.length));i[n]=120,i[n+1]=156,n+=2,n=a.F.deflateRaw(e,i,n,r.level);var l=a.adler(e,0,e.length);return i[n+0]=l>>>24&255,i[n+1]=l>>>16&255,i[n+2]=l>>>8&255,i[n+3]=l>>>0&255,new Uint8Array(i.buffer,0,n+4)},a.deflateRaw=function(e,r){null==r&&(r={level:6});var n=new Uint8Array(50+Math.floor(1.1*e.length)),i=a.F.deflateRaw(e,n,i,r.level);return new Uint8Array(n.buffer,0,i)},a.encode=function(e,r){null==r&&(r=!1);var n=0,i=a.bin.writeUint,l=a.bin.writeUshort,s={};for(var o in e){var f=!a._noNeed(o)&&!r,c=e[o],u=a.crc.crc(c,0,c.length);s[o]={cpr:f,usize:c.length,crc:u,file:f?a.deflateRaw(c):c}}for(var o in s)n+=s[o].file.length+30+46+2*a.bin.sizeUTF8(o);var d=new Uint8Array(n+=22),h=0,g=[];for(var o in s){var m=s[o];g.push(h),h=a._writeHeader(d,h,o,m,0)}var p=0,b=h;for(var o in s)m=s[o],g.push(h),h=a._writeHeader(d,h,o,m,1,g[p++]);var w=h-b;return i(d,h,0x6054b50),h+=4,l(d,h+=4,p),l(d,h+=2,p),i(d,h+=2,w),i(d,h+=4,b),h+=4,h+=2,d.buffer},a._noNeed=function(e){var r=e.split(".").pop().toLowerCase();return -1!="png,jpg,jpeg,zip".indexOf(r)},a._writeHeader=function(e,r,n,i,l,s){var o=a.bin.writeUint,f=a.bin.writeUshort,c=i.file;return o(e,r,0==l?0x4034b50:0x2014b50),r+=4,1==l&&(r+=2),f(e,r,20),f(e,r+=2,0),f(e,r+=2,8*!!i.cpr),o(e,r+=2,0),o(e,r+=4,i.crc),o(e,r+=4,c.length),o(e,r+=4,i.usize),f(e,r+=4,a.bin.sizeUTF8(n)),f(e,r+=2,0),r+=2,1==l&&(r+=2,r+=2,o(e,r+=6,s),r+=4),r+=a.bin.writeUTF8(e,r,n),0==l&&(e.set(c,r),r+=c.length),r},a.crc={table:function(){for(var e=new Uint32Array(256),r=0;r<256;r++){for(var n=r,i=0;i<8;i++)1&n?n=0xedb88320^n>>>1:n>>>=1;e[r]=n}return e}(),update:function(e,r,n,i){for(var l=0;l<i;l++)e=a.crc.table[255&(e^r[n+l])]^e>>>8;return e},crc:function(e,r,n){return 0xffffffff^a.crc.update(0xffffffff,e,r,n)}},a.adler=function(e,r,n){for(var i=1,a=0,l=r,s=r+n;l<s;){for(var o=Math.min(l+5552,s);l<o;)a+=i+=e[l++];i%=65521,a%=65521}return a<<16|i},a.bin={readUshort:function(e,r){return e[r]|e[r+1]<<8},writeUshort:function(e,r,n){e[r]=255&n,e[r+1]=n>>8&255},readUint:function(e,r){return 0x1000000*e[r+3]+(e[r+2]<<16|e[r+1]<<8|e[r])},writeUint:function(e,r,n){e[r]=255&n,e[r+1]=n>>8&255,e[r+2]=n>>16&255,e[r+3]=n>>24&255},readASCII:function(e,r,n){for(var i="",a=0;a<n;a++)i+=String.fromCharCode(e[r+a]);return i},writeASCII:function(e,r,n){for(var i=0;i<n.length;i++)e[r+i]=n.charCodeAt(i)},pad:function(e){return e.length<2?"0"+e:e},readUTF8:function(e,r,n){for(var i,l="",s=0;s<n;s++)l+="%"+a.bin.pad(e[r+s].toString(16));try{i=decodeURIComponent(l)}catch(i){return a.bin.readASCII(e,r,n)}return i},writeUTF8:function(e,r,n){for(var i=n.length,a=0,l=0;l<i;l++){var s=n.charCodeAt(l);if(0==(0xffffff80&s))e[r+a]=s,a++;else if(0==(0xfffff800&s))e[r+a]=192|s>>6,e[r+a+1]=128|63&s,a+=2;else if(0==(0xffff0000&s))e[r+a]=224|s>>12,e[r+a+1]=128|s>>6&63,e[r+a+2]=128|63&s,a+=3;else{if(0!=(0xffe00000&s))throw"e";e[r+a]=240|s>>18,e[r+a+1]=128|s>>12&63,e[r+a+2]=128|s>>6&63,e[r+a+3]=128|63&s,a+=4}}return a},sizeUTF8:function(e){for(var r=e.length,n=0,i=0;i<r;i++){var a=e.charCodeAt(i);if(0==(0xffffff80&a))n++;else if(0==(0xfffff800&a))n+=2;else if(0==(0xffff0000&a))n+=3;else{if(0!=(0xffe00000&a))throw"e";n+=4}}return n}},a.F={},a.F.deflateRaw=function(e,r,n,i){var l=[[0,0,0,0,0],[4,4,8,4,0],[4,5,16,8,0],[4,6,16,16,0],[4,10,16,32,0],[8,16,32,32,0],[8,16,128,128,0],[8,32,128,256,0],[32,128,258,1024,1],[32,258,258,4096,1]][i],s=a.F.U,o=a.F._goodIndex;a.F._hash;var f=a.F._putsE,c=0,u=n<<3,d=0,h=e.length;if(0==i){for(;c<h;)f(r,u,+(c+(j=Math.min(65535,h-c))==h)),u=a.F._copyExact(e,c,j,r,u+8),c+=j;return u>>>3}var g=s.lits,m=s.strt,p=s.prev,b=0,w=0,v=0,A=0,y=0,x=0;for(h>2&&(m[x=a.F._hash(e,0)]=0),c=0;c<h;c++){if(y=x,c+1<h-2){x=a.F._hash(e,c+1);var U=c+1&32767;p[U]=m[x],m[x]=U}if(d<=c){(b>14e3||w>26697)&&h-c>100&&(d<c&&(g[b]=c-d,b+=2,d=c),u=a.F._writeBlock(+(c==h-1||d==h),g,b,A,e,v,c-v,r,u),b=w=A=0,v=c);var F=0;c<h-2&&(F=a.F._bestMatch(e,c,p,y,Math.min(l[2],h-c),l[3]));var j=F>>>16,E=65535&F;if(0!=F){E=65535&F;var k=o(j=F>>>16,s.of0);s.lhst[257+k]++;var S=o(E,s.df0);s.dhst[S]++,A+=s.exb[k]+s.dxb[S],g[b]=j<<23|c-d,g[b+1]=E<<16|k<<8|S,b+=2,d=c+j}else s.lhst[e[c]]++;w++}}for(v==c&&0!=e.length||(d<c&&(g[b]=c-d,b+=2,d=c),u=a.F._writeBlock(1,g,b,A,e,v,c-v,r,u),b=0,w=0,b=w=A=0,v=c);0!=(7&u);)u++;return u>>>3},a.F._bestMatch=function(e,r,n,i,l,s){var o=32767&r,f=n[o],c=o-f+32768&32767;if(f==o||i!=a.F._hash(e,r-c))return 0;for(var u=0,d=0,h=Math.min(32767,r);c<=h&&0!=--s&&f!=o;){if(0==u||e[r+u]==e[r+u-c]){var g=a.F._howLong(e,r,c);if(g>u){if(d=c,(u=g)>=l)break;c+2<g&&(g=c+2);for(var m=0,p=0;p<g-2;p++){var b=r-c+p+32768&32767,w=b-n[b]+32768&32767;w>m&&(m=w,f=b)}}}c+=(o=f)-(f=n[o])+32768&32767}return u<<16|d},a.F._howLong=function(e,r,n){if(e[r]!=e[r-n]||e[r+1]!=e[r+1-n]||e[r+2]!=e[r+2-n])return 0;var i=r,a=Math.min(e.length,r+258);for(r+=3;r<a&&e[r]==e[r-n];)r++;return r-i},a.F._hash=function(e,r){return(e[r]<<8|e[r+1])+(e[r+2]<<4)&65535},a.saved=0,a.F._writeBlock=function(e,r,n,i,l,s,o,f,c){var u,d,h,g,m,p,b,w,v,A,y,x=a.F.U,U=a.F._putsF,F=a.F._putsE;x.lhst[256]++,g=(h=a.F.getTrees())[0],m=h[1],p=h[2],b=h[3],w=h[4],v=h[5],A=h[6],y=h[7];var j=32+(0==(c+3&7)?0:8-(c+3&7))+(o<<3),E=i+a.F.contSize(x.fltree,x.lhst)+a.F.contSize(x.fdtree,x.dhst),k=i+a.F.contSize(x.ltree,x.lhst)+a.F.contSize(x.dtree,x.dhst);k+=14+3*v+a.F.contSize(x.itree,x.ihst)+(2*x.ihst[16]+3*x.ihst[17]+7*x.ihst[18]);for(var S=0;S<286;S++)x.lhst[S]=0;for(S=0;S<30;S++)x.dhst[S]=0;for(S=0;S<19;S++)x.ihst[S]=0;var C=j<E&&j<k?0:E<k?1:2;if(U(f,c,e),U(f,c+1,C),c+=3,0==C){for(;0!=(7&c);)c++;c=a.F._copyExact(l,s,o,f,c)}else{if(1==C&&(u=x.fltree,d=x.fdtree),2==C){a.F.makeCodes(x.ltree,g),a.F.revCodes(x.ltree,g),a.F.makeCodes(x.dtree,m),a.F.revCodes(x.dtree,m),a.F.makeCodes(x.itree,p),a.F.revCodes(x.itree,p),u=x.ltree,d=x.dtree,F(f,c,b-257),F(f,c+=5,w-1),F(f,c+=5,v-4),c+=4;for(var R=0;R<v;R++)F(f,c+3*R,x.itree[1+(x.ordr[R]<<1)]);c+=3*v,c=a.F._codeTiny(A,x.itree,f,c),c=a.F._codeTiny(y,x.itree,f,c)}for(var M=s,_=0;_<n;_+=2){for(var B=r[_],I=B>>>23,N=M+(8388607&B);M<N;)c=a.F._writeLit(l[M++],u,f,c);if(0!=I){var T=r[_+1],z=T>>16,L=T>>8&255,O=255&T;F(f,c=a.F._writeLit(257+L,u,f,c),I-x.of0[L]),c+=x.exb[L],U(f,c=a.F._writeLit(O,d,f,c),z-x.df0[O]),c+=x.dxb[O],M+=I}}c=a.F._writeLit(256,u,f,c)}return c},a.F._copyExact=function(e,r,n,i,a){var l=a>>>3;return i[l]=n,i[l+1]=n>>>8,i[l+2]=255-i[l],i[l+3]=255-i[l+1],l+=4,i.set(new Uint8Array(e.buffer,r,n),l),a+(n+4<<3)},a.F.getTrees=function(){for(var e=a.F.U,r=a.F._hufTree(e.lhst,e.ltree,15),n=a.F._hufTree(e.dhst,e.dtree,15),i=[],l=a.F._lenCodes(e.ltree,i),s=[],o=a.F._lenCodes(e.dtree,s),f=0;f<i.length;f+=2)e.ihst[i[f]]++;for(f=0;f<s.length;f+=2)e.ihst[s[f]]++;for(var c=a.F._hufTree(e.ihst,e.itree,7),u=19;u>4&&0==e.itree[1+(e.ordr[u-1]<<1)];)u--;return[r,n,c,l,o,u,i,s]},a.F.getSecond=function(e){for(var r=[],n=0;n<e.length;n+=2)r.push(e[n+1]);return r},a.F.nonZero=function(e){for(var r="",n=0;n<e.length;n+=2)0!=e[n+1]&&(r+=(n>>1)+",");return r},a.F.contSize=function(e,r){for(var n=0,i=0;i<r.length;i++)n+=r[i]*e[1+(i<<1)];return n},a.F._codeTiny=function(e,r,n,i){for(var l=0;l<e.length;l+=2){var s=e[l],o=e[l+1];i=a.F._writeLit(s,r,n,i);var f=16==s?2:17==s?3:7;s>15&&(a.F._putsE(n,i,o,f),i+=f)}return i},a.F._lenCodes=function(e,r){for(var n=e.length;2!=n&&0==e[n-1];)n-=2;for(var i=0;i<n;i+=2){var a=e[i+1],l=i+3<n?e[i+3]:-1,s=i+5<n?e[i+5]:-1,o=0==i?-1:e[i-1];if(0==a&&l==a&&s==a){for(var f=i+5;f+2<n&&e[f+2]==a;)f+=2;(c=Math.min(f+1-i>>>1,138))<11?r.push(17,c-3):r.push(18,c-11),i+=2*c-2}else if(a==o&&l==a&&s==a){for(f=i+5;f+2<n&&e[f+2]==a;)f+=2;var c=Math.min(f+1-i>>>1,6);r.push(16,c-3),i+=2*c-2}else r.push(a,0)}return n>>>1},a.F._hufTree=function(e,r,n){var i=[],l=e.length,s=r.length,o=0;for(o=0;o<s;o+=2)r[o]=0,r[o+1]=0;for(o=0;o<l;o++)0!=e[o]&&i.push({lit:o,f:e[o]});var f=i.length,c=i.slice(0);if(0==f)return 0;if(1==f){var u=i[0].lit;return c=+(0==u),r[1+(u<<1)]=1,r[1+(c<<1)]=1,1}i.sort(function(e,r){return e.f-r.f});var d=i[0],h=i[1],g=0,m=1,p=2;for(i[0]={lit:-1,f:d.f+h.f,l:d,r:h,d:0};m!=f-1;)d=g!=m&&(p==f||i[g].f<i[p].f)?i[g++]:i[p++],h=g!=m&&(p==f||i[g].f<i[p].f)?i[g++]:i[p++],i[m++]={lit:-1,f:d.f+h.f,l:d,r:h};var b=a.F.setDepth(i[m-1],0);for(b>n&&(a.F.restrictDepth(c,n,b),b=n),o=0;o<f;o++)r[1+(c[o].lit<<1)]=c[o].d;return b},a.F.setDepth=function(e,r){return -1!=e.lit?(e.d=r,r):Math.max(a.F.setDepth(e.l,r+1),a.F.setDepth(e.r,r+1))},a.F.restrictDepth=function(e,r,n){var i=0,a=1<<n-r,l=0;for(e.sort(function(e,r){return r.d==e.d?e.f-r.f:r.d-e.d}),i=0;i<e.length&&e[i].d>r;i++){var s=e[i].d;e[i].d=r,l+=a-(1<<n-s)}for(l>>>=n-r;l>0;)(s=e[i].d)<r?(e[i].d++,l-=1<<r-s-1):i++;for(;i>=0;i--)e[i].d==r&&l<0&&(e[i].d--,l++);0!=l&&console.log("debt left")},a.F._goodIndex=function(e,r){var n=0;return r[16]<=e&&(n|=16),r[8|n]<=e&&(n|=8),r[4|n]<=e&&(n|=4),r[2|n]<=e&&(n|=2),r[1|n]<=e&&(n|=1),n},a.F._writeLit=function(e,r,n,i){return a.F._putsF(n,i,r[e<<1]),i+r[1+(e<<1)]},a.F.inflate=function(e,r){var n=Uint8Array;if(3==e[0]&&0==e[1])return r||new n(0);var i=a.F,l=i._bitsF,s=i._bitsE,o=i._decodeTiny,f=i.makeCodes,c=i.codes2map,u=i._get17,d=i.U,h=null==r;h&&(r=new n(e.length>>>2<<3));for(var g,m,p=0,b=0,w=0,v=0,A=0,y=0,x=0,U=0,F=0;0==p;)if(p=l(e,F,1),b=l(e,F+1,2),F+=3,0!=b){if(h&&(r=a.F._check(r,U+131072)),1==b&&(g=d.flmap,m=d.fdmap,y=511,x=31),2==b){w=s(e,F,5)+257,v=s(e,F+5,5)+1,A=s(e,F+10,4)+4,F+=14;for(var j=0;j<38;j+=2)d.itree[j]=0,d.itree[j+1]=0;var E=1;for(j=0;j<A;j++){var k=s(e,F+3*j,3);d.itree[1+(d.ordr[j]<<1)]=k,k>E&&(E=k)}F+=3*A,f(d.itree,E),c(d.itree,E,d.imap),g=d.lmap,m=d.dmap,F=o(d.imap,(1<<E)-1,w+v,e,F,d.ttree);var S=i._copyOut(d.ttree,0,w,d.ltree);y=(1<<S)-1;var C=i._copyOut(d.ttree,w,v,d.dtree);x=(1<<C)-1,f(d.ltree,S),c(d.ltree,S,g),f(d.dtree,C),c(d.dtree,C,m)}for(;;){var R=g[u(e,F)&y];F+=15&R;var M=R>>>4;if(M>>>8==0)r[U++]=M;else{if(256==M)break;var _=U+M-254;if(M>264){var B=d.ldef[M-257];_=U+(B>>>3)+s(e,F,7&B),F+=7&B}var I=m[u(e,F)&x];F+=15&I;var N=I>>>4,T=d.ddef[N],z=(T>>>4)+l(e,F,15&T);for(F+=15&T,h&&(r=a.F._check(r,U+131072));U<_;)r[U]=r[U++-z],r[U]=r[U++-z],r[U]=r[U++-z],r[U]=r[U++-z];U=_}}}else{0!=(7&F)&&(F+=8-(7&F));var L=4+(F>>>3),O=e[L-4]|e[L-3]<<8;h&&(r=a.F._check(r,U+O)),r.set(new n(e.buffer,e.byteOffset+L,O),U),F=L+O<<3,U+=O}return r.length==U?r:r.slice(0,U)},a.F._check=function(e,r){var n=e.length;if(r<=n)return e;var i=new Uint8Array(Math.max(n<<1,r));return i.set(e,0),i},a.F._decodeTiny=function(e,r,n,i,l,s){for(var o=a.F._bitsE,f=a.F._get17,c=0;c<n;){var u=e[f(i,l)&r];l+=15&u;var d=u>>>4;if(d<=15)s[c]=d,c++;else{var h=0,g=0;16==d?(g=3+o(i,l,2),l+=2,h=s[c-1]):17==d?(g=3+o(i,l,3),l+=3):18==d&&(g=11+o(i,l,7),l+=7);for(var m=c+g;c<m;)s[c]=h,c++}}return l},a.F._copyOut=function(e,r,n,i){for(var a=0,l=0,s=i.length>>>1;l<n;){var o=e[l+r];i[l<<1]=0,i[1+(l<<1)]=o,o>a&&(a=o),l++}for(;l<s;)i[l<<1]=0,i[1+(l<<1)]=0,l++;return a},a.F.makeCodes=function(e,r){for(var n,i,l,s,o=a.F.U,f=e.length,c=o.bl_count,u=0;u<=r;u++)c[u]=0;for(u=1;u<f;u+=2)c[e[u]]++;var d=o.next_code;for(n=0,c[0]=0,i=1;i<=r;i++)n=n+c[i-1]<<1,d[i]=n;for(l=0;l<f;l+=2)0!=(s=e[l+1])&&(e[l]=d[s],d[s]++)},a.F.codes2map=function(e,r,n){for(var i=e.length,l=a.F.U.rev15,s=0;s<i;s+=2)if(0!=e[s+1])for(var o=s>>1,f=e[s+1],c=o<<4|f,u=r-f,d=e[s]<<u,h=d+(1<<u);d!=h;)n[l[d]>>>15-r]=c,d++},a.F.revCodes=function(e,r){for(var n=a.F.U.rev15,i=15-r,l=0;l<e.length;l+=2){var s=e[l]<<r-e[l+1];e[l]=n[s]>>>i}},a.F._putsE=function(e,r,n){n<<=7&r;var i=r>>>3;e[i]|=n,e[i+1]|=n>>>8},a.F._putsF=function(e,r,n){n<<=7&r;var i=r>>>3;e[i]|=n,e[i+1]|=n>>>8,e[i+2]|=n>>>16},a.F._bitsE=function(e,r,n){return(e[r>>>3]|e[1+(r>>>3)]<<8)>>>(7&r)&(1<<n)-1},a.F._bitsF=function(e,r,n){return(e[r>>>3]|e[1+(r>>>3)]<<8|e[2+(r>>>3)]<<16)>>>(7&r)&(1<<n)-1},a.F._get17=function(e,r){return(e[r>>>3]|e[1+(r>>>3)]<<8|e[2+(r>>>3)]<<16)>>>(7&r)},a.F._get25=function(e,r){return(e[r>>>3]|e[1+(r>>>3)]<<8|e[2+(r>>>3)]<<16|e[3+(r>>>3)]<<24)>>>(7&r)},a.F.U=(n=Uint16Array,i=Uint32Array,{next_code:new n(16),bl_count:new n(16),ordr:[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],of0:[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,999,999,999],exb:[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0],ldef:new n(32),df0:[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,65535,65535],dxb:[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0],ddef:new i(32),flmap:new n(512),fltree:[],fdmap:new n(32),fdtree:[],lmap:new n(32768),ltree:[],ttree:[],dmap:new n(32768),dtree:[],imap:new n(512),itree:[],rev15:new n(32768),lhst:new i(286),dhst:new i(30),ihst:new i(19),lits:new i(15e3),strt:new n(65536),prev:new n(32768)}),function(){for(var e=a.F.U,r=0;r<32768;r++){var n=r;n=(0xff00ff00&(n=(0xf0f0f0f0&(n=(0xcccccccc&(n=(0xaaaaaaaa&n)>>>1|(0x55555555&n)<<1))>>>2|(0x33333333&n)<<2))>>>4|(0xf0f0f0f&n)<<4))>>>8|(0xff00ff&n)<<8,e.rev15[r]=(n>>>16|n<<16)>>>17}function i(e,r,n){for(;0!=r--;)e.push(0,n)}for(r=0;r<32;r++)e.ldef[r]=e.of0[r]<<3|e.exb[r],e.ddef[r]=e.df0[r]<<4|e.dxb[r];i(e.fltree,144,8),i(e.fltree,112,9),i(e.fltree,24,7),i(e.fltree,8,8),a.F.makeCodes(e.fltree,9),a.F.codes2map(e.fltree,9,e.flmap),a.F.revCodes(e.fltree,9),i(e.fdtree,32,5),a.F.makeCodes(e.fdtree,5),a.F.codes2map(e.fdtree,5,e.fdmap),a.F.revCodes(e.fdtree,5),i(e.itree,19,0),i(e.ltree,286,0),i(e.dtree,30,0),i(e.ttree,320,0)}();var R=(l={__proto__:null,default:C},[C].forEach(function(e){e&&"string"!=typeof e&&!Array.isArray(e)&&Object.keys(e).forEach(function(r){if("default"!==r&&!(r in l)){var n=Object.getOwnPropertyDescriptor(e,r);Object.defineProperty(l,r,n.get?n:{enumerable:!0,get:function(){return e[r]}})}})}),Object.freeze(l));let M=function(){let e,r,n;var i={nextZero(e,r){for(;0!=e[r];)r++;return r},readUshort:(e,r)=>e[r]<<8|e[r+1],writeUshort(e,r,n){e[r]=n>>8&255,e[r+1]=255&n},readUint:(e,r)=>0x1000000*e[r]+(e[r+1]<<16|e[r+2]<<8|e[r+3]),writeUint(e,r,n){e[r]=n>>24&255,e[r+1]=n>>16&255,e[r+2]=n>>8&255,e[r+3]=255&n},readASCII(e,r,n){let i="";for(let a=0;a<n;a++)i+=String.fromCharCode(e[r+a]);return i},writeASCII(e,r,n){for(let i=0;i<n.length;i++)e[r+i]=n.charCodeAt(i)},readBytes(e,r,n){let i=[];for(let a=0;a<n;a++)i.push(e[r+a]);return i},pad:e=>e.length<2?`0${e}`:e,readUTF8(e,r,n){let a,l="";for(let a=0;a<n;a++)l+=`%${i.pad(e[r+a].toString(16))}`;try{a=decodeURIComponent(l)}catch(a){return i.readASCII(e,r,n)}return a}};function a(e,r,n,a){let l=r*n,s=Math.ceil(r*f(a)/8),o=new Uint8Array(4*l),c=new Uint32Array(o.buffer),{ctype:u}=a,{depth:d}=a,h=i.readUshort;if(6==u){let r=l<<2;if(8==d)for(var g=0;g<r;g+=4)o[g]=e[g],o[g+1]=e[g+1],o[g+2]=e[g+2],o[g+3]=e[g+3];if(16==d)for(g=0;g<r;g++)o[g]=e[g<<1]}else if(2==u){let r=a.tabs.tRNS;if(null==r){if(8==d)for(g=0;g<l;g++){var m=3*g;c[g]=-0x1000000|e[m+2]<<16|e[m+1]<<8|e[m]}if(16==d)for(g=0;g<l;g++)m=6*g,c[g]=-0x1000000|e[m+4]<<16|e[m+2]<<8|e[m]}else{var p=r[0];let n=r[1],i=r[2];if(8==d)for(g=0;g<l;g++){var b=g<<2;m=3*g,c[g]=-0x1000000|e[m+2]<<16|e[m+1]<<8|e[m],e[m]==p&&e[m+1]==n&&e[m+2]==i&&(o[b+3]=0)}if(16==d)for(g=0;g<l;g++)b=g<<2,m=6*g,c[g]=-0x1000000|e[m+4]<<16|e[m+2]<<8|e[m],h(e,m)==p&&h(e,m+2)==n&&h(e,m+4)==i&&(o[b+3]=0)}}else if(3==u){let i=a.tabs.PLTE,f=a.tabs.tRNS,c=f?f.length:0;if(1==d)for(var w,v=0;v<n;v++){var A=v*s,y=v*r;for(g=0;g<r;g++){b=y+g<<2;var x=3*(w=e[A+(g>>3)]>>7-(7&g)&1);o[b]=i[x],o[b+1]=i[x+1],o[b+2]=i[x+2],o[b+3]=w<c?f[w]:255}}if(2==d)for(v=0;v<n;v++)for(A=v*s,y=v*r,g=0;g<r;g++)b=y+g<<2,x=3*(w=e[A+(g>>2)]>>6-((3&g)<<1)&3),o[b]=i[x],o[b+1]=i[x+1],o[b+2]=i[x+2],o[b+3]=w<c?f[w]:255;if(4==d)for(v=0;v<n;v++)for(A=v*s,y=v*r,g=0;g<r;g++)b=y+g<<2,x=3*(w=e[A+(g>>1)]>>4-((1&g)<<2)&15),o[b]=i[x],o[b+1]=i[x+1],o[b+2]=i[x+2],o[b+3]=w<c?f[w]:255;if(8==d)for(g=0;g<l;g++)b=g<<2,x=3*(w=e[g]),o[b]=i[x],o[b+1]=i[x+1],o[b+2]=i[x+2],o[b+3]=w<c?f[w]:255}else if(4==u){if(8==d)for(g=0;g<l;g++){b=g<<2;var U,F=e[U=g<<1];o[b]=F,o[b+1]=F,o[b+2]=F,o[b+3]=e[U+1]}if(16==d)for(g=0;g<l;g++)b=g<<2,F=e[U=g<<2],o[b]=F,o[b+1]=F,o[b+2]=F,o[b+3]=e[U+2]}else if(0==u)for(p=a.tabs.tRNS?a.tabs.tRNS:-1,v=0;v<n;v++){let n=v*s,i=v*r;if(1==d)for(var j=0;j<r;j++){var E=255*((F=255*(e[n+(j>>>3)]>>>7-(7&j)&1))!=255*p);c[i+j]=E<<24|F<<16|F<<8|F}else if(2==d)for(j=0;j<r;j++)E=255*((F=85*(e[n+(j>>>2)]>>>6-((3&j)<<1)&3))!=85*p),c[i+j]=E<<24|F<<16|F<<8|F;else if(4==d)for(j=0;j<r;j++)E=255*((F=17*(e[n+(j>>>1)]>>>4-((1&j)<<2)&15))!=17*p),c[i+j]=E<<24|F<<16|F<<8|F;else if(8==d)for(j=0;j<r;j++)E=255*((F=e[n+j])!=p),c[i+j]=E<<24|F<<16|F<<8|F;else if(16==d)for(j=0;j<r;j++)F=e[n+(j<<1)],E=255*(h(e,n+(j<<1))!=p),c[i+j]=E<<24|F<<16|F<<8|F}return o}function l(e,r,n,i){let a=new Uint8Array((Math.ceil(n*f(e)/8)+1+e.interlace)*i);return r=e.tabs.CgBI?o(r,a):s(r,a),0==e.interlace?r=c(r,e,0,n,i):1==e.interlace&&(r=function(e,r){let n=r.width,i=r.height,a=f(r),l=a>>3,s=Math.ceil(n*a/8),o=new Uint8Array(i*s),u=0,d=[0,0,4,0,2,0,1],h=[0,4,0,2,0,1,0],g=[8,8,8,4,4,2,2],m=[8,8,4,4,2,2,1],p=0;for(;p<7;){let f=g[p],w=m[p],v=0,A=0,y=d[p];for(;y<i;)y+=f,A++;let x=h[p];for(;x<n;)x+=w,v++;let U=Math.ceil(v*a/8);c(e,r,u,v,A);let F=0,j=d[p];for(;j<i;){let r=h[p],i=u+F*U<<3;for(;r<n;){var b;if(1==a&&(b=(b=e[i>>3])>>7-(7&i)&1,o[j*s+(r>>3)]|=b<<7-(7&r)),2==a&&(b=(b=e[i>>3])>>6-(7&i)&3,o[j*s+(r>>2)]|=b<<6-((3&r)<<1)),4==a&&(b=(b=e[i>>3])>>4-(7&i)&15,o[j*s+(r>>1)]|=b<<4-((1&r)<<2)),a>=8){let n=j*s+r*l;for(let r=0;r<l;r++)o[n+r]=e[(i>>3)+r]}i+=a,r+=w}F++,j+=f}v*A!=0&&(u+=A*(1+U)),p+=1}return o}(r,e)),r}function s(e,r){return o(new Uint8Array(e.buffer,2,e.length-6),r)}var o=((e={}).N=function(r,n){let i=Uint8Array,a,l,s=0,o=0,f=0,c=0,u=0,d=0,h=0,g=0,m=0;if(3==r[0]&&0==r[1])return n||new i(0);let p=e.b,b=e.e,w=e.R,v=e.n,A=e.A,y=e.Z,x=e.m,U=null==n;for(U&&(n=new i(r.length>>>2<<5));0==s;)if(s=p(r,m,1),o=p(r,m+1,2),m+=3,0!=o){if(U&&(n=e.W(n,g+131072)),1==o&&(a=x.J,l=x.h,d=511,h=31),2==o){f=b(r,m,5)+257,c=b(r,m+5,5)+1,u=b(r,m+10,4)+4,m+=14;let n=1;for(var F=0;F<38;F+=2)x.Q[F]=0,x.Q[F+1]=0;for(F=0;F<u;F++){let e=b(r,m+3*F,3);x.Q[1+(x.X[F]<<1)]=e,e>n&&(n=e)}m+=3*u,v(x.Q,n),A(x.Q,n,x.u),a=x.w,l=x.d,m=w(x.u,(1<<n)-1,f+c,r,m,x.v);let i=e.V(x.v,0,f,x.C);d=(1<<i)-1;let s=e.V(x.v,f,c,x.D);h=(1<<s)-1,v(x.C,i),A(x.C,i,a),v(x.D,s),A(x.D,s,l)}for(;;){let e=a[y(r,m)&d];m+=15&e;let i=e>>>4;if(i>>>8==0)n[g++]=i;else{if(256==i)break;{let e=g+i-254;if(i>264){let n=x.q[i-257];e=g+(n>>>3)+b(r,m,7&n),m+=7&n}let a=l[y(r,m)&h];m+=15&a;let s=a>>>4,o=x.c[s],f=(o>>>4)+p(r,m,15&o);for(m+=15&o;g<e;)n[g]=n[g++-f],n[g]=n[g++-f],n[g]=n[g++-f],n[g]=n[g++-f];g=e}}}}else{0!=(7&m)&&(m+=8-(7&m));let a=4+(m>>>3),l=r[a-4]|r[a-3]<<8;U&&(n=e.W(n,g+l)),n.set(new i(r.buffer,r.byteOffset+a,l),g),m=a+l<<3,g+=l}return n.length==g?n:n.slice(0,g)},e.W=function(e,r){let n=e.length;if(r<=n)return e;let i=new Uint8Array(n<<1);return i.set(e,0),i},e.R=function(r,n,i,a,l,s){let o=e.e,f=e.Z,c=0;for(;c<i;){let e=r[f(a,l)&n];l+=15&e;let i=e>>>4;if(i<=15)s[c]=i,c++;else{let e=0,r=0;16==i?(r=3+o(a,l,2),l+=2,e=s[c-1]):17==i?(r=3+o(a,l,3),l+=3):18==i&&(r=11+o(a,l,7),l+=7);let n=c+r;for(;c<n;)s[c]=e,c++}}return l},e.V=function(e,r,n,i){let a=0,l=0,s=i.length>>>1;for(;l<n;){let n=e[l+r];i[l<<1]=0,i[1+(l<<1)]=n,n>a&&(a=n),l++}for(;l<s;)i[l<<1]=0,i[1+(l<<1)]=0,l++;return a},e.n=function(r,n){let i,a,l,s,o=e.m,f=r.length,c=o.j;for(var u=0;u<=n;u++)c[u]=0;for(u=1;u<f;u+=2)c[r[u]]++;let d=o.K;for(i=0,c[0]=0,a=1;a<=n;a++)i=i+c[a-1]<<1,d[a]=i;for(l=0;l<f;l+=2)0!=(s=r[l+1])&&(r[l]=d[s],d[s]++)},e.A=function(r,n,i){let a=r.length,l=e.m.r;for(let e=0;e<a;e+=2)if(0!=r[e+1]){let a=e>>1,s=r[e+1],o=a<<4|s,f=n-s,c=r[e]<<f,u=c+(1<<f);for(;c!=u;)i[l[c]>>>15-n]=o,c++}},e.l=function(r,n){let i=e.m.r,a=15-n;for(let e=0;e<r.length;e+=2){let l=r[e]<<n-r[e+1];r[e]=i[l]>>>a}},e.M=function(e,r,n){n<<=7&r;let i=r>>>3;e[i]|=n,e[i+1]|=n>>>8},e.I=function(e,r,n){n<<=7&r;let i=r>>>3;e[i]|=n,e[i+1]|=n>>>8,e[i+2]|=n>>>16},e.e=function(e,r,n){return(e[r>>>3]|e[1+(r>>>3)]<<8)>>>(7&r)&(1<<n)-1},e.b=function(e,r,n){return(e[r>>>3]|e[1+(r>>>3)]<<8|e[2+(r>>>3)]<<16)>>>(7&r)&(1<<n)-1},e.Z=function(e,r){return(e[r>>>3]|e[1+(r>>>3)]<<8|e[2+(r>>>3)]<<16)>>>(7&r)},e.i=function(e,r){return(e[r>>>3]|e[1+(r>>>3)]<<8|e[2+(r>>>3)]<<16|e[3+(r>>>3)]<<24)>>>(7&r)},r=Uint16Array,n=Uint32Array,e.m={K:new r(16),j:new r(16),X:[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],S:[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,999,999,999],T:[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0],q:new r(32),p:[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,65535,65535],z:[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0],c:new n(32),J:new r(512),_:[],h:new r(32),$:[],w:new r(32768),C:[],v:[],d:new r(32768),D:[],u:new r(512),Q:[],r:new r(32768),s:new n(286),Y:new n(30),a:new n(19),t:new n(15e3),k:new r(65536),g:new r(32768)},function(){let r=e.m;for(var n=0;n<32768;n++){let e=n;e=(0xff00ff00&(e=(0xf0f0f0f0&(e=(0xcccccccc&(e=(0xaaaaaaaa&e)>>>1|(0x55555555&e)<<1))>>>2|(0x33333333&e)<<2))>>>4|(0xf0f0f0f&e)<<4))>>>8|(0xff00ff&e)<<8,r.r[n]=(e>>>16|e<<16)>>>17}function i(e,r,n){for(;0!=r--;)e.push(0,n)}for(n=0;n<32;n++)r.q[n]=r.S[n]<<3|r.T[n],r.c[n]=r.p[n]<<4|r.z[n];i(r._,144,8),i(r._,112,9),i(r._,24,7),i(r._,8,8),e.n(r._,9),e.A(r._,9,r.J),e.l(r._,9),i(r.$,32,5),e.n(r.$,5),e.A(r.$,5,r.h),e.l(r.$,5),i(r.Q,19,0),i(r.C,286,0),i(r.D,30,0),i(r.v,320,0)}(),e.N);function f(e){return[1,null,3,1,2,null,4][e.ctype]*e.depth}function c(e,r,n,i,a){let l,s,o=f(r),c=Math.ceil(i*o/8);o=Math.ceil(o/8);let d=e[n],h=0;if(d>1&&(e[n]=[0,0,1][d-2]),3==d)for(h=o;h<c;h++)e[h+1]=e[h+1]+(e[h+1-o]>>>1)&255;for(let r=0;r<a;r++)if(d=e[(s=(l=n+r*c)+r+1)-1],h=0,0==d)for(;h<c;h++)e[l+h]=e[s+h];else if(1==d){for(;h<o;h++)e[l+h]=e[s+h];for(;h<c;h++)e[l+h]=e[s+h]+e[l+h-o]}else if(2==d)for(;h<c;h++)e[l+h]=e[s+h]+e[l+h-c];else if(3==d){for(;h<o;h++)e[l+h]=e[s+h]+(e[l+h-c]>>>1);for(;h<c;h++)e[l+h]=e[s+h]+(e[l+h-c]+e[l+h-o]>>>1)}else{for(;h<o;h++)e[l+h]=e[s+h]+u(0,e[l+h-c],0);for(;h<c;h++)e[l+h]=e[s+h]+u(e[l+h-o],e[l+h-c],e[l+h-o-c])}return e}function u(e,r,n){let i=e+r-n,a=i-e,l=i-r,s=i-n;return a*a<=l*l&&a*a<=s*s?e:l*l<=s*s?r:n}function d(e,r,n,i,a,l,s,o,f){let c=Math.min(r,a),u=Math.min(n,l),d=0,h=0;for(let n=0;n<u;n++)for(let l=0;l<c;l++)if(s>=0&&o>=0?(d=n*r+l<<2,h=(o+n)*a+s+l<<2):(d=(-o+n)*r-s+l<<2,h=n*a+l<<2),0==f)i[h]=e[d],i[h+1]=e[d+1],i[h+2]=e[d+2],i[h+3]=e[d+3];else if(1==f){var g=e[d+3]*(1/255),m=e[d]*g,p=e[d+1]*g,b=e[d+2]*g,w=i[h+3]*(1/255),v=i[h]*w,A=i[h+1]*w,y=i[h+2]*w;let r=1-g,n=g+w*r,a=0==n?0:1/n;i[h+3]=255*n,i[h+0]=(m+v*r)*a,i[h+1]=(p+A*r)*a,i[h+2]=(b+y*r)*a}else if(2==f)g=e[d+3],m=e[d],p=e[d+1],b=e[d+2],w=i[h+3],v=i[h],A=i[h+1],y=i[h+2],g==w&&m==v&&p==A&&b==y?(i[h]=0,i[h+1]=0,i[h+2]=0,i[h+3]=0):(i[h]=m,i[h+1]=p,i[h+2]=b,i[h+3]=g);else if(3==f){if(g=e[d+3],m=e[d],p=e[d+1],b=e[d+2],w=i[h+3],v=i[h],A=i[h+1],y=i[h+2],g==w&&m==v&&p==A&&b==y)continue;if(g<220&&w>20)return!1}return!0}return{decode:function(e){let r=new Uint8Array(e),n=8,a=i.readUshort,f=i.readUint,c={tabs:{},frames:[]},u=new Uint8Array(r.length),d,h=0,g=0,m=[137,80,78,71,13,10,26,10];for(var p,b=0;b<8;b++)if(r[b]!=m[b])throw"The input is not a PNG file!";for(;n<r.length;){let e=i.readUint(r,n);n+=4;let m=i.readASCII(r,n,4);if(n+=4,"IHDR"==m)w=n,c.width=i.readUint(r,w),w+=4,c.height=i.readUint(r,w),c.depth=r[w+=4],c.ctype=r[++w],c.compress=r[++w],c.filter=r[++w],c.interlace=r[++w],w++;else if("iCCP"==m){for(var w,v,A=n;0!=r[A];)A++;i.readASCII(r,n,A-n),r[A+1];let a=r.slice(A+2,n+e),l=null;try{l=s(a)}catch(e){l=o(a)}c.tabs[m]=l}else if("CgBI"==m)c.tabs[m]=r.slice(n,n+4);else if("IDAT"==m){for(b=0;b<e;b++)u[h+b]=r[n+b];h+=e}else if("acTL"==m)c.tabs[m]={num_frames:f(r,n),num_plays:f(r,n+4)},d=new Uint8Array(r.length);else if("fcTL"==m){0!=g&&((p=c.frames[c.frames.length-1]).data=l(c,d.slice(0,g),p.rect.width,p.rect.height),g=0);let e={x:f(r,n+12),y:f(r,n+16),width:f(r,n+4),height:f(r,n+8)},i=a(r,n+22),s={rect:e,delay:Math.round(1e3*(i=a(r,n+20)/(0==i?100:i))),dispose:r[n+24],blend:r[n+25]};c.frames.push(s)}else if("fdAT"==m){for(b=0;b<e-4;b++)d[g+b]=r[n+b+4];g+=e-4}else if("pHYs"==m)c.tabs[m]=[i.readUint(r,n),i.readUint(r,n+4),r[n+8]];else if("cHRM"==m)for(b=0,c.tabs[m]=[];b<8;b++)c.tabs[m].push(i.readUint(r,n+4*b));else if("tEXt"==m||"zTXt"==m){null==c.tabs[m]&&(c.tabs[m]={});var y=i.nextZero(r,n),x=i.readASCII(r,n,y-n),U=n+e-y-1;if("tEXt"==m)v=i.readASCII(r,y+1,U);else{var F=s(r.slice(y+2,y+2+U));v=i.readUTF8(F,0,F.length)}c.tabs[m][x]=v}else if("iTXt"==m){null==c.tabs[m]&&(c.tabs[m]={}),y=0,A=n,y=i.nextZero(r,A),x=i.readASCII(r,A,y-A);let a=r[A=y+1];r[A+1],A+=2,y=i.nextZero(r,A),i.readASCII(r,A,y-A),A=y+1,y=i.nextZero(r,A),i.readUTF8(r,A,y-A),U=e-((A=y+1)-n),0==a?v=i.readUTF8(r,A,U):(F=s(r.slice(A,A+U)),v=i.readUTF8(F,0,F.length)),c.tabs[m][x]=v}else if("PLTE"==m)c.tabs[m]=i.readBytes(r,n,e);else if("hIST"==m){let e=c.tabs.PLTE.length/3;for(b=0,c.tabs[m]=[];b<e;b++)c.tabs[m].push(a(r,n+2*b))}else if("tRNS"==m)3==c.ctype?c.tabs[m]=i.readBytes(r,n,e):0==c.ctype?c.tabs[m]=a(r,n):2==c.ctype&&(c.tabs[m]=[a(r,n),a(r,n+2),a(r,n+4)]);else if("gAMA"==m)c.tabs[m]=i.readUint(r,n)/1e5;else if("sRGB"==m)c.tabs[m]=r[n];else if("bKGD"==m)0==c.ctype||4==c.ctype?c.tabs[m]=[a(r,n)]:2==c.ctype||6==c.ctype?c.tabs[m]=[a(r,n),a(r,n+2),a(r,n+4)]:3==c.ctype&&(c.tabs[m]=r[n]);else if("IEND"==m)break;n+=e,i.readUint(r,n),n+=4}return 0!=g&&((p=c.frames[c.frames.length-1]).data=l(c,d.slice(0,g),p.rect.width,p.rect.height)),c.data=l(c,u,c.width,c.height),delete c.compress,delete c.interlace,delete c.filter,c},toRGBA8:function(e){let r=e.width,n=e.height;if(null==e.tabs.acTL)return[a(e.data,r,n,e).buffer];let i=[];null==e.frames[0].data&&(e.frames[0].data=e.data);let l=r*n*4,s=new Uint8Array(l),o=new Uint8Array(l),f=new Uint8Array(l);for(let u=0;u<e.frames.length;u++){let h=e.frames[u],g=h.rect.x,m=h.rect.y,p=h.rect.width,b=h.rect.height,w=a(h.data,p,b,e);if(0!=u)for(var c=0;c<l;c++)f[c]=s[c];if(0==h.blend?d(w,p,b,s,r,n,g,m,0):1==h.blend&&d(w,p,b,s,r,n,g,m,1),i.push(s.buffer.slice(0)),0==h.dispose);else if(1==h.dispose)d(o,p,b,s,r,n,g,m,0);else if(2==h.dispose)for(c=0;c<l;c++)s[c]=f[c]}return i},_paeth:u,_copyTile:d,_bin:i}}();!function(){let{_copyTile:e}=M,{_bin:r}=M,n=M._paeth;var i={table:function(){let e=new Uint32Array(256);for(let r=0;r<256;r++){let n=r;for(let e=0;e<8;e++)1&n?n=0xedb88320^n>>>1:n>>>=1;e[r]=n}return e}(),update(e,r,n,a){for(let l=0;l<a;l++)e=i.table[255&(e^r[n+l])]^e>>>8;return e},crc:(e,r,n)=>0xffffffff^i.update(0xffffffff,e,r,n)};function a(e,r,n,i){r[n]+=e[0]*i>>4,r[n+1]+=e[1]*i>>4,r[n+2]+=e[2]*i>>4,r[n+3]+=e[3]*i>>4}function l(e){return Math.max(0,Math.min(255,e))}function s(e,r){let n=e[0]-r[0],i=e[1]-r[1],a=e[2]-r[2],l=e[3]-r[3];return n*n+i*i+a*a+l*l}function o(e,r,n,i,o,f,c){null==c&&(c=1);let u=i.length,d=[];for(var h,g=0;g<u;g++){let e=i[g];d.push([e>>>0&255,e>>>8&255,e>>>16&255,e>>>24&255])}for(g=0;g<u;g++){let e=0xffffffff;for(var m=0,p=0;p<u;p++){var b=s(d[g],d[p]);p!=g&&b<e&&(e=b,m=p)}}let w=new Uint32Array(o.buffer),v=new Int16Array(r*n*4),A=[0,8,2,10,12,4,14,6,3,11,1,9,15,7,13,5];for(g=0;g<A.length;g++)A[g]=255*((A[g]+.5)/16-.5);for(let o=0;o<n;o++)for(let y=0;y<r;y++){g=4*(o*r+y),2!=c?h=[l(e[g]+v[g]),l(e[g+1]+v[g+1]),l(e[g+2]+v[g+2]),l(e[g+3]+v[g+3])]:(b=A[4*(3&o)+(3&y)],h=[l(e[g]+b),l(e[g+1]+b),l(e[g+2]+b),l(e[g+3]+b)]),m=0;let x=0xffffff;for(p=0;p<u;p++){let e=s(h,d[p]);e<x&&(x=e,m=p)}let U=d[m],F=[h[0]-U[0],h[1]-U[1],h[2]-U[2],h[3]-U[3]];1==c&&(y!=r-1&&a(F,v,g+4,7),o!=n-1&&(0!=y&&a(F,v,g+4*r-4,3),a(F,v,g+4*r,5),y!=r-1&&a(F,v,g+4*r+4,1))),f[g>>2]=m,w[g>>2]=i[m]}}function f(e,n,a,l,s){null==s&&(s={});let{crc:o}=i,f=r.writeUint,c=r.writeUshort,u=r.writeASCII,d=8,h=e.frames.length>1,g,m=!1,p=33+20*!!h;if(null!=s.sRGB&&(p+=13),null!=s.pHYs&&(p+=21),null!=s.iCCP&&(p+=21+(g=pako.deflate(s.iCCP)).length+4),3==e.ctype){for(var b=e.plte.length,w=0;w<b;w++)e.plte[w]>>>24!=255&&(m=!0);p+=8+3*b+4+(m?8+ +b+4:0)}for(var v=0;v<e.frames.length;v++)h&&(p+=38),p+=(U=e.frames[v]).cimg.length+12,0!=v&&(p+=4);let A=new Uint8Array(p+=12),y=[137,80,78,71,13,10,26,10];for(w=0;w<8;w++)A[w]=y[w];if(f(A,d,13),u(A,d+=4,"IHDR"),f(A,d+=4,n),f(A,d+=4,a),A[d+=4]=e.depth,A[++d]=e.ctype,A[++d]=0,A[++d]=0,A[++d]=0,f(A,++d,o(A,d-17,17)),d+=4,null!=s.sRGB&&(f(A,d,1),u(A,d+=4,"sRGB"),A[d+=4]=s.sRGB,f(A,++d,o(A,d-5,5)),d+=4),null!=s.iCCP){let e=13+g.length;f(A,d,e),u(A,d+=4,"iCCP"),u(A,d+=4,"ICC profile"),d+=11,d+=2,A.set(g,d),f(A,d+=g.length,o(A,d-(e+4),e+4)),d+=4}if(null!=s.pHYs&&(f(A,d,9),u(A,d+=4,"pHYs"),f(A,d+=4,s.pHYs[0]),f(A,d+=4,s.pHYs[1]),A[d+=4]=s.pHYs[2],f(A,++d,o(A,d-13,13)),d+=4),h&&(f(A,d,8),u(A,d+=4,"acTL"),f(A,d+=4,e.frames.length),f(A,d+=4,null!=s.loop?s.loop:0),f(A,d+=4,o(A,d-12,12)),d+=4),3==e.ctype){for(f(A,d,3*(b=e.plte.length)),u(A,d+=4,"PLTE"),d+=4,w=0;w<b;w++){let r=3*w,n=e.plte[w],i=255&n,a=n>>>8&255,l=n>>>16&255;A[d+r+0]=i,A[d+r+1]=a,A[d+r+2]=l}if(f(A,d+=3*b,o(A,d-3*b-4,3*b+4)),d+=4,m){for(f(A,d,b),u(A,d+=4,"tRNS"),d+=4,w=0;w<b;w++)A[d+w]=e.plte[w]>>>24&255;f(A,d+=b,o(A,d-b-4,b+4)),d+=4}}let x=0;for(v=0;v<e.frames.length;v++){var U=e.frames[v];h&&(f(A,d,26),u(A,d+=4,"fcTL"),f(A,d+=4,x++),f(A,d+=4,U.rect.width),f(A,d+=4,U.rect.height),f(A,d+=4,U.rect.x),f(A,d+=4,U.rect.y),c(A,d+=4,l[v]),c(A,d+=2,1e3),A[d+=2]=U.dispose,A[++d]=U.blend,f(A,++d,o(A,d-30,30)),d+=4);let r=U.cimg;f(A,d,(b=r.length)+4*(0!=v));let n=d+=4;u(A,d,0==v?"IDAT":"fdAT"),d+=4,0!=v&&(f(A,d,x++),d+=4),A.set(r,d),f(A,d+=b,o(A,n,d-n)),d+=4}return f(A,d,0),u(A,d+=4,"IEND"),f(A,d+=4,o(A,d-4,4)),d+=4,A.buffer}function c(e,r,i){for(let a=0;a<e.frames.length;a++){let l=e.frames[a];l.rect.width;let s=l.rect.height,o=new Uint8Array(s*l.bpl+s);l.cimg=function(e,r,i,a,l,s,o){let f=[],c,u=[0,1,2,3,4];-1!=s?u=[s]:(r*a>5e5||1==i)&&(u=[0]),o&&(c={level:0});for(var d=0;d<u.length;d++){for(let s=0;s<r;s++)!function(e,r,i,a,l,s){let o=i*a,f=o+i;if(e[f]=s,f++,0==s)if(a<500)for(var c=0;c<a;c++)e[f+c]=r[o+c];else e.set(new Uint8Array(r.buffer,o,a),f);else if(1==s){for(c=0;c<l;c++)e[f+c]=r[o+c];for(c=l;c<a;c++)e[f+c]=r[o+c]-r[o+c-l]+256&255}else if(0==i){for(c=0;c<l;c++)e[f+c]=r[o+c];if(2==s)for(c=l;c<a;c++)e[f+c]=r[o+c];if(3==s)for(c=l;c<a;c++)e[f+c]=r[o+c]-(r[o+c-l]>>1)+256&255;if(4==s)for(c=l;c<a;c++)e[f+c]=r[o+c]-n(r[o+c-l],0,0)+256&255}else{if(2==s)for(c=0;c<a;c++)e[f+c]=r[o+c]+256-r[o+c-a]&255;if(3==s){for(c=0;c<l;c++)e[f+c]=r[o+c]+256-(r[o+c-a]>>1)&255;for(c=l;c<a;c++)e[f+c]=r[o+c]+256-(r[o+c-a]+r[o+c-l]>>1)&255}if(4==s){for(c=0;c<l;c++)e[f+c]=r[o+c]+256-n(0,r[o+c-a],0)&255;for(c=l;c<a;c++)e[f+c]=r[o+c]+256-n(r[o+c-l],r[o+c-a],r[o+c-l-a])&255}}}(l,e,s,a,i,u[d]);f.push(R.deflate(l,c))}let h,g=1e9;for(d=0;d<f.length;d++)f[d].length<g&&(h=d,g=f[d].length);return f[h]}(l.img,s,l.bpp,l.bpl,o,r,i)}}function u(r,n,i,a,l){let s=l[0],f=l[1],c=l[2],u=l[3],m=l[4],p=l[5],b=6,w=8,v=255;for(var A=0;A<r.length;A++){let e=new Uint8Array(r[A]);for(var y=e.length,x=0;x<y;x+=4)v&=e[x+3]}let U=255!=v,F=function(r,n,i,a,l,s){let o=[];for(var f,c=0;c<r.length;c++){let f=new Uint8Array(r[c]),d=new Uint32Array(f.buffer),p=0,b=0,w=n,v=i,A=+!!a;if(0!=c){let y=s||a||1==c||0!=o[c-2].dispose?1:2,x=0,U=1e9;for(let e=0;e<y;e++){var u,g=new Uint8Array(r[c-1-e]);let a=new Uint32Array(r[c-1-e]),s=n,o=i,f=-1,h=-1;for(let e=0;e<i;e++)for(let r=0;r<n;r++)d[m=e*n+r]!=a[m]&&(r<s&&(s=r),r>f&&(f=r),e<o&&(o=e),e>h&&(h=e));-1==f&&(s=o=f=h=0),l&&(1==(1&s)&&s--,1==(1&o)&&o--);let A=(f-s+1)*(h-o+1);A<U&&(U=A,x=e,p=s,b=o,w=f-s+1,v=h-o+1)}g=new Uint8Array(r[c-1-x]),1==x&&(o[c-1].dispose=2),e(g,n,i,u=new Uint8Array(w*v*4),w,v,-p,-b,0),1==(A=+!!e(f,n,i,u,w,v,-p,-b,3))?h(f,n,i,u,{x:p,y:b,width:w,height:v}):e(f,n,i,u,w,v,-p,-b,0)}else u=f.slice(0);o.push({rect:{x:p,y:b,width:w,height:v},img:u,blend:A,dispose:0})}if(a)for(c=0;c<o.length;c++){if(1==(f=o[c]).blend)continue;let e=f.rect,a=o[c-1].rect,s=Math.min(e.x,a.x),u=Math.min(e.y,a.y),h={x:s,y:u,width:Math.max(e.x+e.width,a.x+a.width)-s,height:Math.max(e.y+e.height,a.y+a.height)-u};o[c-1].dispose=1,c-1!=0&&d(r,n,i,o,c-1,h,l),d(r,n,i,o,c,h,l)}if(1!=r.length)for(var m=0;m<o.length;m++)(f=o[m]).rect.width,f.rect.height;return o}(r,n,i,s,f,c),j={},E=[],k=[];if(0!=a){let e=[];for(x=0;x<F.length;x++)e.push(F[x].img.buffer);let r=g(function(e){let r=0;for(var n=0;n<e.length;n++)r+=e[n].byteLength;let i=new Uint8Array(r),a=0;for(n=0;n<e.length;n++){let r=new Uint8Array(e[n]),l=r.length;for(let e=0;e<l;e+=4){let n=r[e],l=r[e+1],s=r[e+2],o=r[e+3];0==o&&(n=l=s=0),i[a+e]=n,i[a+e+1]=l,i[a+e+2]=s,i[a+e+3]=o}a+=l}return i.buffer}(e),a);for(x=0;x<r.plte.length;x++)E.push(r.plte[x].est.rgba);let n=0;for(x=0;x<F.length;x++){let e=(C=F[x]).img.length;var S=new Uint8Array(r.inds.buffer,n>>2,e>>2);k.push(S);let i=new Uint8Array(r.abuf,n,e);p&&o(C.img,C.rect.width,C.rect.height,E,i,S),C.img.set(i),n+=e}}else for(A=0;A<F.length;A++){var C=F[A];let e=new Uint32Array(C.img.buffer);var R=C.rect.width;for(S=new Uint8Array(y=e.length),k.push(S),x=0;x<y;x++){let r=e[x];if(0!=x&&r==e[x-1])S[x]=S[x-1];else if(x>R&&r==e[x-R])S[x]=S[x-R];else{let e=j[r];if(null==e&&(j[r]=e=E.length,E.push(r),E.length>=300))break;S[x]=e}}}let M=E.length;for(M<=256&&0==m&&(w=Math.max(w=M<=2?1:M<=4?2:M<=16?4:8,u)),A=0;A<F.length;A++){(C=F[A]).rect.x,C.rect.y,R=C.rect.width;let e=C.rect.height,r=C.img;new Uint32Array(r.buffer);let n=4*R,i=4;if(M<=256&&0==m){var _=new Uint8Array((n=Math.ceil(w*R/8))*e);let a=k[A];for(let r=0;r<e;r++){x=r*n;let e=r*R;if(8==w)for(var B=0;B<R;B++)_[x+B]=a[e+B];else if(4==w)for(B=0;B<R;B++)_[x+(B>>1)]|=a[e+B]<<4-4*(1&B);else if(2==w)for(B=0;B<R;B++)_[x+(B>>2)]|=a[e+B]<<6-2*(3&B);else if(1==w)for(B=0;B<R;B++)_[x+(B>>3)]|=a[e+B]<<7-(7&B)}r=_,b=3,i=1}else if(0==U&&1==F.length){_=new Uint8Array(R*e*3);let a=R*e;for(x=0;x<a;x++){let e=3*x,n=4*x;_[e]=r[n],_[e+1]=r[n+1],_[e+2]=r[n+2]}r=_,b=2,i=3,n=3*R}C.img=r,C.bpl=n,C.bpp=i}return{ctype:b,depth:w,plte:E,frames:F}}function d(r,n,i,a,l,s,o){let f=Uint8Array,c=Uint32Array,u=new f(r[l-1]),d=new c(r[l-1]),g=l+1<r.length?new f(r[l+1]):null,m=new f(r[l]),p=new c(m.buffer),b=n,w=i,v=-1,A=-1;for(let e=0;e<s.height;e++)for(let r=0;r<s.width;r++){let i=s.x+r,o=s.y+e,f=o*n+i,c=p[f];0==c||0==a[l-1].dispose&&d[f]==c&&(null==g||0!=g[4*f+3])||(i<b&&(b=i),i>v&&(v=i),o<w&&(w=o),o>A&&(A=o))}-1==v&&(b=w=v=A=0),o&&(1==(1&b)&&b--,1==(1&w)&&w--),s={x:b,y:w,width:v-b+1,height:A-w+1};let y=a[l];y.rect=s,y.blend=1,y.img=new Uint8Array(s.width*s.height*4),0==a[l-1].dispose?(e(u,n,i,y.img,s.width,s.height,-s.x,-s.y,0),h(m,n,i,y.img,s)):e(m,n,i,y.img,s.width,s.height,-s.x,-s.y,0)}function h(r,n,i,a,l){e(r,n,i,a,l.width,l.height,-l.x,-l.y,2)}function g(e,r){let n,i=new Uint8Array(e),a=i.slice(0),l=new Uint32Array(a.buffer),s=m(a,r),o=s[0],f=s[1],c=i.length,u=new Uint8Array(c>>2);if(i.length<2e7)for(var d=0;d<c;d+=4)n=p(o,h=i[d]*(1/255),g=i[d+1]*(1/255),w=i[d+2]*(1/255),v=i[d+3]*(1/255)),u[d>>2]=n.ind,l[d>>2]=n.est.rgba;else for(d=0;d<c;d+=4){var h=i[d]*(1/255),g=i[d+1]*(1/255),w=i[d+2]*(1/255),v=i[d+3]*(1/255);for(n=o;n.left;)n=0>=b(n.est,h,g,w,v)?n.left:n.right;u[d>>2]=n.ind,l[d>>2]=n.est.rgba}return{abuf:a.buffer,inds:u,plte:f}}function m(e,r,n){null==n&&(n=1e-4);let i=new Uint32Array(e.buffer),a={i0:0,i1:e.length,bst:null,est:null,tdst:0,left:null,right:null};a.bst=v(e,a.i0,a.i1),a.est=A(a.bst);let l=[a];for(;l.length<r;){let r=0,a=0;for(var s=0;s<l.length;s++)l[s].est.L>r&&(r=l[s].est.L,a=s);if(r<n)break;let o=l[a],f=function(e,r,n,i,a,l){for(i-=4;n<i;){for(;w(e,n,a)<=l;)n+=4;for(;w(e,i,a)>l;)i-=4;if(n>=i)break;let s=r[n>>2];r[n>>2]=r[i>>2],r[i>>2]=s,n+=4,i-=4}for(;w(e,n,a)>l;)n-=4;return n+4}(e,i,o.i0,o.i1,o.est.e,o.est.eMq255);if(o.i0>=f||o.i1<=f){o.est.L=0;continue}let c={i0:o.i0,i1:f,bst:null,est:null,tdst:0,left:null,right:null};c.bst=v(e,c.i0,c.i1),c.est=A(c.bst);let u={i0:f,i1:o.i1,bst:null,est:null,tdst:0,left:null,right:null};for(s=0,u.bst={R:[],m:[],N:o.bst.N-c.bst.N};s<16;s++)u.bst.R[s]=o.bst.R[s]-c.bst.R[s];for(s=0;s<4;s++)u.bst.m[s]=o.bst.m[s]-c.bst.m[s];u.est=A(u.bst),o.left=c,o.right=u,l[a]=c,l.push(u)}for(l.sort((e,r)=>r.bst.N-e.bst.N),s=0;s<l.length;s++)l[s].ind=s;return[a,l]}function p(e,r,n,i,a){if(null==e.left){var l;let s,o,f,c;return l=e.est.q,s=r-l[0],o=n-l[1],f=i-l[2],e.tdst=s*s+o*o+f*f+(c=a-l[3])*c,e}let s=b(e.est,r,n,i,a),o=e.left,f=e.right;s>0&&(o=e.right,f=e.left);let c=p(o,r,n,i,a);if(c.tdst<=s*s)return c;let u=p(f,r,n,i,a);return u.tdst<c.tdst?u:c}function b(e,r,n,i,a){let{e:l}=e;return l[0]*r+l[1]*n+l[2]*i+l[3]*a-e.eMq}function w(e,r,n){return e[r]*n[0]+e[r+1]*n[1]+e[r+2]*n[2]+e[r+3]*n[3]}function v(e,r,n){let i=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],a=[0,0,0,0];for(let l=r;l<n;l+=4){let r=e[l]*(1/255),n=e[l+1]*(1/255),s=e[l+2]*(1/255),o=e[l+3]*(1/255);a[0]+=r,a[1]+=n,a[2]+=s,a[3]+=o,i[0]+=r*r,i[1]+=r*n,i[2]+=r*s,i[3]+=r*o,i[5]+=n*n,i[6]+=n*s,i[7]+=n*o,i[10]+=s*s,i[11]+=s*o,i[15]+=o*o}return i[4]=i[1],i[8]=i[2],i[9]=i[6],i[12]=i[3],i[13]=i[7],i[14]=i[11],{R:i,m:a,N:n-r>>2}}function A(e){let{R:r}=e,{m:n}=e,{N:i}=e,a=n[0],l=n[1],s=n[2],o=n[3],f=0==i?0:1/i,c=[r[0]-a*a*f,r[1]-a*l*f,r[2]-a*s*f,r[3]-a*o*f,r[4]-l*a*f,r[5]-l*l*f,r[6]-l*s*f,r[7]-l*o*f,r[8]-s*a*f,r[9]-s*l*f,r[10]-s*s*f,r[11]-s*o*f,r[12]-o*a*f,r[13]-o*l*f,r[14]-o*s*f,r[15]-o*o*f],u=[Math.random(),Math.random(),Math.random(),Math.random()],d=0,h=0;if(0!=i)for(let e=0;e<16&&(u=y.multVec(c,u),h=Math.sqrt(y.dot(u,u)),u=y.sml(1/h,u),!(0!=e&&1e-9>Math.abs(h-d)));e++)d=h;let g=[a*f,l*f,s*f,o*f];return{Cov:c,q:g,e:u,L:d,eMq255:y.dot(y.sml(255,g),u),eMq:y.dot(u,g),rgba:(Math.round(255*g[3])<<24|Math.round(255*g[2])<<16|Math.round(255*g[1])<<8|(0|Math.round(255*g[0])))>>>0}}var y={multVec:(e,r)=>[e[0]*r[0]+e[1]*r[1]+e[2]*r[2]+e[3]*r[3],e[4]*r[0]+e[5]*r[1]+e[6]*r[2]+e[7]*r[3],e[8]*r[0]+e[9]*r[1]+e[10]*r[2]+e[11]*r[3],e[12]*r[0]+e[13]*r[1]+e[14]*r[2]+e[15]*r[3]],dot:(e,r)=>e[0]*r[0]+e[1]*r[1]+e[2]*r[2]+e[3]*r[3],sml:(e,r)=>[e*r[0],e*r[1],e*r[2],e*r[3]]};M.encode=function(e,r,n,i,a,l,s){null==i&&(i=0),null==s&&(s=!1);let o=u(e,r,n,i,[!1,!1,!1,0,s,!1]);return c(o,-1),f(o,r,n,a,l)},M.encodeLL=function(e,r,n,i,a,l,s,o){let u={ctype:0+2*(1!=i)+4*(0!=a),depth:l,frames:[]},d=(i+a)*l,h=d*r;for(let i=0;i<e.length;i++)u.frames.push({rect:{x:0,y:0,width:r,height:n},img:new Uint8Array(e[i]),blend:0,dispose:1,bpp:Math.ceil(d/8),bpl:Math.ceil(h/8)});return c(u,0,!0),f(u,r,n,s,o)},M.encode.compress=u,M.encode.dither=o,M.quantize=g,M.quantize.getKDtree=m,M.quantize.getNearest=p}();let _={toArrayBuffer(e,r){let n=e.width,i=e.height,a=n<<2,l=new Uint32Array(e.getContext("2d").getImageData(0,0,n,i).data.buffer),s=(32*n+31)/32<<2,o=s*i,f=122+o,c=new ArrayBuffer(f),u=new DataView(c),d,h,g,m,p=1048576,b=0,w=0,v=0;function A(e){u.setUint16(w,e,!0),w+=2}function y(e){u.setUint32(w,e,!0),w+=4}A(19778),y(f),w+=4,y(122),y(108),y(n),y(-i>>>0),A(1),A(32),y(3),y(o),y(2835),y(2835),w+=8,y(0xff0000),y(65280),y(255),y(0xff000000),y(0x57696e20),function e(){for(;b<i&&p>0;){for(m=122+b*s,d=0;d<a;)p--,g=(h=l[v++])>>>24,u.setUint32(m+d,h<<8|g),d+=4;b++}v<l.length?(p=1048576,setTimeout(e,_._dly)):r(c)}()},toBlob(e,r){this.toArrayBuffer(e,e=>{r(new Blob([e],{type:"image/bmp"}))})},_dly:9};var B={CHROME:"CHROME",FIREFOX:"FIREFOX",DESKTOP_SAFARI:"DESKTOP_SAFARI",IE:"IE",IOS:"IOS",ETC:"ETC"},I={[B.CHROME]:16384,[B.FIREFOX]:11180,[B.DESKTOP_SAFARI]:16384,[B.IE]:8192,[B.IOS]:4096,[B.ETC]:8192};let N="undefined"!=typeof window,T="undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope,z=N&&window.cordova&&window.cordova.require&&window.cordova.require("cordova/modulemapper"),L=(N||T)&&(z&&z.getOriginalSymbol(window,"File")||"undefined"!=typeof File&&File),O=(N||T)&&(z&&z.getOriginalSymbol(window,"FileReader")||"undefined"!=typeof FileReader&&FileReader);function P(e,r,n=Date.now()){return new Promise(i=>{let a=e.split(","),l=a[0].match(/:(.*?);/)[1],s=globalThis.atob(a[1]),o=s.length,f=new Uint8Array(o);for(;o--;)f[o]=s.charCodeAt(o);let c=new Blob([f],{type:l});c.name=r,c.lastModified=n,i(c)})}function D(e){return new Promise((r,n)=>{let i=new O;i.onload=()=>r(i.result),i.onerror=e=>n(e),i.readAsDataURL(e)})}function Q(e){return new Promise((r,n)=>{let i=new Image;i.onload=()=>r(i),i.onerror=e=>n(e),i.src=e})}function W(){if(void 0!==W.cachedResult)return W.cachedResult;let e=B.ETC,{userAgent:r}=navigator;return/Chrom(e|ium)/i.test(r)?e=B.CHROME:/iP(ad|od|hone)/i.test(r)&&/WebKit/i.test(r)?e=B.IOS:/Safari/i.test(r)?e=B.DESKTOP_SAFARI:/Firefox/i.test(r)?e=B.FIREFOX:(/MSIE/i.test(r)||!0==!!document.documentMode)&&(e=B.IE),W.cachedResult=e,W.cachedResult}function H(e,r){let n=I[W()],i=e,a=r,l=i*a,s=i>a?a/i:i/a;for(;l>n*n;){let e=(n+i)/2,r=(n+a)/2;e<r?(a=r,i=r*s):(a=e*s,i=e),l=i*a}return{width:i,height:a}}function $(e,r){let n,i;try{if(i=(n=new OffscreenCanvas(e,r)).getContext("2d"),null===i)throw Error("getContext of OffscreenCanvas returns null")}catch(e){i=(n=document.createElement("canvas")).getContext("2d")}return n.width=e,n.height=r,[n,i]}function q(e,r){let{width:n,height:i}=H(e.width,e.height),[a,l]=$(n,i);return r&&/jpe?g/.test(r)&&(l.fillStyle="white",l.fillRect(0,0,a.width,a.height)),l.drawImage(e,0,0,a.width,a.height),a}function K(){return void 0!==K.cachedResult||(K.cachedResult=["iPad Simulator","iPhone Simulator","iPod Simulator","iPad","iPhone","iPod"].includes(navigator.platform)||navigator.userAgent.includes("Mac")&&"undefined"!=typeof document&&"ontouchend"in document),K.cachedResult}function G(e,r={}){return new Promise(function(n,i){let a,l;var s=function(){try{return l=q(a,r.fileType||e.type),n([a,l])}catch(e){return i(e)}},o=function(r){try{var n=function(e){try{throw e}catch(e){return i(e)}};try{let r;return D(e).then(function(e){try{return r=e,Q(r).then(function(e){try{return a=e,function(){try{return s()}catch(e){return i(e)}}()}catch(e){return n(e)}},n)}catch(e){return n(e)}},n)}catch(e){n(e)}}catch(e){return i(e)}};try{if(K()||[B.DESKTOP_SAFARI,B.MOBILE_SAFARI].includes(W()))throw Error("Skip createImageBitmap on IOS and Safari");return createImageBitmap(e).then(function(e){try{return a=e,s()}catch(e){return o()}},o)}catch(e){o()}})}function Z(e,r,n,i,a=1){return new Promise(function(l,s){let o;if("image/png"===r){let l,s;return l=e.getContext("2d"),{data:s}=l.getImageData(0,0,e.width,e.height),(o=new Blob([M.encode([s.buffer],e.width,e.height,4096*a)],{type:r})).name=n,o.lastModified=i,u.call(this)}if("image/bmp"===r)return new Promise(r=>_.toBlob(e,r)).then((function(e){try{return(o=e).name=n,o.lastModified=i,c.call(this)}catch(e){return s(e)}}).bind(this),s);if("function"==typeof OffscreenCanvas&&e instanceof OffscreenCanvas)return e.convertToBlob({type:r,quality:a}).then((function(e){try{return(o=e).name=n,o.lastModified=i,f.call(this)}catch(e){return s(e)}}).bind(this),s);return P(e.toDataURL(r,a),n,i).then((function(e){try{return o=e,f.call(this)}catch(e){return s(e)}}).bind(this),s);function f(){return c.call(this)}function c(){return u.call(this)}function u(){return l(o)}})}function X(e){e.width=0,e.height=0}function V(){return new Promise(function(e,r){let n,i,a,l;return void 0!==V.cachedResult?e(V.cachedResult):P("data:image/jpeg;base64,/9j/4QAiRXhpZgAATU0AKgAAAAgAAQESAAMAAAABAAYAAAAAAAD/2wCEAAEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAf/AABEIAAEAAgMBEQACEQEDEQH/xABKAAEAAAAAAAAAAAAAAAAAAAALEAEAAAAAAAAAAAAAAAAAAAAAAQEAAAAAAAAAAAAAAAAAAAAAEQEAAAAAAAAAAAAAAAAAAAAA/9oADAMBAAIRAxEAPwA/8H//2Q==","test.jpg",Date.now()).then(function(s){try{return n=s,G(n).then(function(s){try{return i=s[1],Z(i,n.type,n.name,n.lastModified).then(function(n){try{return a=n,X(i),G(a).then(function(n){try{return l=n[0],V.cachedResult=1===l.width&&2===l.height,e(V.cachedResult)}catch(e){return r(e)}},r)}catch(e){return r(e)}},r)}catch(e){return r(e)}},r)}catch(e){return r(e)}},r)})}function Y(e){return new Promise((r,n)=>{let i=new O;i.onload=e=>{let n=new DataView(e.target.result);if(65496!=n.getUint16(0,!1))return r(-2);let i=n.byteLength,a=2;for(;a<i&&!(8>=n.getUint16(a+2,!1));){let e=n.getUint16(a,!1);if(a+=2,65505==e){if(0x45786966!=n.getUint32(a+=2,!1))return r(-1);let e=18761==n.getUint16(a+=6,!1);a+=n.getUint32(a+4,e);let i=n.getUint16(a,e);a+=2;for(let l=0;l<i;l++)if(274==n.getUint16(a+12*l,e))return r(n.getUint16(a+12*l+8,e))}else{if(65280!=(65280&e))break;a+=n.getUint16(a,!1)}}return r(-1)},i.onerror=e=>n(e),i.readAsArrayBuffer(e)})}function J(e,r){let{width:n}=e,{height:i}=e,{maxWidthOrHeight:a}=r,l,s=e;return isFinite(a)&&(n>a||i>a)&&([s,l]=$(n,i),n>i?(s.width=a,s.height=i/n*a):(s.width=n/i*a,s.height=a),l.drawImage(e,0,0,s.width,s.height),X(e)),s}function ee(e,r){let{width:n}=e,{height:i}=e,[a,l]=$(n,i);switch(r>4&&r<9?(a.width=i,a.height=n):(a.width=n,a.height=i),r){case 2:l.transform(-1,0,0,1,n,0);break;case 3:l.transform(-1,0,0,-1,n,i);break;case 4:l.transform(1,0,0,-1,0,i);break;case 5:l.transform(0,1,1,0,0,0);break;case 6:l.transform(0,1,-1,0,i,0);break;case 7:l.transform(0,-1,-1,0,i,n);break;case 8:l.transform(0,-1,1,0,0,n)}return l.drawImage(e,0,0,n,i),X(e),a}function et(e,r,n=0){return new Promise(function(i,a){let l,s,o,f,c,u,d,h,g,m,p,b,w,v,A,y,x,U,F,j;function E(e=5){if(r.signal&&r.signal.aborted)throw r.signal.reason;l+=e,r.onProgress(Math.min(l,100))}function k(e){if(r.signal&&r.signal.aborted)throw r.signal.reason;l=Math.min(Math.max(e,l),100),r.onProgress(l)}return l=n,s=r.maxIteration||10,o=1024*r.maxSizeMB*1024,E(),G(e,r).then((function(n){try{return[,f]=n,E(),c=J(f,r),E(),new Promise(function(n,i){var a;if(!(a=r.exifOrientation))return Y(e).then((function(e){try{return a=e,l.call(this)}catch(e){return i(e)}}).bind(this),i);function l(){return n(a)}return l.call(this)}).then((function(n){try{return u=n,E(),V().then((function(n){try{return d=n?c:ee(c,u),E(),h=r.initialQuality||1,g=r.fileType||e.type,Z(d,g,e.name,e.lastModified,h).then((function(n){try{var l;if(m=n,E(),p=m.size>o,b=m.size>e.size,!p&&!b)return k(100),i(m);function u(){if(s--&&(A>o||A>w)){let r,n;return r=j?.95*F.width:F.width,n=j?.95*F.height:F.height,[x,U]=$(r,n),U.drawImage(F,0,0,r,n),h*="image/png"===g?.85:.95,Z(x,g,e.name,e.lastModified,h).then(function(e){try{return y=e,X(F),F=x,A=y.size,k(Math.min(99,Math.floor((v-A)/(v-o)*100))),u}catch(e){return a(e)}},a)}return[1]}return w=e.size,A=v=m.size,F=d,j=!r.alwaysKeepResolution&&p,(l=(function(e){for(;e;){if(e.then)return void e.then(l,a);try{if(e.pop){if(e.length)return e.pop()?S.call(this):e;e=u}else e=e.call(this)}catch(e){return a(e)}}}).bind(this))(u);function S(){return X(F),X(x),X(c),X(d),X(f),k(100),i(y)}}catch(e){return a(e)}}).bind(this),a)}catch(e){return a(e)}}).bind(this),a)}catch(e){return a(e)}}).bind(this),a)}catch(e){return a(e)}}).bind(this),a)})}function er(e,n){return new Promise(function(i,a){let l,s,o,f,c,u;if(l={...n},o=0,{onProgress:f}=l,l.maxSizeMB=l.maxSizeMB||1/0,c="boolean"!=typeof l.useWebWorker||l.useWebWorker,delete l.useWebWorker,l.onProgress=e=>{o=e,"function"==typeof f&&f(o)},!(e instanceof Blob||e instanceof L))return a(Error("The file given is not an instance of Blob or File"));if(!/^image/.test(e.type))return a(Error("The file given is not an image"));if(u="undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope,!c||"function"!=typeof Worker||u)return et(e,l).then((function(e){try{return s=e,g.call(this)}catch(e){return a(e)}}).bind(this),a);var d=(function(){try{return g.call(this)}catch(e){return a(e)}}).bind(this),h=function(r){try{return et(e,l).then(function(e){try{return s=e,d()}catch(e){return a(e)}},a)}catch(e){return a(e)}};try{return l.libURL=l.libURL||"https://cdn.jsdelivr.net/npm/browser-image-compression@2.0.2/dist/browser-image-compression.js",new Promise((n,i)=>{var a;let s;r||(s=[],"function"==typeof(a="\nlet scriptImported = false\nself.addEventListener('message', async (e) => {\n  const { file, id, imageCompressionLibUrl, options } = e.data\n  options.onProgress = (progress) => self.postMessage({ progress, id })\n  try {\n    if (!scriptImported) {\n      // console.log('[worker] importScripts', imageCompressionLibUrl)\n      self.importScripts(imageCompressionLibUrl)\n      scriptImported = true\n    }\n    // console.log('[worker] self', self)\n    const compressedFile = await imageCompression(file, options)\n    self.postMessage({ file: compressedFile, id })\n  } catch (e) {\n    // console.error('[worker] error', e)\n    self.postMessage({ error: e.message + '\\n' + e.stack, id })\n  }\n})\n")?s.push(`(${a})()`):s.push(a),r=URL.createObjectURL(new Blob(s)));let o=new Worker(r);o.addEventListener("message",function(e){if(l.signal&&l.signal.aborted)o.terminate();else if(void 0===e.data.progress){if(e.data.error)return i(Error(e.data.error)),void o.terminate();n(e.data.file),o.terminate()}else l.onProgress(e.data.progress)}),o.addEventListener("error",i),l.signal&&l.signal.addEventListener("abort",()=>{i(l.signal.reason),o.terminate()}),o.postMessage({file:e,imageCompressionLibUrl:l.libURL,options:{...l,onProgress:void 0,signal:void 0}})}).then(function(e){try{return s=e,d()}catch(e){return h()}},h)}catch(e){h()}function g(){try{s.name=e.name,s.lastModified=e.lastModified}catch(e){}try{l.preserveExif&&"image/jpeg"===e.type&&(!l.fileType||l.fileType&&l.fileType===e.type)&&(s=k(e,s))}catch(e){}return i(s)}})}er.getDataUrlFromFile=D,er.getFilefromDataUrl=P,er.loadImage=Q,er.drawImageInCanvas=q,er.drawFileInCanvas=G,er.canvasToFile=Z,er.getExifOrientation=Y,er.handleMaxWidthOrHeight=J,er.followExifOrientation=ee,er.cleanupCanvasMemory=X,er.isAutoOrientationInBrowser=V,er.approximateBelowMaximumCanvasSizeOfBrowser=H,er.copyExifWithoutOrientation=k,er.getBrowserName=W,er.version="2.0.2";class en{workerScript;concurrency;workers;queue;running;constructor(r,n){this.workerScript=r,this.concurrency=n,this.workers=[],this.queue=[],this.running=new Map;for(let r=0;r<n;r++){const r=new Worker(e.r(360621),{type:"module",type:void 0});r.onmessage=e=>this.handleMessage(r,e),r.onerror=e=>this.handleError(r,e),this.workers.push(r)}}handleMessage(e,r){let n=this.running.get(e);n?(this.running.delete(e),r.data&&r.data.error?n.reject(r.data.error):n.resolve(r.data),this.runNext()):console.warn("Received message for unknown task:",r.data)}handleError(e,r){let n=this.running.get(e);n&&(n.reject(r),this.running.delete(e)),console.error("Worker error:",r),this.runNext()}runNext(){if(0===this.queue.length)return;let e=this.workers.find(e=>!this.running.has(e));if(!e)return;let r=this.queue.shift();try{this.running.set(e,r),r.transfer&&r.transfer.length>0?e.postMessage(r.input,r.transfer):e.postMessage(r.input)}catch(n){this.running.delete(e),r.reject(n),setTimeout(()=>this.runNext(),0)}}async run(e,r){return new Promise((n,i)=>{this.queue.push({input:e,transfer:r,resolve:n,reject:i}),this.runNext()})}terminate(){for(;this.queue.length;)this.queue.shift().reject(Error("ImageWorkerPool terminated"));this.workers.forEach(e=>{let r=this.running.get(e);r&&(r.reject(Error("ImageWorkerPool terminated")),this.running.delete(e)),e.terminate()}),this.workers=[]}}var ei=e.i(921399);function ea(){let[r,n]=(0,o.useState)([]),[i,a]=(0,o.useState)(!1),[l,g]=(0,o.useState)(!1),[m,b]=(0,o.useState)("webp"),[v,A]=(0,o.useState)(80),[y,U]=(0,o.useState)("setOriginalSize"),[k,S]=(0,o.useState)({targetWidth:1920,targetHeight:1080,shortSide:1080,longSide:1920,cropRatioW:16,cropRatioH:9,cropWidth:1920,cropHeight:1080}),C=(0,o.useRef)(null),R=(0,o.useRef)(null),{processImages:M}=function({images:r,setImages:n,outputFormat:i,jpegQuality:a,resizeMode:l,resizeValues:s}){let f=(0,o.useRef)(null),c={avif:"../../../../lib/images/avif/avif.compressor.worker.ts",webp:null,jpeg:null};(0,o.useEffect)(()=>{let r=c[i];if(f.current?.terminate(),f.current=null,r)try{f.current=new en(new e.U(e.r(674061)),navigator.hardwareConcurrency||4)}catch(e){console.error("Worker failed:",e)}return()=>f.current?.terminate()},[i]);let u=(0,o.useMemo)(()=>{let e={};if("setOriginalSize"!==l)switch(e.method=l,l){case"fitWidth":e.width=s.targetWidth;break;case"fitHeight":e.height=s.targetHeight;break;case"setShort":e.short=s.shortSide;break;case"setLong":e.long=s.longSide;break;case"setCropRatio":e.cropRatio={w:s.cropRatioW,h:s.cropRatioH};break;case"setCropSize":e.cropSize={w:s.cropWidth,h:s.cropHeight}}return{preview:{maxSize:300},resize:e,format:{target:"jpeg"===i?"jpeg":i,transparentFill:"#ffffff"},jpeg:{quality:a/100},avif:{quality:a,speed:8}}},[l,s,i,a]),d=async e=>{let r=e.filter(e=>!e.compressed);if(0===r.length)return;let l=f.current,s=[...e];for(let e of r)try{let r;if(l&&"avifxx"===i){let n=await e.file.arrayBuffer(),a=await l.run({id:e.id,file:new Uint8Array(n),name:e.file.name,option:u,targetFormat:i,width:e.originalDims.width,height:e.originalDims.height},[n]),s=a instanceof Uint8Array?a:a?.data||a?.blob;r=new Blob([s],{type:(0,ei.determineMime)(i)})}else r=await er(e.file,{maxWidthOrHeight:4e3,initialQuality:a/100,fileType:"webp"===i?"image/webp":void 0});let n=await F(r),o=s.findIndex(r=>r.id===e.id);s[o]={...e,compressed:r,compressedSize:r.size,savings:(e.originalSize-r.size)/e.originalSize*100,newDims:n,preview:URL.createObjectURL(r)}}catch(e){console.error("Compression failed:",e)}n(s)};return{compressOption:u,processImages:d}}({images:r,setImages:n,outputFormat:m,jpegQuality:v,resizeMode:y,resizeValues:k}),_=(0,o.useRef)([]);_.current=r;let B=()=>{console.log("Recompressing all images..."),n(e=>{let r=e.map(e=>({...e,compressed:void 0,compressedSize:void 0,savings:void 0,newDims:e.originalDims,preview:e.preview}));return M(r),r})},I=(0,o.useCallback)(async e=>{let r=Array.from(e).filter(e=>e.type.startsWith("image/")),i=new Set(_.current.map(e=>x(e.file))),a=r.filter(e=>!i.has(x(e)));if(C.current&&(C.current.value=""),R.current&&(R.current.value=""),!a.length)return;let l=await Promise.all(a.map(async e=>{let r=await F(e);return{id:Math.random().toString(36).substr(2,9),file:e,preview:URL.createObjectURL(e),originalSize:e.size,originalDims:r,newDims:r}})),s=[..._.current,...l];n(s),M(s)},[M]);(0,o.useEffect)(()=>{let e=e=>{e.preventDefault(),a(!1),e.dataTransfer?.files&&I(e.dataTransfer.files)},r=e=>{e.preventDefault(),a(!0)},n=()=>a(!1);return window.addEventListener("dragover",r),window.addEventListener("dragleave",n),window.addEventListener("drop",e),()=>{window.removeEventListener("dragover",r),window.removeEventListener("dragleave",n),window.removeEventListener("drop",e)}},[I]);let N=async()=>{if(!r.some(e=>e.compressed))return;g(!0);let e=new f.default,n=e.folder("compressed");r.forEach(e=>{if(!e.compressed)return;let r="avif"===m?"avif":"webp"===m?"webp":"jpg",i=e.file.name.replace(/\.[^.]+$/,`_compressed.${r}`);n?.file(i,e.compressed)});let i=await e.generateAsync({type:"blob"});(0,c.saveAs)(i,`compressed-images-${new Date().toISOString().slice(0,10)}.zip`),g(!1)};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("input",{ref:C,type:"file",multiple:!0,accept:"image/*",className:"d-none",onChange:e=>e.target.files&&I(e.target.files)}),(0,s.jsx)("input",{ref:R,type:"file",webkitdirectory:"true",className:"d-none",onChange:e=>e.target.files&&I(e.target.files)}),(0,s.jsxs)(u.default,{children:[(0,s.jsx)(w,{isDragging:i}),(0,s.jsx)(d.default,{title:"Configuration",children:(0,s.jsx)(h.default,{gap:"4",children:(0,s.jsx)(p,{format:m,quality:v,onFormatChange:b,onQualityChange:A,onRecompress:B})})}),(0,s.jsx)(d.default,{title:"",children:(0,s.jsxs)(h.default,{gap:"5",children:[(0,s.jsx)(E,{imageCount:r.length,hasCompressed:r.some(e=>e.compressed),isExporting:l,onAddImages:()=>C.current?.click(),onAddFolder:()=>R.current?.click(),onRecompress:B,onExportZip:N,onClear:()=>{r.forEach(e=>{URL.revokeObjectURL(e.preview),e.compressed&&URL.revokeObjectURL(URL.createObjectURL(e.compressed))}),n([])}}),(0,s.jsx)(j,{images:r,format:m,onRemove:e=>{n(r=>{let n=r.find(r=>r.id===e);return n&&(URL.revokeObjectURL(n.preview),n.compressed&&URL.revokeObjectURL(URL.createObjectURL(n.compressed))),r.filter(r=>r.id!==e)})},onDownload:e=>{if(!e.compressed)return;let r=URL.createObjectURL(e.compressed),n=document.createElement("a");n.href=r;let i="webp"===m?"webp":"avif"===m?"avif":"jpg";n.download=e.file.name.replace(/\.[^.]+$/,`_compressed.${i}`),n.click(),URL.revokeObjectURL(r)}})]})})]})]})}e.s(["default",()=>ea],687124)}]);