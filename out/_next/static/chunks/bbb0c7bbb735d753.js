(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,421072,e=>{"use strict";var t=e.i(843476);function r({children:e,gap:r="0",alignment:a="start",distribution:n="start",className:i="",style:s,width:o="100"}){let l=["d-flex flex-column","25"===o?"w-25":"50"===o?"w-50":"75"===o?"w-75":"100"===o?"w-100":"auto"===o?"w-auto":"",`gap-${r}`,`align-items-${a}`,`justify-content-${"between"===n?"between":"around"===n?"around":"evenly"===n?"evenly":n}`,i].filter(Boolean).join(" "),c={...s,..."string"==typeof o&&!["25","50","75","100","auto"].includes(o)?{width:o}:{}};return(0,t.jsx)("div",{className:l,style:c,children:e})}e.s(["default",()=>r])},439911,e=>{"use strict";var t=e.i(843476),r=e.i(421072);function a({children:e,style:a}){return(0,t.jsx)(r.default,{gap:"3",alignment:"start",className:"px-3 pb-3",style:a,children:e})}e.s(["default",()=>a])},701870,486415,e=>{"use strict";let t=async()=>WebAssembly.validate(new Uint8Array([0,97,115,109,1,0,0,0,1,5,1,96,0,1,123,3,2,1,0,10,10,1,8,0,65,0,253,15,253,98,11]));async function r(e,t,r){return e({...r,locateFile:e=>e.endsWith(".wasm")?new URL(e,location.origin).toString():e,...t?{wasmModule:t}:{}})}function a(e,t){return console.time(e),t().finally(()=>console.timeEnd(e))}async function n(e,t){if(e.aborted)throw new DOMException("AbortError","AbortError");return Promise.race([t,new Promise((t,r)=>{e.addEventListener("abort",()=>r(new DOMException("AbortError","AbortError")))})])}e.s(["simd",0,t,"threads",0,()=>(async e=>{try{return"undefined"!=typeof MessageChannel&&(new MessageChannel).port1.postMessage(new SharedArrayBuffer(1)),WebAssembly.validate(e)}catch(e){return!1}})(new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,2,1,0,5,4,1,3,1,1,10,11,1,9,0,65,0,254,16,2,0,26,11]))],486415),e.s(["abortable",()=>n,"initEmscriptenModule",()=>r,"timed",()=>a],701870)},255519,e=>{"use strict";let t=Symbol("Comlink.proxy"),r=Symbol("Comlink.endpoint"),a=Symbol("Comlink.releaseProxy"),n=Symbol("Comlink.finalizer"),i=Symbol("Comlink.thrown"),s=e=>"object"==typeof e&&null!==e||"function"==typeof e,o=new Map([["proxy",{canHandle:e=>s(e)&&e[t],serialize(e){let{port1:t,port2:r}=new MessageChannel;return l(e,t),[r,[r]]},deserialize:e=>(e.start(),d(e))}],["throw",{canHandle:e=>s(e)&&i in e,serialize:({value:e})=>[e instanceof Error?{isError:!0,value:{message:e.message,name:e.name,stack:e.stack}}:{isError:!1,value:e},[]],deserialize(e){if(e.isError)throw Object.assign(Error(e.value.message),e.value);throw e.value}}]]);function l(e,t=globalThis,r=["*"]){t.addEventListener("message",function a(s){let o;if(!s||!s.data)return;if(!function(e,t){for(let r of e)if(t===r||"*"===r||r instanceof RegExp&&r.test(t))return!0;return!1}(r,s.origin))return void console.warn(`Invalid origin '${s.origin}' for comlink proxy`);let{id:d,type:g,path:u}=Object.assign({path:[]},s.data),p=(s.data.argumentList||[]).map(y);try{let t=u.slice(0,-1).reduce((e,t)=>e[t],e),r=u.reduce((e,t)=>e[t],e);switch(g){case"GET":o=r;break;case"SET":t[u.slice(-1)[0]]=y(s.data.value),o=!0;break;case"APPLY":o=r.apply(t,p);break;case"CONSTRUCT":{let e=new r(...p);o=b(e)}break;case"ENDPOINT":{let{port1:t,port2:r}=new MessageChannel;l(e,r),o=f(t,[t])}break;case"RELEASE":o=void 0;break;default:return}}catch(e){o={value:e,[i]:0}}Promise.resolve(o).catch(e=>({value:e,[i]:0})).then(r=>{let[i,s]=w(r);t.postMessage(Object.assign(Object.assign({},i),{id:d}),s),"RELEASE"===g&&(t.removeEventListener("message",a),c(t),n in e&&"function"==typeof e[n]&&e[n]())}).catch(e=>{let[r,a]=w({value:TypeError("Unserializable return value"),[i]:0});t.postMessage(Object.assign(Object.assign({},r),{id:d}),a)})}),t.start&&t.start()}function c(e){"MessagePort"===e.constructor.name&&e.close()}function d(e,t){let n=new Map;return e.addEventListener("message",function(e){let{data:t}=e;if(!t||!t.id)return;let r=n.get(t.id);if(r)try{r(t)}finally{n.delete(t.id)}}),function e(t,n,i=[],s=function(){}){let o,l=!1,c=new Proxy(s,{get(r,s){if(g(l),s===a)return()=>{m&&m.unregister(c),u(t),n.clear(),l=!0};if("then"===s){if(0===i.length)return{then:()=>c};let e=v(t,n,{type:"GET",path:i.map(e=>e.toString())}).then(y);return e.then.bind(e)}return e(t,n,[...i,s])},set(e,r,a){g(l);let[s,o]=w(a);return v(t,n,{type:"SET",path:[...i,r].map(e=>e.toString()),value:s},o).then(y)},apply(a,s,o){g(l);let c=i[i.length-1];if(c===r)return v(t,n,{type:"ENDPOINT"}).then(y);if("bind"===c)return e(t,n,i.slice(0,-1));let[d,u]=x(o);return v(t,n,{type:"APPLY",path:i.map(e=>e.toString()),argumentList:d},u).then(y)},construct(e,r){g(l);let[a,s]=x(r);return v(t,n,{type:"CONSTRUCT",path:i.map(e=>e.toString()),argumentList:a},s).then(y)}});return o=(p.get(t)||0)+1,p.set(t,o),m&&m.register(c,t,c),c}(e,n,[],t)}function g(e){if(e)throw Error("Proxy has been released and is not useable")}function u(e){return v(e,new Map,{type:"RELEASE"}).then(()=>{c(e)})}let p=new WeakMap,m="FinalizationRegistry"in globalThis&&new FinalizationRegistry(e=>{let t=(p.get(e)||0)-1;p.set(e,t),0===t&&u(e)});function x(e){var t;let r=e.map(w);return[r.map(e=>e[0]),(t=r.map(e=>e[1]),Array.prototype.concat.apply([],t))]}let h=new WeakMap;function f(e,t){return h.set(e,t),e}function b(e){return Object.assign(e,{[t]:!0})}function w(e){for(let[t,r]of o)if(r.canHandle(e)){let[a,n]=r.serialize(e);return[{type:"HANDLER",name:t,value:a},n]}return[{type:"RAW",value:e},h.get(e)||[]]}function y(e){switch(e.type){case"HANDLER":return o.get(e.name).deserialize(e.value);case"RAW":return e.value}}function v(e,t,r,a){return new Promise(n=>{let i=[,,,,].fill(0).map(()=>Math.floor(Math.random()*Number.MAX_SAFE_INTEGER).toString(16)).join("-");t.set(i,n),e.start&&e.start(),e.postMessage(Object.assign({id:i},r),a)})}e.s(["expose",()=>l,"proxy",()=>b,"transfer",()=>f,"wrap",()=>d])},102579,e=>{e.v("/_next/static/media/imageWorker.3dd186a3.ts")},469214,e=>{e.v(e.b(["static/chunks/adbb901e8ebb410a.js","static/chunks/c7c926fe4f7e0207.js","static/chunks/turbopack-57d252eaf2532062.js"]))},570766,e=>{"use strict";var t=e.i(255519),r=e.i(701870);class a{_queue=Promise.resolve();_worker;_workerApi;_workerTimeout;_terminateWorker(){this._worker&&(this._worker.terminate(),this._worker=void 0,this._workerApi=void 0)}_startWorker(){this._worker=new Worker(e.r(469214),{type:"module",type:void 0}),this._workerApi=t.wrap(this._worker)}}for(let e of["avifEncode","webpEncode","jxlEncode","avifDecode","webpDecode","mozjpegEncode","jxlDecode","qoiEncode","resize","quantize","rotate","flipHorizontal","flipVertical","grayscale","sepia","sharpen","gaussianBlur","brightness","contrast","hueRotate","watermark","filter","blendOver","blendOverlay","blendAtop","blendPlus","blendMultiply","blendBurn","blendDifference","blendSoftLight","blendHardLight","blendDodge","blendExclusion","blendLighten","blendDarken","pixelateBlur"])a.prototype[e]=function(t,...a){return this._queue=this._queue.catch(()=>{}).then(async()=>{if(t.aborted)throw new DOMException("AbortError","AbortError");clearTimeout(this._workerTimeout),this._worker||this._startWorker();let n=()=>this._terminateWorker();return t.addEventListener("abort",n),(0,r.abortable)(t,this._workerApi[e](...a)).finally(()=>{t.removeEventListener("abort",n),this._workerTimeout=setTimeout(()=>{this._terminateWorker()},1e4)})}),this._queue};let n=new a;e.s(["processor",0,n],570766)},653728,e=>{"use strict";var t=e.i(843476),r=e.i(439911),a=e.i(271645),n=e.i(570766);function i(){let[e,i]=(0,a.useState)("Ready"),[s,o]=(0,a.useState)(null),[l,c]=(0,a.useState)(null),[d,g]=(0,a.useState)(0),[u,p]=(0,a.useState)(0),[m,x]=(0,a.useState)("encode"),[h,f]=(0,a.useState)(null),[b,w]=(0,a.useState)("avif"),y=async e=>{let t=e.target.files?.[0];if(!t)return;i("Processing..."),o(null),c(null),f(null);let r=new AbortController,a=URL.createObjectURL(t),s=t.name.toLowerCase(),l="image/avif"===t.type||s.endsWith(".avif"),d="image/webp"===t.type||s.endsWith(".webp"),u="image/jxl"===t.type||s.endsWith(".jxl");u?(x("jxl-to-avif"),f("jxl")):l||d?(x("decode"),l&&f("avif"),d&&f("webp")):x("encode"),g(t.size);try{if("jxl-to-avif"===m||u){i("Decoding JXL and converting to AVIF...");let e=await t.arrayBuffer(),s=await n.processor.jxlDecode(r.signal,e),l=await n.processor.avifEncode(r.signal,s,{quality:50,speed:6}),d=new Blob([l],{type:"image/avif"}),g=URL.createObjectURL(d);o(a),c(g),p(l.byteLength);let u=((1-l.byteLength/t.size)*100).toFixed(1);i(`Converted JXL → AVIF! Reduced by ${u}%`)}else if("encode"===m){let e,s=new Image;s.src=a,await new Promise(e=>s.onload=e);let l=document.createElement("canvas");l.width=s.width,l.height=s.height;let d=l.getContext("2d");d.drawImage(s,0,0);let g=d.getImageData(0,0,s.width,s.height);i(`Encoding to ${b.toUpperCase()} (background worker)...`),e="avif"===b?await n.processor.avifEncode(r.signal,g,{quality:65,speed:8,subsample:2}):"mozjpeg"===b?await n.processor.mozjpegEncode(r.signal,g,{quality:85,progressive:!0,optimize_coding:!0,trellis_multipass:!0,trellis_loops:10,auto_subsample:!0,chroma_subsample:2}):"webp"===b?await n.processor.webpEncode(r.signal,g,{quality:80,method:6,sns_strength:50,filter_strength:60,segments:4,pass:10,alpha_compression:1,alpha_quality:100,lossless:0}):await n.processor.jxlEncode(r.signal,g,{quality:85,effort:7,lossless:!1});let u={avif:{mime:"image/avif",ext:"avif"},mozjpeg:{mime:"image/jpeg",ext:"jpg"},webp:{mime:"image/webp",ext:"webp"},jxl:{mime:"image/jxl",ext:"jxl"}}[b],m=new Blob([e],{type:u.mime}),x=URL.createObjectURL(m);c(x),p(e.byteLength),o(a);let h=((1-e.byteLength/t.size)*100).toFixed(1);i(`Encoded to ${b.toUpperCase()}! Reduced by ${h}%`)}else{let e;i(`Decoding ${h?.toUpperCase()} (background worker)...`),o(a);let s=await t.arrayBuffer();e="avif"===h?await n.processor.avifDecode(r.signal,s):await n.processor.webpDecode(r.signal,s);let l=document.createElement("canvas");l.width=e.width,l.height=e.height,l.getContext("2d").putImageData(e,0,0);let d=l.toDataURL("image/png");c(d),p(s.byteLength),i(`Decoded ${h?.toUpperCase()} → ${e.width}\xd7${e.height}`)}}catch(e){i(`Error: ${e.message||e}`),console.error(e)}};return(0,a.useEffect)(()=>()=>{s&&URL.revokeObjectURL(s),l&&URL.revokeObjectURL(l)},[s,l]),(0,t.jsx)(r.default,{children:(0,t.jsxs)("div",{className:"max-w-6xl mx-auto p-12",children:[(0,t.jsx)("h1",{className:"text-4xl font-bold mb-8 text-center",children:"Ultimate Next-Gen Image Processor"}),"encode"===m&&(0,t.jsxs)("div",{className:"flex flex-wrap justify-center gap-6 mb-12",children:[(0,t.jsx)("button",{onClick:()=>w("avif"),className:`px-10 py-5 rounded-2xl font-bold text-lg transition-all shadow-lg ${"avif"===b?"bg-purple-600 text-white scale-105 ring-4 ring-purple-300":"bg-gray-200 text-gray-700 hover:bg-gray-300"}`,children:"Encode to AVIF"}),(0,t.jsx)("button",{onClick:()=>w("mozjpeg"),className:`px-10 py-5 rounded-2xl font-bold text-lg transition-all shadow-lg ${"mozjpeg"===b?"bg-blue-600 text-white scale-105 ring-4 ring-blue-300":"bg-gray-200 text-gray-700 hover:bg-gray-300"}`,children:"Encode to JPEG (MozJPEG)"}),(0,t.jsx)("button",{onClick:()=>w("webp"),className:`px-10 py-5 rounded-2xl font-bold text-lg transition-all shadow-lg ${"webp"===b?"bg-green-600 text-white scale-105 ring-4 ring-green-300":"bg-gray-200 text-gray-700 hover:bg-gray-300"}`,children:"Encode to WebP"}),(0,t.jsx)("button",{onClick:()=>w("jxl"),className:`px-10 py-5 rounded-2xl font-bold text-lg transition-all shadow-lg ${"jxl"===b?"bg-orange-600 text-white scale-105 ring-4 ring-orange-300":"bg-gray-200 text-gray-700 hover:bg-gray-300"}`,children:"Encode to JPEG XL"})]}),(0,t.jsxs)("p",{className:"text-lg text-gray-600 mb-10 text-center max-w-4xl mx-auto",children:["jxl-to-avif"===m?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("strong",{children:"Demo Feature:"})," Converting"," ",(0,t.jsx)("code",{className:"bg-gray-200 px-2 py-1 rounded",children:".jxl"})," →"," ",(0,t.jsx)("code",{className:"bg-purple-200 px-2 py-1 rounded",children:".avif"})]}):"encode"===m?(0,t.jsxs)(t.Fragment,{children:["Upload any image to ",(0,t.jsx)("strong",{children:"encode"})," using the selected format"]}):(0,t.jsxs)(t.Fragment,{children:["Upload a"," ",(0,t.jsxs)("code",{className:"bg-gray-200 px-2 py-1 rounded",children:[".",h]})," ","file to ",(0,t.jsx)("strong",{children:"decode"})," and view it"]}),(0,t.jsx)("br",{}),(0,t.jsx)("em",{className:"text-sm",children:"(All processing runs in shared Web Workers — UI stays perfectly smooth)"})]}),(0,t.jsx)("div",{className:"flex justify-center mb-12",children:(0,t.jsx)("input",{type:"file",accept:"image/*,.avif,.webp,.jxl",onChange:y,className:"block w-full max-w-xl text-lg file:mr-6 file:py-5 file:px-10 file:rounded-2xl file:border-0 file:bg-gradient-to-r file:from-indigo-600 file:to-pink-600 file:text-white hover:file:from-indigo-700 hover:file:to-pink-700 cursor-pointer"})}),(0,t.jsx)("p",{className:"text-center text-2xl font-medium text-gray-800 mb-16",children:e}),(s||l)&&(0,t.jsxs)("div",{className:"grid md:grid-cols-2 gap-16 items-start",children:[(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsx)("h3",{className:"text-2xl font-semibold mb-4",children:"jxl-to-avif"===m?"Original JXL":"encode"===m?"Original Image":`Input ${h?.toUpperCase()}`}),(0,t.jsxs)("p",{className:"text-gray-600 mb-6",children:["Size: ",(d/1024).toFixed(1)," KB"]}),"encode"===m&&s&&(0,t.jsx)("img",{src:s,alt:"Original",className:"rounded-2xl shadow-2xl border max-w-full mx-auto"}),("decode"===m||"jxl-to-avif"===m)&&(0,t.jsx)("div",{className:"bg-gray-100 border-4 border-dashed rounded-2xl p-12 text-gray-500",children:(0,t.jsxs)("p",{className:"text-xl",children:[".","jxl-to-avif"===m?"jxl":h," file",(0,t.jsx)("br",{}),"(no direct preview)"]})})]}),(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsx)("h3",{className:"text-2xl font-semibold mb-4 text-green-600",children:"jxl-to-avif"===m?"Converted to AVIF":"encode"===m?`Encoded ${b.toUpperCase()}`:`Decoded from ${h?.toUpperCase()}`}),(0,t.jsxs)("p",{className:"text-gray-600 mb-8",children:["Size: ",(u/1024).toFixed(1)," KB"]}),l&&(0,t.jsxs)(t.Fragment,{children:["decode"!==m&&(0,t.jsxs)("a",{href:l,download:`converted.${"jxl-to-avif"===m||"avif"===b?"avif":"mozjpeg"===b?"jpg":"webp"===b?"webp":"jxl"}`,className:"inline-block mb-8 px-10 py-5 bg-green-600 text-white text-xl font-bold rounded-2xl hover:bg-green-700 shadow-xl transition",children:["Download"," ","jxl-to-avif"===m?"AVIF":b.toUpperCase()]}),(0,t.jsx)("img",{src:l,alt:"Result",className:"rounded-2xl shadow-2xl border max-w-full mx-auto"})]})]})]})]})})}e.s(["default",()=>i])}]);