(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,551691,(e,t,r)=>{let a=new URL("avif.wasm",location.origin),n=null,o={wbg:{__wbg_log_53027a77be2f101a:(e,t)=>{let r=new Uint8Array(n.memory.buffer,e,t);console.log("[AVIF Worker]",new TextDecoder().decode(r))},__wbindgen_init_externref_table:()=>{let e=n.__wbindgen_export_0,t=e.grow(4);e.set(0),e.set(t),e.set(t+1,null),e.set(t+2,!0),e.set(t+3,!1)}}},s=async()=>{if(n)return n;let e=await fetch(a,{cache:"force-cache"}),{instance:t}=await WebAssembly.instantiateStreaming(e,o);return(n=t.exports).memory,postMessage({type:"ready"}),n};self.onmessage=async e=>{let{id:t,bytes:r,width:a,height:n,quality:o=50,speed:i=8}=e.data;try{let e=await s(),l=e.__wbindgen_malloc,c=e.__wbindgen_free,g=r.length,_=l(g,1);new Uint8Array(e.memory.buffer).set(r,_);let[f,m]=e.avif_from_imagedata(_,g,a,n,o,i),b=new Uint8Array(e.memory.buffer,f,m).slice();c(f,m),postMessage({id:t,result:b},[b.buffer])}catch(e){postMessage({id:t,error:e.message||"AVIF encoding failed"})}}}]);