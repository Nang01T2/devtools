(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,701870,486415,e=>{"use strict";let r=async()=>WebAssembly.validate(new Uint8Array([0,97,115,109,1,0,0,0,1,5,1,96,0,1,123,3,2,1,0,10,10,1,8,0,65,0,253,15,253,98,11]));async function t(e,r,t){return e({...t,locateFile:e=>e.endsWith(".wasm")?new URL(e,location.origin).toString():e,...r?{wasmModule:r}:{}})}function s(e,r){return console.time(e),r().finally(()=>console.timeEnd(e))}async function i(e,r){if(e.aborted)throw new DOMException("AbortError","AbortError");return Promise.race([r,new Promise((r,t)=>{e.addEventListener("abort",()=>t(new DOMException("AbortError","AbortError")))})])}e.s(["simd",0,r,"threads",0,()=>(async e=>{try{return"undefined"!=typeof MessageChannel&&(new MessageChannel).port1.postMessage(new SharedArrayBuffer(1)),WebAssembly.validate(e)}catch(e){return!1}})(new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,2,1,0,5,4,1,3,1,1,10,11,1,9,0,65,0,254,16,2,0,26,11]))],486415),e.s(["abortable",()=>i,"initEmscriptenModule",()=>t,"timed",()=>s],701870)},255519,e=>{"use strict";let r=Symbol("Comlink.proxy"),t=Symbol("Comlink.endpoint"),s=Symbol("Comlink.releaseProxy"),i=Symbol("Comlink.finalizer"),a=Symbol("Comlink.thrown"),n=e=>"object"==typeof e&&null!==e||"function"==typeof e,o=new Map([["proxy",{canHandle:e=>n(e)&&e[r],serialize(e){let{port1:r,port2:t}=new MessageChannel;return l(e,r),[t,[t]]},deserialize:e=>(e.start(),d(e))}],["throw",{canHandle:e=>n(e)&&a in e,serialize:({value:e})=>[e instanceof Error?{isError:!0,value:{message:e.message,name:e.name,stack:e.stack}}:{isError:!1,value:e},[]],deserialize(e){if(e.isError)throw Object.assign(Error(e.value.message),e.value);throw e.value}}]]);function l(e,r=globalThis,t=["*"]){r.addEventListener("message",function s(n){let o;if(!n||!n.data)return;if(!function(e,r){for(let t of e)if(r===t||"*"===t||t instanceof RegExp&&t.test(r))return!0;return!1}(t,n.origin))return void console.warn(`Invalid origin '${n.origin}' for comlink proxy`);let{id:d,type:m,path:u}=Object.assign({path:[]},n.data),b=(n.data.argumentList||[]).map(v);try{let r=u.slice(0,-1).reduce((e,r)=>e[r],e),t=u.reduce((e,r)=>e[r],e);switch(m){case"GET":o=t;break;case"SET":r[u.slice(-1)[0]]=v(n.data.value),o=!0;break;case"APPLY":o=t.apply(r,b);break;case"CONSTRUCT":{let e=new t(...b);o=g(e)}break;case"ENDPOINT":{let{port1:r,port2:t}=new MessageChannel;l(e,t),o=x(r,[r])}break;case"RELEASE":o=void 0;break;default:return}}catch(e){o={value:e,[a]:0}}Promise.resolve(o).catch(e=>({value:e,[a]:0})).then(t=>{let[a,n]=w(t);r.postMessage(Object.assign(Object.assign({},a),{id:d}),n),"RELEASE"===m&&(r.removeEventListener("message",s),c(r),i in e&&"function"==typeof e[i]&&e[i]())}).catch(e=>{let[t,s]=w({value:TypeError("Unserializable return value"),[a]:0});r.postMessage(Object.assign(Object.assign({},t),{id:d}),s)})}),r.start&&r.start()}function c(e){"MessagePort"===e.constructor.name&&e.close()}function d(e,r){let i=new Map;return e.addEventListener("message",function(e){let{data:r}=e;if(!r||!r.id)return;let t=i.get(r.id);if(t)try{t(r)}finally{i.delete(r.id)}}),function e(r,i,a=[],n=function(){}){let o,l=!1,c=new Proxy(n,{get(t,n){if(m(l),n===s)return()=>{h&&h.unregister(c),u(r),i.clear(),l=!0};if("then"===n){if(0===a.length)return{then:()=>c};let e=y(r,i,{type:"GET",path:a.map(e=>e.toString())}).then(v);return e.then.bind(e)}return e(r,i,[...a,n])},set(e,t,s){m(l);let[n,o]=w(s);return y(r,i,{type:"SET",path:[...a,t].map(e=>e.toString()),value:n},o).then(v)},apply(s,n,o){m(l);let c=a[a.length-1];if(c===t)return y(r,i,{type:"ENDPOINT"}).then(v);if("bind"===c)return e(r,i,a.slice(0,-1));let[d,u]=p(o);return y(r,i,{type:"APPLY",path:a.map(e=>e.toString()),argumentList:d},u).then(v)},construct(e,t){m(l);let[s,n]=p(t);return y(r,i,{type:"CONSTRUCT",path:a.map(e=>e.toString()),argumentList:s},n).then(v)}});return o=(b.get(r)||0)+1,b.set(r,o),h&&h.register(c,r,c),c}(e,i,[],r)}function m(e){if(e)throw Error("Proxy has been released and is not useable")}function u(e){return y(e,new Map,{type:"RELEASE"}).then(()=>{c(e)})}let b=new WeakMap,h="FinalizationRegistry"in globalThis&&new FinalizationRegistry(e=>{let r=(b.get(e)||0)-1;b.set(e,r),0===r&&u(e)});function p(e){var r;let t=e.map(w);return[t.map(e=>e[0]),(r=t.map(e=>e[1]),Array.prototype.concat.apply([],r))]}let f=new WeakMap;function x(e,r){return f.set(e,r),e}function g(e){return Object.assign(e,{[r]:!0})}function w(e){for(let[r,t]of o)if(t.canHandle(e)){let[s,i]=t.serialize(e);return[{type:"HANDLER",name:r,value:s},i]}return[{type:"RAW",value:e},f.get(e)||[]]}function v(e){switch(e.type){case"HANDLER":return o.get(e.name).deserialize(e.value);case"RAW":return e.value}}function y(e,r,t,s){return new Promise(i=>{let a=[,,,,].fill(0).map(()=>Math.floor(Math.random()*Number.MAX_SAFE_INTEGER).toString(16)).join("-");r.set(a,i),e.start&&e.start(),e.postMessage(Object.assign({id:a},t),s)})}e.s(["expose",()=>l,"proxy",()=>g,"transfer",()=>x,"wrap",()=>d])},896835,e=>{e.v("/_next/static/media/mediaWorker.f65923fc.ts")},399229,e=>{e.v(e.b(["static/chunks/6216b7d16dc01e7a.js","static/chunks/turbopack-570bb6b4dcc7a8f1.js"]))},654534,e=>{"use strict";var r=e.i(255519),t=e.i(701870);class s{_queue=Promise.resolve();_worker;_workerApi;_workerTimeout;_terminateWorker(){this._worker&&(this._worker.terminate(),this._worker=void 0,this._workerApi=void 0,void 0!==this._workerTimeout&&(clearTimeout(this._workerTimeout),this._workerTimeout=void 0))}_startWorker(){this._worker=new Worker(e.r(399229),{type:"module",type:void 0}),this._workerApi=r.wrap(this._worker)}}for(let e of["encodeToMp4","encodeToGif"])s.prototype[e]=function(...s){let i,a,n;return s.length>0&&s[0]instanceof AbortSignal?(i=s[0],a=s.slice(1)):(i=void 0,a=s),a.length>0&&"function"==typeof a[a.length-1]&&(n=a.pop()),i||(i=new AbortController().signal),this._queue=this._queue.catch(()=>{}).then(async()=>{if(i.aborted)throw new DOMException("Aborted","AbortError");void 0!==this._workerTimeout&&clearTimeout(this._workerTimeout),this._worker||this._startWorker();let s=()=>this._terminateWorker();i.addEventListener("abort",s,{once:!0});try{let s;return n&&(s=r.proxy(n)),await (0,t.abortable)(i,this._workerApi[e](...a,s))}finally{i.removeEventListener("abort",s),this._workerTimeout=self.setTimeout(()=>{this._terminateWorker()},3e4)}}),this._queue};let i=new s;e.s(["mediaProcessor",0,i],654534)},910404,e=>{"use strict";var r=e.i(843476),t=e.i(271645),s=e.i(654534);function i(){let[e,i]=(0,t.useState)("setup"),[a,n]=(0,t.useState)("screen"),[o,l]=(0,t.useState)(!1),[c,d]=(0,t.useState)(!0),[m,u]=(0,t.useState)(!1),[b,h]=(0,t.useState)(0),[p,f]=(0,t.useState)(!1),[x,g]=(0,t.useState)("mp4"),w=(0,t.useRef)(null),v=(0,t.useRef)(null),y=(0,t.useRef)(null),j=(0,t.useRef)(null),k=(0,t.useRef)([]),N=(0,t.useRef)(null),E=(0,t.useRef)(null),S=(0,t.useRef)(null),R=()=>new Date().toLocaleString("en-US",{month:"long",day:"numeric",year:"numeric",hour:"numeric",minute:"2-digit",hour12:!0}),T=async()=>{try{k.current=[],h(0);let e=await navigator.mediaDevices.getDisplayMedia({video:{cursor:"always"},audio:!0});if(N.current=e,c){let r=await navigator.mediaDevices.getUserMedia({audio:{echoCancellation:!0,noiseSuppression:!0,autoGainControl:!0},video:!1});E.current=new AudioContext;let t=E.current.createMediaStreamSource(r),s=E.current.createMediaStreamDestination();e.getAudioTracks().length>0&&E.current.createMediaStreamSource(e).connect(s),t.connect(s),e.getAudioTracks().forEach(e=>e.stop()),s.stream.getAudioTracks().forEach(r=>e.addTrack(r))}let r=(()=>{for(let e of["video/webm;codecs=vp9,opus","video/webm;codecs=vp8,opus","video/webm;codecs=vp9","video/webm;codecs=vp8","video/webm"])if(MediaRecorder.isTypeSupported(e))return e;return""})(),t=new MediaRecorder(e,r?{mimeType:r}:{});t.ondataavailable=e=>{e.data.size>0&&k.current.push(e.data)},t.onstop=()=>{M(),S.current&&clearInterval(S.current);let e=new Blob(k.current,{type:"video/webm"});v.current=e;let r=URL.createObjectURL(e);y.current=r,w.current&&(w.current.src=r,w.current.load(),w.current.play().catch(()=>{})),i("preview")},t.start(1e3),j.current=t,i("recording"),S.current=setInterval(()=>{h(e=>e+1)},1e3),e.getVideoTracks()[0].onended=A}catch(e){console.error("Recording error:",e),alert("Recording was cancelled or permission was denied.")}},A=()=>{j.current?.stop()},M=()=>{N.current?.getTracks().forEach(e=>e.stop()),E.current?.close(),E.current=null},C=async()=>{if(v.current){f(!0);try{let e=v.current;if("mp4"===x){let r=new Uint8Array(await e.arrayBuffer()),t=await s.mediaProcessor.encodeToMp4(r);e=new Blob([t],{type:"video/mp4"})}else if("gif"===x){alert("GIF export is not yet implemented."),f(!1);return}let r=URL.createObjectURL(e),t=document.createElement("a");t.href=r,t.download=`Screenity video - ${R().replace(/[, ]+/g," ")}.${"mp4"===x?"mp4":"gif"===x?"gif":"webm"}`,t.click(),URL.revokeObjectURL(r)}catch(e){console.error("Export failed:",e),alert("Failed to export the video.")}finally{f(!1)}}};if((0,t.useEffect)(()=>()=>{M(),y.current&&URL.revokeObjectURL(y.current)},[]),"preview"!==e){let t;return(0,r.jsxs)("div",{className:"container-fluid bg-body rounded-4 shadow-lg overflow-hidden",style:{maxWidth:"520px",border:"1px solid var(--bs-border-color)"},children:[(0,r.jsxs)("div",{className:"d-flex align-items-center justify-content-between px-4 py-3 bg-light bg-opacity-50 dark:bg-dark bg-opacity-25 border-bottom",children:[(0,r.jsxs)("div",{className:"d-flex align-items-center gap-3",children:[(0,r.jsx)("div",{className:"bg-primary rounded-circle p-2",children:(0,r.jsx)("i",{className:"bi bi-record-circle-fill fs-4 text-white"})}),(0,r.jsx)("h5",{className:"mb-0 fw-semibold",children:"Record"})]}),(0,r.jsxs)("button",{className:"btn btn-sm btn-outline-secondary rounded-pill",children:["Your videos ",(0,r.jsx)("i",{className:"bi bi-chevron-down ms-2"})]})]}),(0,r.jsx)("div",{className:"px-4 pt-4",children:(0,r.jsx)("div",{className:"d-flex gap-4 border-bottom",children:["Screen","Tab area","Camera","Multi"].map(t=>{let s=t.toLowerCase().replace(" ","");return(0,r.jsx)("button",{type:"button",className:`btn btn-link px-0 pb-3 fw-medium ${a===s?"text-primary border-bottom border-primary border-3":"text-body-tertiary"}`,onClick:()=>n(s),disabled:"recording"===e,children:t},s)})})}),(0,r.jsxs)("div",{className:"px-4 py-4",children:[(0,r.jsxs)("div",{className:"d-flex justify-content-between align-items-center mb-4",children:[(0,r.jsxs)("div",{className:"d-flex align-items-center gap-3",children:[(0,r.jsx)("i",{className:"bi bi-camera-video fs-5 text-muted"}),(0,r.jsx)("span",{className:"fw-medium",children:"Camera"})]}),(0,r.jsxs)("div",{className:"form-check form-switch",children:[(0,r.jsx)("input",{className:"form-check-input",type:"checkbox",checked:o,onChange:e=>l(e.target.checked),disabled:"recording"===e}),(0,r.jsx)("label",{className:"form-check-label text-muted small ms-2",children:o?"On":"No camera"})]})]}),(0,r.jsxs)("div",{className:"d-flex justify-content-between align-items-center mb-4",children:[(0,r.jsxs)("div",{className:"d-flex align-items-center gap-3",children:[(0,r.jsx)("i",{className:"bi bi-mic fs-5 text-muted"}),(0,r.jsx)("span",{className:"fw-medium",children:"Microphone"})]}),(0,r.jsxs)("div",{className:"d-flex align-items-center gap-2",children:[(0,r.jsx)("span",{className:"text-muted small",children:"MacBook Pro Microphone (Built-in)"}),(0,r.jsx)("div",{className:"form-check form-switch",children:(0,r.jsx)("input",{className:"form-check-input",type:"checkbox",checked:c,onChange:e=>d(e.target.checked),disabled:"recording"===e})})]})]}),"recording"===e&&(0,r.jsxs)("div",{className:"d-flex align-items-center gap-3 mb-4",children:[(0,r.jsx)("div",{className:"progress flex-grow-1 bg-success bg-opacity-20",style:{height:"8px"},children:(0,r.jsx)("div",{className:"progress-bar bg-success",style:{width:"100%"}})}),(0,r.jsx)("span",{className:"fw-bold text-success",children:(t=Math.floor(b/60),`${t.toString().padStart(2,"0")}:${(b%60).toString().padStart(2,"0")}`)})]}),(0,r.jsxs)("div",{className:"d-flex justify-content-between align-items-center mb-5",children:[(0,r.jsx)("span",{className:"fw-medium",children:"Push to talk (⌥⌘U)"}),(0,r.jsx)("div",{className:"form-check form-switch",children:(0,r.jsx)("input",{className:"form-check-input",type:"checkbox",checked:m,onChange:e=>u(e.target.checked),disabled:"recording"===e})})]}),(0,r.jsx)("button",{className:`btn btn-lg w-100 rounded-pill shadow-lg ${"recording"===e?"btn-danger":"btn-primary"}`,onClick:"recording"===e?A:T,style:{height:"56px"},children:"recording"===e?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("i",{className:"bi bi-stop-circle-fill fs-4 me-2"}),"Stop recording"]}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("i",{className:"bi bi-record-circle-fill fs-4 me-2"}),"Start recording"]})}),(0,r.jsx)("div",{className:"text-center mt-3",children:(0,r.jsxs)("button",{className:"btn btn-link text-muted small",children:["Show more options ",(0,r.jsx)("i",{className:"bi bi-chevron-down ms-1"})]})})]})]})}return(0,r.jsx)("div",{className:"container-fluid bg-body rounded-4 shadow-lg overflow-hidden",style:{maxWidth:"960px",minHeight:"600px"},children:(0,r.jsxs)("div",{className:"row g-0 h-100",children:[(0,r.jsxs)("div",{className:"col-lg-8 bg-black d-flex flex-column",children:[(0,r.jsxs)("video",{ref:w,controls:!0,autoPlay:!0,playsInline:!0,className:"w-100 flex-grow-1",style:{backgroundColor:"#000",objectFit:"contain"},children:[(0,r.jsx)("source",{src:y.current||"",type:"video/webm"}),"Your browser does not support the video tag."]}),(0,r.jsxs)("div",{className:"px-4 py-3 bg-dark text-white small",children:["Screenity video - ",R()]})]}),(0,r.jsxs)("div",{className:"col-lg-4 bg-body p-4 d-flex flex-column",children:[(0,r.jsx)("h5",{className:"fw-bold mb-4",children:"Export"}),(0,r.jsxs)("div",{className:"d-flex flex-column gap-3 flex-grow-1",children:[(0,r.jsx)("button",{className:`btn text-start rounded-3 py-3 border ${"mp4"===x?"border-primary border-2 shadow-sm":"border-subtle"}`,onClick:()=>g("mp4"),disabled:p,children:(0,r.jsxs)("div",{className:"d-flex align-items-center gap-3",children:[(0,r.jsx)("i",{className:"bi bi-download fs-4 text-primary"}),(0,r.jsxs)("div",{children:[(0,r.jsx)("div",{className:"fw-semibold",children:"Download as .mp4"}),(0,r.jsx)("div",{className:"small text-muted",children:"Export an .mp4 video (recommended)"})]})]})}),(0,r.jsx)("button",{className:`btn text-start rounded-3 py-3 border ${"webm"===x?"border-primary border-2 shadow-sm":"border-subtle"}`,onClick:()=>g("webm"),disabled:p,children:(0,r.jsxs)("div",{className:"d-flex align-items-center gap-3",children:[(0,r.jsx)("i",{className:"bi bi-download fs-4"}),(0,r.jsxs)("div",{children:[(0,r.jsx)("div",{className:"fw-semibold",children:"Download as .webm"}),(0,r.jsx)("div",{className:"small text-muted",children:"Export a .webm video"})]})]})}),(0,r.jsx)("button",{className:`btn text-start rounded-3 py-3 border ${"gif"===x?"border-primary border-2 shadow-sm":"border-subtle"}`,onClick:()=>g("gif"),disabled:p,children:(0,r.jsxs)("div",{className:"d-flex align-items-center gap-3",children:[(0,r.jsx)("i",{className:"bi bi-filetype-gif fs-4"}),(0,r.jsxs)("div",{children:[(0,r.jsx)("div",{className:"fw-semibold",children:"Download as .gif"}),(0,r.jsx)("div",{className:"small text-muted",children:"Export a GIF (max 30 seconds)"})]})]})}),(0,r.jsx)("hr",{className:"my-4"}),(0,r.jsx)("h6",{className:"fw-bold",children:"Advanced"}),(0,r.jsx)("button",{className:"btn text-start rounded-3 py-3 border border-subtle",disabled:!0,children:(0,r.jsxs)("div",{className:"d-flex align-items-center gap-3",children:[(0,r.jsx)("i",{className:"bi bi-download fs-4"}),(0,r.jsxs)("div",{children:[(0,r.jsx)("div",{className:"fw-semibold",children:"Download raw video file"}),(0,r.jsx)("div",{className:"small text-muted",children:"Export the original recording data"})]})]})})]}),(0,r.jsxs)("div",{className:"mt-4",children:[(0,r.jsx)("button",{className:"btn btn-primary w-100 rounded-pill py-3 mb-3 fw-semibold",onClick:C,disabled:p,children:p?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("span",{className:"spinner-border spinner-border-sm me-2"}),"Exporting..."]}):"Download"}),(0,r.jsx)("button",{className:"btn btn-link text-muted w-100",onClick:()=>{y.current&&(URL.revokeObjectURL(y.current),y.current=null),w.current&&(w.current.src=""),i("setup")},children:"← Retake recording"})]}),(0,r.jsxs)("div",{className:"mt-4 p-3 bg-primary bg-opacity-10 rounded-3 text-center small",children:[(0,r.jsx)("div",{className:"fw-medium mb-1",children:"Enjoying this recorder?"}),(0,r.jsx)("div",{children:"Consider supporting open-source tools ❤️"})]})]})]})})}e.s(["default",()=>i])}]);