(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,701870,486415,e=>{"use strict";let t=async()=>WebAssembly.validate(new Uint8Array([0,97,115,109,1,0,0,0,1,5,1,96,0,1,123,3,2,1,0,10,10,1,8,0,65,0,253,15,253,98,11]));async function s(e,t,s){return e({...s,locateFile:e=>e.endsWith(".wasm")?new URL(e,location.origin).toString():e,...t?{wasmModule:t}:{}})}function r(e,t){return console.time(e),t().finally(()=>console.timeEnd(e))}async function a(e,t){if(e.aborted)throw new DOMException("AbortError","AbortError");return Promise.race([t,new Promise((t,s)=>{e.addEventListener("abort",()=>s(new DOMException("AbortError","AbortError")))})])}e.s(["simd",0,t,"threads",0,()=>(async e=>{try{return"undefined"!=typeof MessageChannel&&(new MessageChannel).port1.postMessage(new SharedArrayBuffer(1)),WebAssembly.validate(e)}catch(e){return!1}})(new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,2,1,0,5,4,1,3,1,1,10,11,1,9,0,65,0,254,16,2,0,26,11]))],486415),e.s(["abortable",()=>a,"initEmscriptenModule",()=>s,"timed",()=>r],701870)},255519,e=>{"use strict";let t=Symbol("Comlink.proxy"),s=Symbol("Comlink.endpoint"),r=Symbol("Comlink.releaseProxy"),a=Symbol("Comlink.finalizer"),n=Symbol("Comlink.thrown"),i=e=>"object"==typeof e&&null!==e||"function"==typeof e,o=new Map([["proxy",{canHandle:e=>i(e)&&e[t],serialize(e){let{port1:t,port2:s}=new MessageChannel;return l(e,t),[s,[s]]},deserialize:e=>(e.start(),E(e))}],["throw",{canHandle:e=>i(e)&&n in e,serialize:({value:e})=>[e instanceof Error?{isError:!0,value:{message:e.message,name:e.name,stack:e.stack}}:{isError:!1,value:e},[]],deserialize(e){if(e.isError)throw Object.assign(Error(e.value.message),e.value);throw e.value}}]]);function l(e,t=globalThis,s=["*"]){t.addEventListener("message",function r(i){let o;if(!i||!i.data)return;if(!function(e,t){for(let s of e)if(t===s||"*"===s||s instanceof RegExp&&s.test(t))return!0;return!1}(s,i.origin))return void console.warn(`Invalid origin '${i.origin}' for comlink proxy`);let{id:E,type:p,path:d}=Object.assign({path:[]},i.data),u=(i.data.argumentList||[]).map(R);try{let t=d.slice(0,-1).reduce((e,t)=>e[t],e),s=d.reduce((e,t)=>e[t],e);switch(p){case"GET":o=s;break;case"SET":t[d.slice(-1)[0]]=R(i.data.value),o=!0;break;case"APPLY":o=s.apply(t,u);break;case"CONSTRUCT":{let e=new s(...u);o=h(e)}break;case"ENDPOINT":{var g,f;let{port1:t,port2:s}=new MessageChannel;l(e,s),g=t,f=[t],F.set(g,f),o=g}break;case"RELEASE":o=void 0;break;default:return}}catch(e){o={value:e,[n]:0}}Promise.resolve(o).catch(e=>({value:e,[n]:0})).then(s=>{let[n,i]=y(s);t.postMessage(Object.assign(Object.assign({},n),{id:E}),i),"RELEASE"===p&&(t.removeEventListener("message",r),c(t),a in e&&"function"==typeof e[a]&&e[a]())}).catch(e=>{let[s,r]=y({value:TypeError("Unserializable return value"),[n]:0});t.postMessage(Object.assign(Object.assign({},s),{id:E}),r)})}),t.start&&t.start()}function c(e){"MessagePort"===e.constructor.name&&e.close()}function E(e,t){let a=new Map;return e.addEventListener("message",function(e){let{data:t}=e;if(!t||!t.id)return;let s=a.get(t.id);if(s)try{s(t)}finally{a.delete(t.id)}}),function e(t,a,n=[],i=function(){}){let o,l=!1,c=new Proxy(i,{get(s,i){if(p(l),i===r)return()=>{g&&g.unregister(c),d(t),a.clear(),l=!0};if("then"===i){if(0===n.length)return{then:()=>c};let e=m(t,a,{type:"GET",path:n.map(e=>e.toString())}).then(R);return e.then.bind(e)}return e(t,a,[...n,i])},set(e,s,r){p(l);let[i,o]=y(r);return m(t,a,{type:"SET",path:[...n,s].map(e=>e.toString()),value:i},o).then(R)},apply(r,i,o){p(l);let c=n[n.length-1];if(c===s)return m(t,a,{type:"ENDPOINT"}).then(R);if("bind"===c)return e(t,a,n.slice(0,-1));let[E,d]=f(o);return m(t,a,{type:"APPLY",path:n.map(e=>e.toString()),argumentList:E},d).then(R)},construct(e,s){p(l);let[r,i]=f(s);return m(t,a,{type:"CONSTRUCT",path:n.map(e=>e.toString()),argumentList:r},i).then(R)}});return o=(u.get(t)||0)+1,u.set(t,o),g&&g.register(c,t,c),c}(e,a,[],t)}function p(e){if(e)throw Error("Proxy has been released and is not useable")}function d(e){return m(e,new Map,{type:"RELEASE"}).then(()=>{c(e)})}let u=new WeakMap,g="FinalizationRegistry"in globalThis&&new FinalizationRegistry(e=>{let t=(u.get(e)||0)-1;u.set(e,t),0===t&&d(e)});function f(e){var t;let s=e.map(y);return[s.map(e=>e[0]),(t=s.map(e=>e[1]),Array.prototype.concat.apply([],t))]}let F=new WeakMap;function h(e){return Object.assign(e,{[t]:!0})}function y(e){for(let[t,s]of o)if(s.canHandle(e)){let[r,a]=s.serialize(e);return[{type:"HANDLER",name:t,value:r},a]}return[{type:"RAW",value:e},F.get(e)||[]]}function R(e){switch(e.type){case"HANDLER":return o.get(e.name).deserialize(e.value);case"RAW":return e.value}}function m(e,t,s,r){return new Promise(a=>{let n=[,,,,].fill(0).map(()=>Math.floor(Math.random()*Number.MAX_SAFE_INTEGER).toString(16)).join("-");t.set(n,a),e.start&&e.start(),e.postMessage(Object.assign({id:n},s),r)})}e.s(["expose",()=>l,"proxy",()=>h,"wrap",()=>E])},861721,56916,e=>{"use strict";var t,s;(s=t||(t={})).LOAD="LOAD",s.EXEC="EXEC",s.FFPROBE="FFPROBE",s.WRITE_FILE="WRITE_FILE",s.READ_FILE="READ_FILE",s.DELETE_FILE="DELETE_FILE",s.RENAME="RENAME",s.CREATE_DIR="CREATE_DIR",s.LIST_DIR="LIST_DIR",s.DELETE_DIR="DELETE_DIR",s.ERROR="ERROR",s.DOWNLOAD="DOWNLOAD",s.PROGRESS="PROGRESS",s.LOG="LOG",s.MOUNT="MOUNT",s.UNMOUNT="UNMOUNT",e.s(["CORE_URL",0,"https://unpkg.com/@ffmpeg/core@0.12.9/dist/umd/ffmpeg-core.js","FFMessageType",()=>t],861721);let r=Error("unknown message type"),a=Error("ffmpeg is not loaded, call `await ffmpeg.load()` first"),n=Error("called FFmpeg.terminate()"),i=Error("failed to import ffmpeg-core.js");e.s(["ERROR_IMPORT_FAILURE",0,i,"ERROR_NOT_LOADED",0,a,"ERROR_TERMINATED",0,n,"ERROR_UNKNOWN_MESSAGE_TYPE",0,r],56916)},551131,e=>{e.v("/_next/static/media/worker.c47db340.js")},805899,e=>{e.v(e.b(["static/chunks/2f4299ccd652276e.js","static/chunks/turbopack-b0f06f8358fec12f.js"]))},538149,e=>{"use strict";let t;var s,r,a=e.i(255519),n=e.i(701870),i=e.i(861721);let o=(t=0,()=>t++);var l=e.i(56916);let c={get url(){return`file://${e.P("node_modules/@ffmpeg/ffmpeg/dist/esm/classes.js")}`}};(s=r||(r={})).MEMFS="MEMFS",s.NODEFS="NODEFS",s.NODERAWFS="NODERAWFS",s.IDBFS="IDBFS",s.WORKERFS="WORKERFS",s.PROXYFS="PROXYFS";let E=new class{#e=null;#t={};#s={};#r=[];#a=[];loaded=!1;#n=()=>{this.#e&&(this.#e.onmessage=({data:{id:e,type:t,data:s}})=>{switch(t){case i.FFMessageType.LOAD:this.loaded=!0,this.#t[e](s);break;case i.FFMessageType.MOUNT:case i.FFMessageType.UNMOUNT:case i.FFMessageType.EXEC:case i.FFMessageType.FFPROBE:case i.FFMessageType.WRITE_FILE:case i.FFMessageType.READ_FILE:case i.FFMessageType.DELETE_FILE:case i.FFMessageType.RENAME:case i.FFMessageType.CREATE_DIR:case i.FFMessageType.LIST_DIR:case i.FFMessageType.DELETE_DIR:this.#t[e](s);break;case i.FFMessageType.LOG:this.#r.forEach(e=>e(s));break;case i.FFMessageType.PROGRESS:this.#a.forEach(e=>e(s));break;case i.FFMessageType.ERROR:this.#s[e](s)}delete this.#t[e],delete this.#s[e]})};#i=({type:e,data:t},s=[],r)=>this.#e?new Promise((a,n)=>{let i=o();this.#e&&this.#e.postMessage({id:i,type:e,data:t},s),this.#t[i]=a,this.#s[i]=n,r?.addEventListener("abort",()=>{n(new DOMException(`Message # ${i} was aborted`,"AbortError"))},{once:!0})}):Promise.reject(l.ERROR_NOT_LOADED);on(e,t){"log"===e?this.#r.push(t):"progress"===e&&this.#a.push(t)}off(e,t){"log"===e?this.#r=this.#r.filter(e=>e!==t):"progress"===e&&(this.#a=this.#a.filter(e=>e!==t))}load=({classWorkerURL:t,...s}={},{signal:r}={})=>(this.#e||(this.#e=t?new Worker(new URL(t,c.url),{type:"module"}):new Worker(e.r(805899),{type:"module",type:void 0}),this.#n()),this.#i({type:i.FFMessageType.LOAD,data:s},void 0,r));exec=(e,t=-1,{signal:s}={})=>this.#i({type:i.FFMessageType.EXEC,data:{args:e,timeout:t}},void 0,s);ffprobe=(e,t=-1,{signal:s}={})=>this.#i({type:i.FFMessageType.FFPROBE,data:{args:e,timeout:t}},void 0,s);terminate=()=>{for(let e of Object.keys(this.#s))this.#s[e](l.ERROR_TERMINATED),delete this.#s[e],delete this.#t[e];this.#e&&(this.#e.terminate(),this.#e=null,this.loaded=!1)};writeFile=(e,t,{signal:s}={})=>{let r=[];return t instanceof Uint8Array&&r.push(t.buffer),this.#i({type:i.FFMessageType.WRITE_FILE,data:{path:e,data:t}},r,s)};mount=(e,t,s)=>this.#i({type:i.FFMessageType.MOUNT,data:{fsType:e,options:t,mountPoint:s}},[]);unmount=e=>this.#i({type:i.FFMessageType.UNMOUNT,data:{mountPoint:e}},[]);readFile=(e,t="binary",{signal:s}={})=>this.#i({type:i.FFMessageType.READ_FILE,data:{path:e,encoding:t}},void 0,s);deleteFile=(e,{signal:t}={})=>this.#i({type:i.FFMessageType.DELETE_FILE,data:{path:e}},void 0,t);rename=(e,t,{signal:s}={})=>this.#i({type:i.FFMessageType.RENAME,data:{oldPath:e,newPath:t}},void 0,s);createDir=(e,{signal:t}={})=>this.#i({type:i.FFMessageType.CREATE_DIR,data:{path:e}},void 0,t);listDir=(e,{signal:t}={})=>this.#i({type:i.FFMessageType.LIST_DIR,data:{path:e}},void 0,t);deleteDir=(e,{signal:t}={})=>this.#i({type:i.FFMessageType.DELETE_DIR,data:{path:e}},void 0,t)},p=!1;async function d(){p||(await E.load({coreURL:"https://unpkg.com/@ffmpeg/core@0.12.10/dist/umd/ffmpeg-core.js",wasmURL:"https://unpkg.com/@ffmpeg/core@0.12.10/dist/umd/ffmpeg-core.wasm"}),p=!0)}async function u(e,t){await d();let s="input.webm",r="output.mp4";await E.writeFile(s,e),t&&E.on("progress",({progress:e})=>{t(e)}),await E.exec(["-i",s,"-preset","superfast","-tune","fastdecode","-crf","20","-pix_fmt","yuv420p","-profile:v","main","-max_muxing_queue_size","512","-r","30","-c:a","aac","-b:a","96k","-movflags","+faststart",r]),t&&E.off("progress");let a=await E.readFile(r);try{await E.deleteFile(s),await E.deleteFile(r)}catch(e){}return a}async function g(e,t={},s){await d();let{fps:r=10,width:a=640}=t,n="input.webm",i="output.gif";await E.writeFile(n,e),s&&E.on("progress",({progress:e})=>{s(e)}),await E.exec(["-i",n,"-vf",`fps=${r},scale=${a}:-1:flags=lanczos,split[s0][s1];[s0]palettegen[p];[s1][p]paletteuse`,"-loop","0",i]),E.off("progress");let o=await E.readFile(i);return await E.deleteFile(n),await E.deleteFile(i),o}(0,a.expose)({encodeToMp4:(...e)=>(0,n.timed)("encodeToMp4",()=>u(...e)),encodeToGif:(...e)=>(0,n.timed)("encodeToGif",()=>g(...e))},self),e.s([],538149)}]);