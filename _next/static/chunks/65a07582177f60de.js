(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,987972,362197,673468,__turbopack_context__=>{"use strict";let Module;class Queue{max;list;isRunning;constructor(e=1){this.max=e,this.list=[],this.isRunning=!1}push(e){this.list.push(e),this.isRunning||this.do()}async do(){if(0===this.list.length){this.isRunning=!1;return}this.isRunning=!0;let e=[];for(let t=0;t<this.max;t++){let t=this.list.shift();t&&e.push(t)}let t=e.map(e=>e());await Promise.all(t),await this.do()}}__turbopack_context__.s(["Queue",()=>Queue],987972);let gifWasmBinaryFile=new URL("gif.wasm",location.origin).toString(),gifsicle=function(){let e=gifWasmBinaryFile,t=null;var r=function(){var r="undefined"!=typeof document&&document.currentScript?document.currentScript.src:void 0;return r=r||"/ROOT/src/tools/graphics/image-converter/engines/GifWasmModule.js",function(n){var o,i,a,s,u,c,l,f,d,h,m,p,y,g,w,v,E=void 0!==(n=n||{})?n:{};E.ready=new Promise(function(e,t){o=e}),E.preRun=E.preRun||[],E.preRun.push(function(){if(E.folder&&E.folder.length)for(let e=0;e<E.folder.length;e++){let t=E.folder[e];eL.mkdir(t)}eL.mkdir("/tem"),eL.mkdir("/out");let e=E.input;for(let t=0;t<e.length;t++){let r=e[t];eL.writeFile("/"+r.name,new Uint8Array(r.file))}}),E.postRun=E.postRun||[],E.postRun.push(function(){let e=[],t=eL.readdir("/out");t.splice(0,2);for(let r=0;r<t.length;r++){let n=t[r],o=eL.readFile("/out/"+n);e.push({file:o,name:n})}E.output(e)});var b={};for(i in E)E.hasOwnProperty(i)&&(b[i]=E[i]);var _=[],k="./this.program",A=function(e,t){throw t},S=!0,M="function"==typeof importScripts,R="";M?R=self.location.href:document.currentScript&&(R=document.currentScript.src),r&&(R=r),R=0!==R.indexOf("blob:")?R.substr(0,R.lastIndexOf("/")+1):"",a=function(e){var t=new XMLHttpRequest;return t.open("GET",e,!1),t.send(null),t.responseText},M&&(s=function(e){var t=new XMLHttpRequest;return t.open("GET",e,!1),t.responseType="arraybuffer",t.send(null),new Uint8Array(t.response)});var T=E.print||console.log.bind(console),x=E.printErr||console.warn.bind(console);for(i in b)b.hasOwnProperty(i)&&(E[i]=b[i]);b=null,E.arguments&&(_=E.arguments),E.thisProgram&&(k=E.thisProgram),E.quit&&(A=E.quit),E.wasmBinary&&(u=E.wasmBinary),E.noExitRuntime&&(c=E.noExitRuntime),"object"!=typeof WebAssembly&&x("no native wasm support detected");var D=new WebAssembly.Table({initial:64,maximum:64,element:"anyfunc"}),C=!1;function F(e,t){e||ed("Assertion failed: "+t)}var P="undefined"!=typeof TextDecoder?new TextDecoder("utf8"):void 0;function I(e,t,r){for(var n=t+r,o=t;e[o]&&!(o>=n);)++o;if(o-t>16&&e.subarray&&P)return P.decode(e.subarray(t,o));for(var i="";t<o;){var a=e[t++];if(!(128&a)){i+=String.fromCharCode(a);continue}var s=63&e[t++];if((224&a)==192){i+=String.fromCharCode((31&a)<<6|s);continue}var u=63&e[t++];if((a=(240&a)==224?(15&a)<<12|s<<6|u:(7&a)<<18|s<<12|u<<6|63&e[t++])<65536)i+=String.fromCharCode(a);else{var c=a-65536;i+=String.fromCharCode(55296|c>>10,56320|1023&c)}}return i}function L(e,t){return e?I(h,e,t):""}function O(e,t,r,n){if(!(n>0))return 0;for(var o=r,i=r+n-1,a=0;a<e.length;++a){var s=e.charCodeAt(a);if(s>=55296&&s<=57343&&(s=65536+((1023&s)<<10)|1023&e.charCodeAt(++a)),s<=127){if(r>=i)break;t[r++]=s}else if(s<=2047){if(r+1>=i)break;t[r++]=192|s>>6,t[r++]=128|63&s}else if(s<=65535){if(r+2>=i)break;t[r++]=224|s>>12,t[r++]=128|s>>6&63,t[r++]=128|63&s}else{if(r+3>=i)break;t[r++]=240|s>>18,t[r++]=128|s>>12&63,t[r++]=128|s>>6&63,t[r++]=128|63&s}}return t[r]=0,r-o}function B(e,t,r){return O(e,h,t,r)}function j(e){for(var t=0,r=0;r<e.length;++r){var n=e.charCodeAt(r);n>=55296&&n<=57343&&(n=65536+((1023&n)<<10)|1023&e.charCodeAt(++r)),n<=127?++t:n<=2047?t+=2:n<=65535?t+=3:t+=4}return t}function N(e){var t=j(e)+1,r=ta(t);return O(e,d,r,t),r}function U(e,t,r){for(var n=0;n<e.length;++n)d[0|t++]=e.charCodeAt(n);r||(d[0|t]=0)}var z=65536;function W(e,t){return e%t>0&&(e+=t-e%t),e}function H(e){f=e,E.HEAP8=d=new Int8Array(e),E.HEAP16=m=new Int16Array(e),E.HEAP32=p=new Int32Array(e),E.HEAPU8=h=new Uint8Array(e),E.HEAPU16=new Uint16Array(e),E.HEAPU32=new Uint32Array(e),E.HEAPF32=new Float32Array(e),E.HEAPF64=new Float64Array(e)}var q=5282144,V=39104,G=E.INITIAL_MEMORY||0x1000000;function K(e){for(;e.length>0;){var t=e.shift();if("function"==typeof t){t(E);continue}var r=t.func;"number"==typeof r?void 0===t.arg?E.dynCall_v(r):E.dynCall_vi(r,t.arg):r(void 0===t.arg?null:t.arg)}}(l=E.wasmMemory?E.wasmMemory:new WebAssembly.Memory({initial:G/z,maximum:0x80000000/z}))&&(f=l.buffer),G=f.byteLength,H(f),p[V>>2]=q;var $=[],X=[],Y=[],Z=[];function J(){if(E.preRun)for("function"==typeof E.preRun&&(E.preRun=[E.preRun]);E.preRun.length;)er(E.preRun.shift());K($)}function Q(){E.noFSInit||eL.init.initialized||eL.init(),K(X)}function ee(){eL.ignorePermissions=!1,K(Y)}function et(){if(E.postRun)for("function"==typeof E.postRun&&(E.postRun=[E.postRun]);E.postRun.length;)en(E.postRun.shift());K(Z)}function er(e){$.unshift(e)}function en(e){Z.unshift(e)}var eo=Math.abs,ei=Math.ceil,ea=Math.floor,es=Math.min,eu=0,ec=null;function el(e){eu++,E.monitorRunDependencies&&E.monitorRunDependencies(eu)}function ef(e){if(eu--,E.monitorRunDependencies&&E.monitorRunDependencies(eu),0==eu&&ec){var t=ec;ec=null,t()}}function ed(e){throw E.onAbort&&E.onAbort(e),T(e+=""),x(e),C=!0,e="abort("+e+"). Build with -s ASSERTIONS=1 for more info.",new WebAssembly.RuntimeError(e)}function eh(e,t){return String.prototype.startsWith?e.startsWith(t):0===e.indexOf(t)}E.preloadedImages={},E.preloadedAudios={};var em="data:application/octet-stream;base64,";function ep(e){return eh(e,em)}var ey="file://";function eg(e){return eh(e,ey)}var ew=e;function ev(){try{if(u)return new Uint8Array(u);if(s)return s(ew);throw"both async and sync fetching of the wasm failed"}catch(e){ed(e)}}function eE(){return!u&&(S||M)&&"function"==typeof fetch&&!eg(ew)?fetch(ew,{credentials:"same-origin"}).then(function(e){if(!e.ok)throw"failed to load wasm binary file at '"+ew+"'";return e.arrayBuffer()}).catch(function(){return ev()}):new Promise(function(e,t){e(ev())})}function eb(){var e={a:tr};function t(e,t){E.asm=e.exports,ef()}function r(e){t(e.instance)}function n(t){return eE().then(function(t){return WebAssembly.instantiate(t,e)}).then(t,function(e){x("failed to asynchronously prepare wasm: "+e),ed(e)})}function o(){if(u||"function"!=typeof WebAssembly.instantiateStreaming||ep(ew)||eg(ew)||"function"!=typeof fetch)return n(r);fetch(ew,{credentials:"same-origin"}).then(function(t){return WebAssembly.instantiateStreaming(t,e).then(r,function(e){return x("wasm streaming compile failed: "+e),x("falling back to ArrayBuffer instantiation"),n(r)})})}if(el(),E.instantiateWasm)try{return E.instantiateWasm(e,t)}catch(e){return x("Module.instantiateWasm callback failed with error: "+e),!1}return o(),{}}function e_(e){return e}function ek(e){var t=/\b_Z[\w\d_]+/g;return e.replace(t,function(e){var t=e_(e);return e===t?e:t+" ["+e+"]"})}function eA(){var e=Error();if(!e.stack){try{throw Error()}catch(t){e=t}if(!e.stack)return"(no stack trace available)"}return e.stack.toString()}function eS(){var e=eA();return E.extraStackTrace&&(e+="\n"+E.extraStackTrace()),ek(e)}function eM(e,t,r,n){ed("Assertion failed: "+L(e)+", at: "+[t?L(t):"unknown filename",r,n?L(n):"unknown function"])}X.push({func:function(){tn()}}),w="undefined"!=typeof dateNow?dateNow:function(){return performance.now()};var eR=!0;function eT(e){return p[ti()>>2]=e,e}function ex(e,t){var r;if(0===e)r=Date.now();else{if(1!==e&&4!==e||!eR)return eT(28),-1;r=w()}return p[t>>2]=r/1e3|0,p[t+4>>2]=r%1e3*1e6|0,0}function eD(e,t){return ex(e,t)}var eC={splitPath:function(e){return/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/.exec(e).slice(1)},normalizeArray:function(e,t){for(var r=0,n=e.length-1;n>=0;n--){var o=e[n];"."===o?e.splice(n,1):".."===o?(e.splice(n,1),r++):r&&(e.splice(n,1),r--)}if(t)for(;r;r--)e.unshift("..");return e},normalize:function(e){var t="/"===e.charAt(0),r="/"===e.substr(-1);return(e=eC.normalizeArray(e.split("/").filter(function(e){return!!e}),!t).join("/"))||t||(e="."),e&&r&&(e+="/"),(t?"/":"")+e},dirname:function(e){var t=eC.splitPath(e),r=t[0],n=t[1];return r||n?(n&&(n=n.substr(0,n.length-1)),r+n):"."},basename:function(e){if("/"===e)return"/";var t=e.lastIndexOf("/");return -1===t?e:e.substr(t+1)},extname:function(e){return eC.splitPath(e)[3]},join:function(){var e=Array.prototype.slice.call(arguments,0);return eC.normalize(e.join("/"))},join2:function(e,t){return eC.normalize(e+"/"+t)}},eF={resolve:function(){for(var e="",t=!1,r=arguments.length-1;r>=-1&&!t;r--){var n=r>=0?arguments[r]:eL.cwd();if("string"!=typeof n)throw TypeError("Arguments to path.resolve must be strings");if(!n)return"";e=n+"/"+e,t="/"===n.charAt(0)}return e=eC.normalizeArray(e.split("/").filter(function(e){return!!e}),!t).join("/"),(t?"/":"")+e||"."},relative:function(e,t){function r(e){for(var t=0;t<e.length&&""===e[t];t++);for(var r=e.length-1;r>=0&&""===e[r];r--);return t>r?[]:e.slice(t,r-t+1)}e=eF.resolve(e).substr(1),t=eF.resolve(t).substr(1);for(var n=r(e.split("/")),o=r(t.split("/")),i=Math.min(n.length,o.length),a=i,s=0;s<i;s++)if(n[s]!==o[s]){a=s;break}for(var u=[],s=a;s<n.length;s++)u.push("..");return(u=u.concat(o.slice(a))).join("/")}},eP={ttys:[],init:function(){},shutdown:function(){},register:function(e,t){eP.ttys[e]={input:[],output:[],ops:t},eL.registerDevice(e,eP.stream_ops)},stream_ops:{open:function(e){var t=eP.ttys[e.node.rdev];if(!t)throw new eL.ErrnoError(43);e.tty=t,e.seekable=!1},close:function(e){e.tty.ops.flush(e.tty)},flush:function(e){e.tty.ops.flush(e.tty)},read:function(e,t,r,n,o){if(!e.tty||!e.tty.ops.get_char)throw new eL.ErrnoError(60);for(var i,a=0,s=0;s<n;s++){try{i=e.tty.ops.get_char(e.tty)}catch(e){throw new eL.ErrnoError(29)}if(void 0===i&&0===a)throw new eL.ErrnoError(6);if(null==i)break;a++,t[r+s]=i}return a&&(e.node.timestamp=Date.now()),a},write:function(e,t,r,n,o){if(!e.tty||!e.tty.ops.put_char)throw new eL.ErrnoError(60);try{for(var i=0;i<n;i++)e.tty.ops.put_char(e.tty,t[r+i])}catch(e){throw new eL.ErrnoError(29)}return n&&(e.node.timestamp=Date.now()),i}},default_tty_ops:{get_char:function(e){if(!e.input.length){var t=null;if("function"==typeof window.prompt?null!==(t=window.prompt("Input: "))&&(t+="\n"):"function"==typeof readline&&null!==(t=readline())&&(t+="\n"),!t)return null;e.input=tt(t,!0)}return e.input.shift()},put_char:function(e,t){null===t||10===t?(T(I(e.output,0)),e.output=[]):0!=t&&e.output.push(t)},flush:function(e){e.output&&e.output.length>0&&(T(I(e.output,0)),e.output=[])}},default_tty1_ops:{put_char:function(e,t){null===t||10===t?(x(I(e.output,0)),e.output=[]):0!=t&&e.output.push(t)},flush:function(e){e.output&&e.output.length>0&&(x(I(e.output,0)),e.output=[])}}},eI={ops_table:null,mount:function(e){return eI.createNode(null,"/",16895,0)},createNode:function(e,t,r,n){if(eL.isBlkdev(r)||eL.isFIFO(r))throw new eL.ErrnoError(63);eI.ops_table||(eI.ops_table={dir:{node:{getattr:eI.node_ops.getattr,setattr:eI.node_ops.setattr,lookup:eI.node_ops.lookup,mknod:eI.node_ops.mknod,rename:eI.node_ops.rename,unlink:eI.node_ops.unlink,rmdir:eI.node_ops.rmdir,readdir:eI.node_ops.readdir,symlink:eI.node_ops.symlink},stream:{llseek:eI.stream_ops.llseek}},file:{node:{getattr:eI.node_ops.getattr,setattr:eI.node_ops.setattr},stream:{llseek:eI.stream_ops.llseek,read:eI.stream_ops.read,write:eI.stream_ops.write,allocate:eI.stream_ops.allocate,mmap:eI.stream_ops.mmap,msync:eI.stream_ops.msync}},link:{node:{getattr:eI.node_ops.getattr,setattr:eI.node_ops.setattr,readlink:eI.node_ops.readlink},stream:{}},chrdev:{node:{getattr:eI.node_ops.getattr,setattr:eI.node_ops.setattr},stream:eL.chrdev_stream_ops}});var o=eL.createNode(e,t,r,n);return eL.isDir(o.mode)?(o.node_ops=eI.ops_table.dir.node,o.stream_ops=eI.ops_table.dir.stream,o.contents={}):eL.isFile(o.mode)?(o.node_ops=eI.ops_table.file.node,o.stream_ops=eI.ops_table.file.stream,o.usedBytes=0,o.contents=null):eL.isLink(o.mode)?(o.node_ops=eI.ops_table.link.node,o.stream_ops=eI.ops_table.link.stream):eL.isChrdev(o.mode)&&(o.node_ops=eI.ops_table.chrdev.node,o.stream_ops=eI.ops_table.chrdev.stream),o.timestamp=Date.now(),e&&(e.contents[t]=o),o},getFileDataAsRegularArray:function(e){if(e.contents&&e.contents.subarray){for(var t=[],r=0;r<e.usedBytes;++r)t.push(e.contents[r]);return t}return e.contents},getFileDataAsTypedArray:function(e){return e.contents?e.contents.subarray?e.contents.subarray(0,e.usedBytes):new Uint8Array(e.contents):new Uint8Array(0)},expandFileStorage:function(e,t){var r=e.contents?e.contents.length:0;if(!(r>=t)){var n=1048576;t=Math.max(t,r*(r<n?2:1.125)>>>0),0!=r&&(t=Math.max(t,256));var o=e.contents;e.contents=new Uint8Array(t),e.usedBytes>0&&e.contents.set(o.subarray(0,e.usedBytes),0)}},resizeFileStorage:function(e,t){if(e.usedBytes!=t){if(0==t){e.contents=null,e.usedBytes=0;return}if(!e.contents||e.contents.subarray){var r=e.contents;e.contents=new Uint8Array(t),r&&e.contents.set(r.subarray(0,Math.min(t,e.usedBytes))),e.usedBytes=t;return}if(e.contents||(e.contents=[]),e.contents.length>t)e.contents.length=t;else for(;e.contents.length<t;)e.contents.push(0);e.usedBytes=t}},node_ops:{getattr:function(e){var t={};return t.dev=eL.isChrdev(e.mode)?e.id:1,t.ino=e.id,t.mode=e.mode,t.nlink=1,t.uid=0,t.gid=0,t.rdev=e.rdev,eL.isDir(e.mode)?t.size=4096:eL.isFile(e.mode)?t.size=e.usedBytes:eL.isLink(e.mode)?t.size=e.link.length:t.size=0,t.atime=new Date(e.timestamp),t.mtime=new Date(e.timestamp),t.ctime=new Date(e.timestamp),t.blksize=4096,t.blocks=Math.ceil(t.size/t.blksize),t},setattr:function(e,t){void 0!==t.mode&&(e.mode=t.mode),void 0!==t.timestamp&&(e.timestamp=t.timestamp),void 0!==t.size&&eI.resizeFileStorage(e,t.size)},lookup:function(e,t){throw eL.genericErrors[44]},mknod:function(e,t,r,n){return eI.createNode(e,t,r,n)},rename:function(e,t,r){if(eL.isDir(e.mode)){var n;try{n=eL.lookupNode(t,r)}catch(e){}if(n)for(var o in n.contents)throw new eL.ErrnoError(55)}delete e.parent.contents[e.name],e.name=r,t.contents[r]=e,e.parent=t},unlink:function(e,t){delete e.contents[t]},rmdir:function(e,t){var r=eL.lookupNode(e,t);for(var n in r.contents)throw new eL.ErrnoError(55);delete e.contents[t]},readdir:function(e){var t=[".",".."];for(var r in e.contents)e.contents.hasOwnProperty(r)&&t.push(r);return t},symlink:function(e,t,r){var n=eI.createNode(e,t,41471,0);return n.link=r,n},readlink:function(e){if(!eL.isLink(e.mode))throw new eL.ErrnoError(28);return e.link}},stream_ops:{read:function(e,t,r,n,o){var i=e.node.contents;if(o>=e.node.usedBytes)return 0;var a=Math.min(e.node.usedBytes-o,n);if(a>8&&i.subarray)t.set(i.subarray(o,o+a),r);else for(var s=0;s<a;s++)t[r+s]=i[o+s];return a},write:function(e,t,r,n,o,i){if(t.buffer===d.buffer&&(i=!1),!n)return 0;var a=e.node;if(a.timestamp=Date.now(),t.subarray&&(!a.contents||a.contents.subarray)){if(i)return a.contents=t.subarray(r,r+n),a.usedBytes=n,n;else if(0===a.usedBytes&&0===o)return a.contents=t.slice(r,r+n),a.usedBytes=n,n;else if(o+n<=a.usedBytes)return a.contents.set(t.subarray(r,r+n),o),n}if(eI.expandFileStorage(a,o+n),a.contents.subarray&&t.subarray)a.contents.set(t.subarray(r,r+n),o);else for(var s=0;s<n;s++)a.contents[o+s]=t[r+s];return a.usedBytes=Math.max(a.usedBytes,o+n),n},llseek:function(e,t,r){var n=t;if(1===r?n+=e.position:2===r&&eL.isFile(e.node.mode)&&(n+=e.node.usedBytes),n<0)throw new eL.ErrnoError(28);return n},allocate:function(e,t,r){eI.expandFileStorage(e.node,t+r),e.node.usedBytes=Math.max(e.node.usedBytes,t+r)},mmap:function(e,t,r,n,o,i){if(F(0===t),!eL.isFile(e.node.mode))throw new eL.ErrnoError(43);var a,s,u=e.node.contents;if(2&i||u.buffer!==f){if((n>0||n+r<u.length)&&(u=u.subarray?u.subarray(n,n+r):Array.prototype.slice.call(u,n,n+r)),s=!0,!(a=to(r)))throw new eL.ErrnoError(48);d.set(u,a)}else s=!1,a=u.byteOffset;return{ptr:a,allocated:s}},msync:function(e,t,r,n,o){if(!eL.isFile(e.node.mode))throw new eL.ErrnoError(43);return 2&o||eI.stream_ops.write(e,t,0,n,r,!1),0}}},eL=t||{root:null,mounts:[],devices:{},streams:[],nextInode:1,nameTable:null,currentPath:"/",initialized:!1,ignorePermissions:!0,trackingDelegate:{},tracking:{openFlags:{READ:1,WRITE:2}},ErrnoError:null,genericErrors:{},filesystems:null,syncFSRequests:0,handleFSError:function(e){if(!(e instanceof eL.ErrnoError))throw e+" : "+eS();return eT(e.errno)},lookupPath:function(e,t){if(e=eF.resolve(eL.cwd(),e),t=t||{},!e)return{path:"",node:null};var r={follow_mount:!0,recurse_count:0};for(var n in r)void 0===t[n]&&(t[n]=r[n]);if(t.recurse_count>8)throw new eL.ErrnoError(32);for(var o=eC.normalizeArray(e.split("/").filter(function(e){return!!e}),!1),i=eL.root,a="/",s=0;s<o.length;s++){var u=s===o.length-1;if(u&&t.parent)break;if(i=eL.lookupNode(i,o[s]),a=eC.join2(a,o[s]),eL.isMountpoint(i)&&(!u||u&&t.follow_mount)&&(i=i.mounted.root),!u||t.follow)for(var c=0;eL.isLink(i.mode);){var l=eL.readlink(a);if(a=eF.resolve(eC.dirname(a),l),i=eL.lookupPath(a,{recurse_count:t.recurse_count}).node,c++>40)throw new eL.ErrnoError(32)}}return{path:a,node:i}},getPath:function(e){for(var t;;){if(eL.isRoot(e)){var r=e.mount.mountpoint;if(!t)return r;return"/"!==r[r.length-1]?r+"/"+t:r+t}t=t?e.name+"/"+t:e.name,e=e.parent}},hashName:function(e,t){for(var r=0,n=0;n<t.length;n++)r=(r<<5)-r+t.charCodeAt(n)|0;return(e+r>>>0)%eL.nameTable.length},hashAddNode:function(e){var t=eL.hashName(e.parent.id,e.name);e.name_next=eL.nameTable[t],eL.nameTable[t]=e},hashRemoveNode:function(e){var t=eL.hashName(e.parent.id,e.name);if(eL.nameTable[t]===e)eL.nameTable[t]=e.name_next;else for(var r=eL.nameTable[t];r;){if(r.name_next===e){r.name_next=e.name_next;break}r=r.name_next}},lookupNode:function(e,t){var r=eL.mayLookup(e);if(r)throw new eL.ErrnoError(r,e);for(var n=eL.hashName(e.id,t),o=eL.nameTable[n];o;o=o.name_next){var i=o.name;if(o.parent.id===e.id&&i===t)return o}return eL.lookup(e,t)},createNode:function(e,t,r,n){var o=new eL.FSNode(e,t,r,n);return eL.hashAddNode(o),o},destroyNode:function(e){eL.hashRemoveNode(e)},isRoot:function(e){return e===e.parent},isMountpoint:function(e){return!!e.mounted},isFile:function(e){return(61440&e)==32768},isDir:function(e){return(61440&e)==16384},isLink:function(e){return(61440&e)==40960},isChrdev:function(e){return(61440&e)==8192},isBlkdev:function(e){return(61440&e)==24576},isFIFO:function(e){return(61440&e)==4096},isSocket:function(e){return(49152&e)==49152},flagModes:{r:0,rs:1052672,"r+":2,w:577,wx:705,xw:705,"w+":578,"wx+":706,"xw+":706,a:1089,ax:1217,xa:1217,"a+":1090,"ax+":1218,"xa+":1218},modeStringToFlags:function(e){var t=eL.flagModes[e];if(void 0===t)throw Error("Unknown file open mode: "+e);return t},flagsToPermissionString:function(e){var t=["r","w","rw"][3&e];return 512&e&&(t+="w"),t},nodePermissions:function(e,t){return eL.ignorePermissions?0:2*(-1!==t.indexOf("r")&&!(292&e.mode)||-1!==t.indexOf("w")&&!(146&e.mode)||-1!==t.indexOf("x")&&!(73&e.mode))},mayLookup:function(e){var t=eL.nodePermissions(e,"x");return t||2*!e.node_ops.lookup},mayCreate:function(e,t){try{return eL.lookupNode(e,t),20}catch(e){}return eL.nodePermissions(e,"wx")},mayDelete:function(e,t,r){try{n=eL.lookupNode(e,t)}catch(e){return e.errno}var n,o=eL.nodePermissions(e,"wx");if(o)return o;if(r){if(!eL.isDir(n.mode))return 54;if(eL.isRoot(n)||eL.getPath(n)===eL.cwd())return 10}else if(eL.isDir(n.mode))return 31;return 0},mayOpen:function(e,t){return e?eL.isLink(e.mode)?32:eL.isDir(e.mode)&&("r"!==eL.flagsToPermissionString(t)||512&t)?31:eL.nodePermissions(e,eL.flagsToPermissionString(t)):44},MAX_OPEN_FDS:4096,nextfd:function(e,t){e=e||0,t=t||eL.MAX_OPEN_FDS;for(var r=e;r<=t;r++)if(!eL.streams[r])return r;throw new eL.ErrnoError(33)},getStream:function(e){return eL.streams[e]},createStream:function(e,t,r){eL.FSStream||(eL.FSStream=function(){},eL.FSStream.prototype={object:{get:function(){return this.node},set:function(e){this.node=e}},isRead:{get:function(){return(2097155&this.flags)!=1}},isWrite:{get:function(){return(2097155&this.flags)!=0}},isAppend:{get:function(){return 1024&this.flags}}});var n=new eL.FSStream;for(var o in e)n[o]=e[o];e=n;var i=eL.nextfd(t,r);return e.fd=i,eL.streams[i]=e,e},closeStream:function(e){eL.streams[e]=null},chrdev_stream_ops:{open:function(e){var t=eL.getDevice(e.node.rdev);e.stream_ops=t.stream_ops,e.stream_ops.open&&e.stream_ops.open(e)},llseek:function(){throw new eL.ErrnoError(70)}},major:function(e){return e>>8},minor:function(e){return 255&e},makedev:function(e,t){return e<<8|t},registerDevice:function(e,t){eL.devices[e]={stream_ops:t}},getDevice:function(e){return eL.devices[e]},getMounts:function(e){for(var t=[],r=[e];r.length;){var n=r.pop();t.push(n),r.push.apply(r,n.mounts)}return t},syncfs:function(e,t){"function"==typeof e&&(t=e,e=!1),eL.syncFSRequests++,eL.syncFSRequests>1&&x("warning: "+eL.syncFSRequests+" FS.syncfs operations in flight at once, probably just doing extra work");var r=eL.getMounts(eL.root.mount),n=0;function o(e){return eL.syncFSRequests--,t(e)}function i(e){if(e)return i.errored?void 0:(i.errored=!0,o(e));++n>=r.length&&o(null)}r.forEach(function(t){if(!t.type.syncfs)return i(null);t.type.syncfs(t,e,i)})},mount:function(e,t,r){var n,o="/"===r,i=!r;if(o&&eL.root)throw new eL.ErrnoError(10);if(!o&&!i){var a=eL.lookupPath(r,{follow_mount:!1});if(r=a.path,n=a.node,eL.isMountpoint(n))throw new eL.ErrnoError(10);if(!eL.isDir(n.mode))throw new eL.ErrnoError(54)}var s={type:e,opts:t,mountpoint:r,mounts:[]},u=e.mount(s);return u.mount=s,s.root=u,o?eL.root=u:n&&(n.mounted=s,n.mount&&n.mount.mounts.push(s)),u},unmount:function(e){var t=eL.lookupPath(e,{follow_mount:!1});if(!eL.isMountpoint(t.node))throw new eL.ErrnoError(28);var r=t.node,n=r.mounted,o=eL.getMounts(n);Object.keys(eL.nameTable).forEach(function(e){for(var t=eL.nameTable[e];t;){var r=t.name_next;-1!==o.indexOf(t.mount)&&eL.destroyNode(t),t=r}}),r.mounted=null;var i=r.mount.mounts.indexOf(n);r.mount.mounts.splice(i,1)},lookup:function(e,t){return e.node_ops.lookup(e,t)},mknod:function(e,t,r){var n=eL.lookupPath(e,{parent:!0}).node,o=eC.basename(e);if(!o||"."===o||".."===o)throw new eL.ErrnoError(28);var i=eL.mayCreate(n,o);if(i)throw new eL.ErrnoError(i);if(!n.node_ops.mknod)throw new eL.ErrnoError(63);return n.node_ops.mknod(n,o,t,r)},create:function(e,t){return t=(void 0!==t?t:438)&4095|32768,eL.mknod(e,t,0)},mkdir:function(e,t){return t=(void 0!==t?t:511)&1023|16384,eL.mknod(e,t,0)},mkdirTree:function(e,t){for(var r=e.split("/"),n="",o=0;o<r.length;++o)if(r[o]){n+="/"+r[o];try{eL.mkdir(n,t)}catch(e){if(20!=e.errno)throw e}}},mkdev:function(e,t,r){return void 0===r&&(r=t,t=438),t|=8192,eL.mknod(e,t,r)},symlink:function(e,t){if(!eF.resolve(e))throw new eL.ErrnoError(44);var r=eL.lookupPath(t,{parent:!0}).node;if(!r)throw new eL.ErrnoError(44);var n=eC.basename(t),o=eL.mayCreate(r,n);if(o)throw new eL.ErrnoError(o);if(!r.node_ops.symlink)throw new eL.ErrnoError(63);return r.node_ops.symlink(r,n,e)},rename:function(e,t){var r,n,o,i,a=eC.dirname(e),s=eC.dirname(t),u=eC.basename(e),c=eC.basename(t);try{n=(r=eL.lookupPath(e,{parent:!0})).node,o=(r=eL.lookupPath(t,{parent:!0})).node}catch(e){throw new eL.ErrnoError(10)}if(!n||!o)throw new eL.ErrnoError(44);if(n.mount!==o.mount)throw new eL.ErrnoError(75);var l=eL.lookupNode(n,u),f=eF.relative(e,s);if("."!==f.charAt(0))throw new eL.ErrnoError(28);if("."!==(f=eF.relative(t,a)).charAt(0))throw new eL.ErrnoError(55);try{i=eL.lookupNode(o,c)}catch(e){}if(l!==i){var d=eL.isDir(l.mode),h=eL.mayDelete(n,u,d);if(h||(h=i?eL.mayDelete(o,c,d):eL.mayCreate(o,c)))throw new eL.ErrnoError(h);if(!n.node_ops.rename)throw new eL.ErrnoError(63);if(eL.isMountpoint(l)||i&&eL.isMountpoint(i))throw new eL.ErrnoError(10);if(o!==n&&(h=eL.nodePermissions(n,"w")))throw new eL.ErrnoError(h);try{eL.trackingDelegate.willMovePath}catch(r){x("FS.trackingDelegate['willMovePath']('"+e+"', '"+t+"') threw an exception: "+r.message)}eL.hashRemoveNode(l);try{n.node_ops.rename(l,o,c)}catch(e){throw e}finally{eL.hashAddNode(l)}try{eL.trackingDelegate.onMovePath}catch(r){x("FS.trackingDelegate['onMovePath']('"+e+"', '"+t+"') threw an exception: "+r.message)}}},rmdir:function(e){var t=eL.lookupPath(e,{parent:!0}).node,r=eC.basename(e),n=eL.lookupNode(t,r),o=eL.mayDelete(t,r,!0);if(o)throw new eL.ErrnoError(o);if(!t.node_ops.rmdir)throw new eL.ErrnoError(63);if(eL.isMountpoint(n))throw new eL.ErrnoError(10);try{eL.trackingDelegate.willDeletePath}catch(t){x("FS.trackingDelegate['willDeletePath']('"+e+"') threw an exception: "+t.message)}t.node_ops.rmdir(t,r),eL.destroyNode(n);try{eL.trackingDelegate.onDeletePath}catch(t){x("FS.trackingDelegate['onDeletePath']('"+e+"') threw an exception: "+t.message)}},readdir:function(e){var t=eL.lookupPath(e,{follow:!0}).node;if(!t.node_ops.readdir)throw new eL.ErrnoError(54);return t.node_ops.readdir(t)},unlink:function(e){var t=eL.lookupPath(e,{parent:!0}).node,r=eC.basename(e),n=eL.lookupNode(t,r),o=eL.mayDelete(t,r,!1);if(o)throw new eL.ErrnoError(o);if(!t.node_ops.unlink)throw new eL.ErrnoError(63);if(eL.isMountpoint(n))throw new eL.ErrnoError(10);try{eL.trackingDelegate.willDeletePath}catch(t){x("FS.trackingDelegate['willDeletePath']('"+e+"') threw an exception: "+t.message)}t.node_ops.unlink(t,r),eL.destroyNode(n);try{eL.trackingDelegate.onDeletePath}catch(t){x("FS.trackingDelegate['onDeletePath']('"+e+"') threw an exception: "+t.message)}},readlink:function(e){var t=eL.lookupPath(e).node;if(!t)throw new eL.ErrnoError(44);if(!t.node_ops.readlink)throw new eL.ErrnoError(28);return eF.resolve(eL.getPath(t.parent),t.node_ops.readlink(t))},stat:function(e,t){var r=eL.lookupPath(e,{follow:!t}).node;if(!r)throw new eL.ErrnoError(44);if(!r.node_ops.getattr)throw new eL.ErrnoError(63);return r.node_ops.getattr(r)},lstat:function(e){return eL.stat(e,!0)},chmod:function(e,t,r){var n;if(!(n="string"==typeof e?eL.lookupPath(e,{follow:!r}).node:e).node_ops.setattr)throw new eL.ErrnoError(63);n.node_ops.setattr(n,{mode:4095&t|-4096&n.mode,timestamp:Date.now()})},lchmod:function(e,t){eL.chmod(e,t,!0)},fchmod:function(e,t){var r=eL.getStream(e);if(!r)throw new eL.ErrnoError(8);eL.chmod(r.node,t)},chown:function(e,t,r,n){var o;if(!(o="string"==typeof e?eL.lookupPath(e,{follow:!n}).node:e).node_ops.setattr)throw new eL.ErrnoError(63);o.node_ops.setattr(o,{timestamp:Date.now()})},lchown:function(e,t,r){eL.chown(e,t,r,!0)},fchown:function(e,t,r){var n=eL.getStream(e);if(!n)throw new eL.ErrnoError(8);eL.chown(n.node,t,r)},truncate:function(e,t){if(t<0)throw new eL.ErrnoError(28);if("string"==typeof e){var r;r=eL.lookupPath(e,{follow:!0}).node}else r=e;if(!r.node_ops.setattr)throw new eL.ErrnoError(63);if(eL.isDir(r.mode))throw new eL.ErrnoError(31);if(!eL.isFile(r.mode))throw new eL.ErrnoError(28);var n=eL.nodePermissions(r,"w");if(n)throw new eL.ErrnoError(n);r.node_ops.setattr(r,{size:t,timestamp:Date.now()})},ftruncate:function(e,t){var r=eL.getStream(e);if(!r)throw new eL.ErrnoError(8);if((2097155&r.flags)==0)throw new eL.ErrnoError(28);eL.truncate(r.node,t)},utime:function(e,t,r){var n=eL.lookupPath(e,{follow:!0}).node;n.node_ops.setattr(n,{timestamp:Math.max(t,r)})},open:function(e,t,r,n,o){if(""===e)throw new eL.ErrnoError(44);if(t="string"==typeof t?eL.modeStringToFlags(t):t,r=void 0===r?438:r,r=64&t?4095&r|32768:0,"object"==typeof e)i=e;else{e=eC.normalize(e);try{var i;i=eL.lookupPath(e,{follow:!(131072&t)}).node}catch(e){}}var a=!1;if(64&t)if(i){if(128&t)throw new eL.ErrnoError(20)}else i=eL.mknod(e,r,0),a=!0;if(!i)throw new eL.ErrnoError(44);if(eL.isChrdev(i.mode)&&(t&=-513),65536&t&&!eL.isDir(i.mode))throw new eL.ErrnoError(54);if(!a){var s=eL.mayOpen(i,t);if(s)throw new eL.ErrnoError(s)}512&t&&eL.truncate(i,0),t&=-131713;var u=eL.createStream({node:i,path:eL.getPath(i),flags:t,seekable:!0,position:0,stream_ops:i.stream_ops,ungotten:[],error:!1},n,o);u.stream_ops.open&&u.stream_ops.open(u),E.logReadFiles&&!(1&t)&&(eL.readFiles||(eL.readFiles={}),e in eL.readFiles||(eL.readFiles[e]=1,x("FS.trackingDelegate error on read file: "+e)));try{eL.trackingDelegate.onOpenFile}catch(t){x("FS.trackingDelegate['onOpenFile']('"+e+"', flags) threw an exception: "+t.message)}return u},close:function(e){if(eL.isClosed(e))throw new eL.ErrnoError(8);e.getdents&&(e.getdents=null);try{e.stream_ops.close&&e.stream_ops.close(e)}catch(e){throw e}finally{eL.closeStream(e.fd)}e.fd=null},isClosed:function(e){return null===e.fd},llseek:function(e,t,r){if(eL.isClosed(e))throw new eL.ErrnoError(8);if(!e.seekable||!e.stream_ops.llseek)throw new eL.ErrnoError(70);if(0!=r&&1!=r&&2!=r)throw new eL.ErrnoError(28);return e.position=e.stream_ops.llseek(e,t,r),e.ungotten=[],e.position},read:function(e,t,r,n,o){if(n<0||o<0)throw new eL.ErrnoError(28);if(eL.isClosed(e)||(2097155&e.flags)==1)throw new eL.ErrnoError(8);if(eL.isDir(e.node.mode))throw new eL.ErrnoError(31);if(!e.stream_ops.read)throw new eL.ErrnoError(28);var i=void 0!==o;if(i){if(!e.seekable)throw new eL.ErrnoError(70)}else o=e.position;var a=e.stream_ops.read(e,t,r,n,o);return i||(e.position+=a),a},write:function(e,t,r,n,o,i){if(n<0||o<0)throw new eL.ErrnoError(28);if(eL.isClosed(e)||(2097155&e.flags)==0)throw new eL.ErrnoError(8);if(eL.isDir(e.node.mode))throw new eL.ErrnoError(31);if(!e.stream_ops.write)throw new eL.ErrnoError(28);e.seekable&&1024&e.flags&&eL.llseek(e,0,2);var a=void 0!==o;if(a){if(!e.seekable)throw new eL.ErrnoError(70)}else o=e.position;var s=e.stream_ops.write(e,t,r,n,o,i);a||(e.position+=s);try{e.path&&eL.trackingDelegate.onWriteToFile&&eL.trackingDelegate.onWriteToFile(e.path)}catch(t){x("FS.trackingDelegate['onWriteToFile']('"+e.path+"') threw an exception: "+t.message)}return s},allocate:function(e,t,r){if(eL.isClosed(e))throw new eL.ErrnoError(8);if(t<0||r<=0)throw new eL.ErrnoError(28);if((2097155&e.flags)==0)throw new eL.ErrnoError(8);if(!eL.isFile(e.node.mode)&&!eL.isDir(e.node.mode))throw new eL.ErrnoError(43);if(!e.stream_ops.allocate)throw new eL.ErrnoError(138);e.stream_ops.allocate(e,t,r)},mmap:function(e,t,r,n,o,i){if((2&o)!=0&&(2&i)==0&&(2097155&e.flags)!=2||(2097155&e.flags)==1)throw new eL.ErrnoError(2);if(!e.stream_ops.mmap)throw new eL.ErrnoError(43);return e.stream_ops.mmap(e,t,r,n,o,i)},msync:function(e,t,r,n,o){return e&&e.stream_ops.msync?e.stream_ops.msync(e,t,r,n,o):0},munmap:function(e){return 0},ioctl:function(e,t,r){if(!e.stream_ops.ioctl)throw new eL.ErrnoError(59);return e.stream_ops.ioctl(e,t,r)},readFile:function(e,t){if((t=t||{}).flags=t.flags||"r",t.encoding=t.encoding||"binary","utf8"!==t.encoding&&"binary"!==t.encoding)throw Error('Invalid encoding type "'+t.encoding+'"');var r,n=eL.open(e,t.flags),o=eL.stat(e).size,i=new Uint8Array(o);return eL.read(n,i,0,o,0),"utf8"===t.encoding?r=I(i,0):"binary"===t.encoding&&(r=i),eL.close(n),r},writeFile:function(e,t,r){(r=r||{}).flags=r.flags||"w";var n=eL.open(e,r.flags,r.mode);if("string"==typeof t){var o=new Uint8Array(j(t)+1),i=O(t,o,0,o.length);eL.write(n,o,0,i,void 0,r.canOwn)}else if(ArrayBuffer.isView(t))eL.write(n,t,0,t.byteLength,void 0,r.canOwn);else throw Error("Unsupported data type");eL.close(n)},cwd:function(){return eL.currentPath},chdir:function(e){var t=eL.lookupPath(e,{follow:!0});if(null===t.node)throw new eL.ErrnoError(44);if(!eL.isDir(t.node.mode))throw new eL.ErrnoError(54);var r=eL.nodePermissions(t.node,"x");if(r)throw new eL.ErrnoError(r);eL.currentPath=t.path},createDefaultDirectories:function(){eL.mkdir("/tmp"),eL.mkdir("/home"),eL.mkdir("/home/web_user")},createDefaultDevices:function(){if(eL.mkdir("/dev"),eL.registerDevice(eL.makedev(1,3),{read:function(){return 0},write:function(e,t,r,n,o){return n}}),eL.mkdev("/dev/null",eL.makedev(1,3)),eP.register(eL.makedev(5,0),eP.default_tty_ops),eP.register(eL.makedev(6,0),eP.default_tty1_ops),eL.mkdev("/dev/tty",eL.makedev(5,0)),eL.mkdev("/dev/tty1",eL.makedev(6,0)),"object"==typeof crypto&&"function"==typeof crypto.getRandomValues){var e,t=new Uint8Array(1);e=function(){return crypto.getRandomValues(t),t[0]}}e||(e=function(){ed("random_device")}),eL.createDevice("/dev","random",e),eL.createDevice("/dev","urandom",e),eL.mkdir("/dev/shm"),eL.mkdir("/dev/shm/tmp")},createSpecialDirectories:function(){eL.mkdir("/proc"),eL.mkdir("/proc/self"),eL.mkdir("/proc/self/fd"),eL.mount({mount:function(){var e=eL.createNode("/proc/self","fd",16895,73);return e.node_ops={lookup:function(e,t){var r=+t,n=eL.getStream(r);if(!n)throw new eL.ErrnoError(8);var o={parent:null,mount:{mountpoint:"fake"},node_ops:{readlink:function(){return n.path}}};return o.parent=o,o}},e}},{},"/proc/self/fd")},createStandardStreams:function(){E.stdin?eL.createDevice("/dev","stdin",E.stdin):eL.symlink("/dev/tty","/dev/stdin"),E.stdout?eL.createDevice("/dev","stdout",null,E.stdout):eL.symlink("/dev/tty","/dev/stdout"),E.stderr?eL.createDevice("/dev","stderr",null,E.stderr):eL.symlink("/dev/tty1","/dev/stderr"),eL.open("/dev/stdin","r"),eL.open("/dev/stdout","w"),eL.open("/dev/stderr","w")},ensureErrnoError:function(){eL.ErrnoError||(eL.ErrnoError=function(e,t){this.node=t,this.setErrno=function(e){this.errno=e},this.setErrno(e),this.message="FS error"},eL.ErrnoError.prototype=Error(),eL.ErrnoError.prototype.constructor=eL.ErrnoError,[44].forEach(function(e){eL.genericErrors[e]=new eL.ErrnoError(e),eL.genericErrors[e].stack="<generic error, no stack>"}))},staticInit:function(){eL.ensureErrnoError(),eL.nameTable=Array(4096),eL.mount(eI,{},"/"),eL.createDefaultDirectories(),eL.createDefaultDevices(),eL.createSpecialDirectories(),eL.filesystems={MEMFS:eI}},init:function(e,t,r){eL.init.initialized=!0,eL.ensureErrnoError(),E.stdin=e||E.stdin,E.stdout=t||E.stdout,E.stderr=r||E.stderr,eL.createStandardStreams()},quit:function(){eL.init.initialized=!1;var e=E._fflush;e&&e(0);for(var t=0;t<eL.streams.length;t++){var r=eL.streams[t];r&&eL.close(r)}},getMode:function(e,t){var r=0;return e&&(r|=365),t&&(r|=146),r},joinPath:function(e,t){var r=eC.join.apply(null,e);return t&&"/"==r[0]&&(r=r.substr(1)),r},absolutePath:function(e,t){return eF.resolve(t,e)},standardizePath:function(e){return eC.normalize(e)},findObject:function(e,t){var r=eL.analyzePath(e,t);return r.exists?r.object:(eT(r.error),null)},analyzePath:function(e,t){try{var r=eL.lookupPath(e,{follow:!t});e=r.path}catch(e){}var n={isRoot:!1,exists:!1,error:0,name:null,path:null,object:null,parentExists:!1,parentPath:null,parentObject:null};try{var r=eL.lookupPath(e,{parent:!0});n.parentExists=!0,n.parentPath=r.path,n.parentObject=r.node,n.name=eC.basename(e),r=eL.lookupPath(e,{follow:!t}),n.exists=!0,n.path=r.path,n.object=r.node,n.name=r.node.name,n.isRoot="/"===r.path}catch(e){n.error=e.errno}return n},createFolder:function(e,t,r,n){var o=eC.join2("string"==typeof e?e:eL.getPath(e),t),i=eL.getMode(r,n);return eL.mkdir(o,i)},createPath:function(e,t,r,n){e="string"==typeof e?e:eL.getPath(e);for(var o=t.split("/").reverse();o.length;){var i=o.pop();if(i){var a=eC.join2(e,i);try{eL.mkdir(a)}catch(e){}e=a}}return a},createFile:function(e,t,r,n,o){var i=eC.join2("string"==typeof e?e:eL.getPath(e),t),a=eL.getMode(n,o);return eL.create(i,a)},createDataFile:function(e,t,r,n,o,i){var a=t?eC.join2("string"==typeof e?e:eL.getPath(e),t):e,s=eL.getMode(n,o),u=eL.create(a,s);if(r){if("string"==typeof r){for(var c=Array(r.length),l=0,f=r.length;l<f;++l)c[l]=r.charCodeAt(l);r=c}eL.chmod(u,146|s);var d=eL.open(u,"w");eL.write(d,r,0,r.length,0,i),eL.close(d),eL.chmod(u,s)}return u},createDevice:function(e,t,r,n){var o=eC.join2("string"==typeof e?e:eL.getPath(e),t),i=eL.getMode(!!r,!!n);eL.createDevice.major||(eL.createDevice.major=64);var a=eL.makedev(eL.createDevice.major++,0);return eL.registerDevice(a,{open:function(e){e.seekable=!1},close:function(e){n&&n.buffer&&n.buffer.length&&n(10)},read:function(e,t,n,o,i){for(var a,s=0,u=0;u<o;u++){try{a=r()}catch(e){throw new eL.ErrnoError(29)}if(void 0===a&&0===s)throw new eL.ErrnoError(6);if(null==a)break;s++,t[n+u]=a}return s&&(e.node.timestamp=Date.now()),s},write:function(e,t,r,o,i){for(var a=0;a<o;a++)try{n(t[r+a])}catch(e){throw new eL.ErrnoError(29)}return o&&(e.node.timestamp=Date.now()),a}}),eL.mkdev(o,i,a)},createLink:function(e,t,r,n,o){var i=eC.join2("string"==typeof e?e:eL.getPath(e),t);return eL.symlink(r,i)},forceLoadFile:function(e){if(e.isDevice||e.isFolder||e.link||e.contents)return!0;var t=!0;if("undefined"!=typeof XMLHttpRequest)throw Error("Lazy loading should have been performed (contents set) in createLazyFile, but it was not. Lazy loading only works in web workers. Use --embed-file or --preload-file in emcc on the main thread.");if(a)try{e.contents=tt(a(e.url),!0),e.usedBytes=e.contents.length}catch(e){t=!1}else throw Error("Cannot load without read() or XMLHttpRequest.");return t||eT(29),t},createLazyFile:function(e,t,r,n,o){function i(){this.lengthKnown=!1,this.chunks=[]}if(i.prototype.get=function(e){if(!(e>this.length-1)&&!(e<0)){var t=e%this.chunkSize,r=e/this.chunkSize|0;return this.getter(r)[t]}},i.prototype.setDataGetter=function(e){this.getter=e},i.prototype.cacheLength=function(){var e,t=new XMLHttpRequest;if(t.open("HEAD",r,!1),t.send(null),!(t.status>=200&&t.status<300||304===t.status))throw Error("Couldn't load "+r+". Status: "+t.status);var n=Number(t.getResponseHeader("Content-length")),o=(e=t.getResponseHeader("Accept-Ranges"))&&"bytes"===e,i=(e=t.getResponseHeader("Content-Encoding"))&&"gzip"===e,a=1048576;o||(a=n);var s=function(e,t){if(e>t)throw Error("invalid range ("+e+", "+t+") or no bytes requested!");if(t>n-1)throw Error("only "+n+" bytes available! programmer error!");var o=new XMLHttpRequest;if(o.open("GET",r,!1),n!==a&&o.setRequestHeader("Range","bytes="+e+"-"+t),"undefined"!=typeof Uint8Array&&(o.responseType="arraybuffer"),o.overrideMimeType&&o.overrideMimeType("text/plain; charset=x-user-defined"),o.send(null),!(o.status>=200&&o.status<300||304===o.status))throw Error("Couldn't load "+r+". Status: "+o.status);return void 0!==o.response?new Uint8Array(o.response||[]):tt(o.responseText||"",!0)},u=this;u.setDataGetter(function(e){var t=e*a,r=(e+1)*a-1;if(r=Math.min(r,n-1),void 0===u.chunks[e]&&(u.chunks[e]=s(t,r)),void 0===u.chunks[e])throw Error("doXHR failed!");return u.chunks[e]}),(i||!n)&&(a=n=1,a=n=this.getter(0).length,T("LazyFiles on gzip forces download of the whole file when length is accessed")),this._length=n,this._chunkSize=a,this.lengthKnown=!0},"undefined"!=typeof XMLHttpRequest){if(!M)throw"Cannot do synchronous binary XHRs outside webworkers in modern browsers. Use --embed-file or --preload-file in emcc";var a=new i;Object.defineProperties(a,{length:{get:function(){return this.lengthKnown||this.cacheLength(),this._length}},chunkSize:{get:function(){return this.lengthKnown||this.cacheLength(),this._chunkSize}}});var s={isDevice:!1,contents:a}}else var s={isDevice:!1,url:r};var u=eL.createFile(e,t,s,n,o);s.contents?u.contents=s.contents:s.url&&(u.contents=null,u.url=s.url),Object.defineProperties(u,{usedBytes:{get:function(){return this.contents.length}}});var c={};return Object.keys(u.stream_ops).forEach(function(e){var t=u.stream_ops[e];c[e]=function(){if(!eL.forceLoadFile(u))throw new eL.ErrnoError(29);return t.apply(null,arguments)}}),c.read=function(e,t,r,n,o){if(!eL.forceLoadFile(u))throw new eL.ErrnoError(29);var i=e.node.contents;if(o>=i.length)return 0;var a=Math.min(i.length-o,n);if(i.slice)for(var s=0;s<a;s++)t[r+s]=i[o+s];else for(var s=0;s<a;s++)t[r+s]=i.get(o+s);return a},u.stream_ops=c,u},createPreloadedFile:function(e,t,r,n,o,i,a,s,u,c){Browser.init();var l=t?eF.resolve(eC.join2(e,t)):e;function f(r){function f(r){c&&c(),s||eL.createDataFile(e,t,r,n,o,u),i&&i(),ef()}var d=!1;E.preloadPlugins.forEach(function(e){!d&&e.canHandle(l)&&(e.handle(r,l,f,function(){a&&a(),ef()}),d=!0)}),d||f(r)}el(),"string"==typeof r?Browser.asyncLoad(r,function(e){f(e)},a):f(r)},indexedDB:function(){return window.indexedDB||window.mozIndexedDB||window.webkitIndexedDB||window.msIndexedDB},DB_NAME:function(){return"EM_FS_"+window.location.pathname},DB_VERSION:20,DB_STORE_NAME:"FILE_DATA",saveFilesToDB:function(e,t,r){t=t||function(){},r=r||function(){};var n=eL.indexedDB();try{var o=n.open(eL.DB_NAME(),eL.DB_VERSION)}catch(e){return r(e)}o.onupgradeneeded=function(){T("creating db"),o.result.createObjectStore(eL.DB_STORE_NAME)},o.onsuccess=function(){var n=o.result.transaction([eL.DB_STORE_NAME],"readwrite"),i=n.objectStore(eL.DB_STORE_NAME),a=0,s=0,u=e.length;function c(){0==s?t():r()}e.forEach(function(e){var t=i.put(eL.analyzePath(e).object.contents,e);t.onsuccess=function(){++a+s==u&&c()},t.onerror=function(){s++,a+s==u&&c()}}),n.onerror=r},o.onerror=r},loadFilesFromDB:function(e,t,r){t=t||function(){},r=r||function(){};var n=eL.indexedDB();try{var o=n.open(eL.DB_NAME(),eL.DB_VERSION)}catch(e){return r(e)}o.onupgradeneeded=r,o.onsuccess=function(){var n=o.result;try{var i=n.transaction([eL.DB_STORE_NAME],"readonly")}catch(e){r(e);return}var a=i.objectStore(eL.DB_STORE_NAME),s=0,u=0,c=e.length;function l(){0==u?t():r()}e.forEach(function(e){var t=a.get(e);t.onsuccess=function(){eL.analyzePath(e).exists&&eL.unlink(e),eL.createDataFile(eC.dirname(e),eC.basename(e),t.result,!0,!0,!0),++s+u==c&&l()},t.onerror=function(){u++,s+u==c&&l()}}),i.onerror=r},o.onerror=r}},eO={mappings:{},DEFAULT_POLLMASK:5,umask:511,calculateAt:function(e,t){if("/"!==t[0]){var r;if(-100===e)r=eL.cwd();else{var n=eL.getStream(e);if(!n)throw new eL.ErrnoError(8);r=n.path}t=eC.join2(r,t)}return t},doStat:function(e,t,r){try{var n=e(t)}catch(e){if(e&&e.node&&eC.normalize(t)!==eC.normalize(eL.getPath(e.node)))return -54;throw e}return p[r>>2]=n.dev,p[r+4>>2]=0,p[r+8>>2]=n.ino,p[r+12>>2]=n.mode,p[r+16>>2]=n.nlink,p[r+20>>2]=n.uid,p[r+24>>2]=n.gid,p[r+28>>2]=n.rdev,p[r+32>>2]=0,g=[n.size>>>0,+eo(y=n.size)>=1?y>0?es(+ea(y/0x100000000),0xffffffff)>>>0:~~ei((y-(~~y>>>0))/0x100000000)>>>0:0],p[r+40>>2]=g[0],p[r+44>>2]=g[1],p[r+48>>2]=4096,p[r+52>>2]=n.blocks,p[r+56>>2]=n.atime.getTime()/1e3|0,p[r+60>>2]=0,p[r+64>>2]=n.mtime.getTime()/1e3|0,p[r+68>>2]=0,p[r+72>>2]=n.ctime.getTime()/1e3|0,p[r+76>>2]=0,g=[n.ino>>>0,+eo(y=n.ino)>=1?y>0?es(+ea(y/0x100000000),0xffffffff)>>>0:~~ei((y-(~~y>>>0))/0x100000000)>>>0:0],p[r+80>>2]=g[0],p[r+84>>2]=g[1],0},doMsync:function(e,t,r,n,o){var i=h.slice(e,e+r);eL.msync(t,i,o,r,n)},doMkdir:function(e,t){return"/"===(e=eC.normalize(e))[e.length-1]&&(e=e.substr(0,e.length-1)),eL.mkdir(e,t,0),0},doMknod:function(e,t,r){switch(61440&t){case 32768:case 8192:case 24576:case 4096:case 49152:break;default:return -28}return eL.mknod(e,t,r),0},doReadlink:function(e,t,r){if(r<=0)return -28;var n=eL.readlink(e),o=Math.min(r,j(n)),i=d[t+o];return B(n,t,r+1),d[t+o]=i,o},doAccess:function(e,t){if(-8&t)return -28;if(!(r=eL.lookupPath(e,{follow:!0}).node))return -44;var r,n="";return(4&t&&(n+="r"),2&t&&(n+="w"),1&t&&(n+="x"),n&&eL.nodePermissions(r,n))?-2:0},doDup:function(e,t,r){var n=eL.getStream(r);return n&&eL.close(n),eL.open(e,t,0,r,r).fd},doReadv:function(e,t,r,n){for(var o=0,i=0;i<r;i++){var a=p[t+8*i>>2],s=p[t+(8*i+4)>>2],u=eL.read(e,d,a,s,n);if(u<0)return -1;if(o+=u,u<s)break}return o},doWritev:function(e,t,r,n){for(var o=0,i=0;i<r;i++){var a=p[t+8*i>>2],s=p[t+(8*i+4)>>2],u=eL.write(e,d,a,s,n);if(u<0)return -1;o+=u}return o},varargs:void 0,get:function(){return eO.varargs+=4,p[eO.varargs-4>>2]},getStr:function(e){return L(e)},getStreamFromFD:function(e){var t=eL.getStream(e);if(!t)throw new eL.ErrnoError(8);return t},get64:function(e,t){return e}};function eB(e,t,r){eO.varargs=r;try{var n=eO.getStreamFromFD(e);switch(t){case 0:var o=eO.get();if(o<0)return -28;return eL.open(n.path,n.flags,0,o).fd;case 1:case 2:case 13:case 14:return 0;case 3:return n.flags;case 4:var o=eO.get();return n.flags|=o,0;case 12:var o=eO.get(),i=0;return m[o+i>>1]=2,0;case 16:case 8:default:return -28;case 9:return eT(28),-1}}catch(e){return void 0!==eL&&e instanceof eL.ErrnoError||ed(e),-e.errno}}function ej(e,t,r){eO.varargs=r;try{var n=eO.getStreamFromFD(e);switch(t){case 21509:case 21505:case 21510:case 21511:case 21512:case 21506:case 21507:case 21508:case 21523:case 21524:if(!n.tty)return -59;return 0;case 21519:if(!n.tty)return -59;var o=eO.get();return p[o>>2]=0,0;case 21520:if(!n.tty)return -59;return -28;case 21531:var o=eO.get();return eL.ioctl(n,t,o);default:ed("bad ioctl syscall "+t)}}catch(e){return void 0!==eL&&e instanceof eL.ErrnoError||ed(e),-e.errno}}function eN(e,t,r){eO.varargs=r;try{var n=eO.getStr(e),o=eO.get();return eL.open(n,t,o).fd}catch(e){return void 0!==eL&&e instanceof eL.ErrnoError||ed(e),-e.errno}}function eU(e){try{return e=eO.getStr(e),eL.rmdir(e),0}catch(e){return void 0!==eL&&e instanceof eL.ErrnoError||ed(e),-e.errno}}function ez(e){try{var t=eO.umask;return eO.umask=e,t}catch(e){return void 0!==eL&&e instanceof eL.ErrnoError||ed(e),-e.errno}}function eW(e){try{return e=eO.getStr(e),eL.unlink(e),0}catch(e){return void 0!==eL&&e instanceof eL.ErrnoError||ed(e),-e.errno}}function eH(e,t,r,n){try{ed("cannot wait on child processes")}catch(e){return void 0!==eL&&e instanceof eL.ErrnoError||ed(e),-e.errno}}function eq(e,t,r){h.copyWithin(e,t,t+r)}function eV(){return h.length}function eG(e){try{return l.grow(e-f.byteLength+65535>>>16),H(l.buffer),1}catch(e){}}function eK(e){e>>>=0;var t=eV(),r=65536,n=0x80000000;if(e>0x80000000)return!1;for(var o=0x1000000,i=1;i<=4;i*=2){var a=t*(1+.2/i);if(a=Math.min(a,e+0x6000000),eG(Math.min(n,W(Math.max(o,e,a),r))))return!0}return!1}var e$={};function eX(){return k||"./this.program"}function eY(){if(!eY.strings){var e={USER:"web_user",LOGNAME:"web_user",PATH:"/",PWD:"/",HOME:"/home/web_user",LANG:("object"==typeof navigator&&navigator.languages&&navigator.languages[0]||"C").replace("-","_")+".UTF-8",_:eX()};for(var t in e$)e[t]=e$[t];var r=[];for(var t in e)r.push(t+"="+e[t]);eY.strings=r}return eY.strings}function eZ(e,t){var r=0;return eY().forEach(function(n,o){var i=t+r;p[e+4*o>>2]=i,U(n,i),r+=n.length+1}),0}function eJ(e,t){var r=eY();p[e>>2]=r.length;var n=0;return r.forEach(function(e){n+=e.length+1}),p[t>>2]=n,0}function eQ(e){tl(e)}function e0(e){try{var t=eO.getStreamFromFD(e);return eL.close(t),0}catch(e){return void 0!==eL&&e instanceof eL.ErrnoError||ed(e),e.errno}}function e1(e,t){try{var r=eO.getStreamFromFD(e),n=r.tty?2:eL.isDir(r.mode)?3:eL.isLink(r.mode)?7:4;return d[0|t]=n,0}catch(e){return void 0!==eL&&e instanceof eL.ErrnoError||ed(e),e.errno}}function e2(e,t,r,n){try{var o=eO.getStreamFromFD(e),i=eO.doReadv(o,t,r);return p[n>>2]=i,0}catch(e){return void 0!==eL&&e instanceof eL.ErrnoError||ed(e),e.errno}}function e6(e,t,r,n,o){try{var i=eO.getStreamFromFD(e),a=0x100000000,s=r*a+(t>>>0),u=0x20000000000000;if(s<=-u||s>=u)return -61;return eL.llseek(i,s,n),g=[i.position>>>0,(y=i.position,+eo(y)>=1?y>0?es(+ea(y/0x100000000),0xffffffff)>>>0:~~ei((y-(~~y>>>0))/0x100000000)>>>0:0)],p[o>>2]=g[0],p[o+4>>2]=g[1],i.getdents&&0===s&&0===n&&(i.getdents=null),0}catch(e){return void 0!==eL&&e instanceof eL.ErrnoError||ed(e),e.errno}}function e3(e,t,r,n){try{var o=eO.getStreamFromFD(e),i=eO.doWritev(o,t,r);return p[n>>2]=i,0}catch(e){return void 0!==eL&&e instanceof eL.ErrnoError||ed(e),e.errno}}function e4(){x("missing function: popen"),ed(-1)}function e8(){return 6}function e5(){}var e9=function(e,t,r,n){e||(e=this),this.parent=e,this.mount=e.mount,this.mounted=null,this.id=eL.nextInode++,this.name=t,this.mode=r,this.node_ops={},this.stream_ops={},this.rdev=n},e7=365,te=146;function tt(e,t,r){var n=Array(r>0?r:j(e)+1),o=O(e,n,0,n.length);return t&&(n.length=o),n}Object.defineProperties(e9.prototype,{read:{get:function(){return(this.mode&e7)===e7},set:function(e){e?this.mode|=e7:this.mode&=~e7}},write:{get:function(){return(this.mode&te)===te},set:function(e){e?this.mode|=te:this.mode&=~te}},isFolder:{get:function(){return eL.isDir(this.mode)}},isDevice:{get:function(){return eL.isChrdev(this.mode)}}}),eL.FSNode=e9,eL.staticInit();var tr={a:eM,s:eD,d:eB,i:ej,e:eN,t:eU,j:ez,u:eW,v:eH,n:eq,b:eK,p:eZ,q:eJ,c:eQ,f:e0,r:e1,h:e2,m:e6,g:e3,memory:l,o:e4,l:e8,k:e5,table:D};eb();var tn=E.___wasm_call_ctors=function(){return(tn=E.___wasm_call_ctors=E.asm.w).apply(null,arguments)},to=E._malloc=function(){return(to=E._malloc=E.asm.x).apply(null,arguments)},ti=E.___errno_location=function(){return(ti=E.___errno_location=E.asm.y).apply(null,arguments)};E._main=function(){return(E._main=E.asm.z).apply(null,arguments)};var ta=E.stackAlloc=function(){return(ta=E.stackAlloc=E.asm.A).apply(null,arguments)};function ts(e){this.name="ExitStatus",this.message="Program terminated with exit("+e+")",this.status=e}function tu(e){var t,r=E._main;function n(e){var t=e.length+1,r=ta((t+1)*4);p[r>>2]=N(k);for(var n=1;n<t;n++)p[(r>>2)+n]=N(e[n-1]);return p[(r>>2)+t]=0,{argc:t,argv:r}}e=e||[];try{for(let o=0;o<e.length;o++){let i=e[o].split(" ").filter(e=>!!e),{argc:a,argv:s}=n(i);if(t=r(a,s),0!==t)break}tl(t,!0)}catch(e){if(e instanceof ts)return;if("unwind"==e){c=!0;return}var o=e;e&&"object"==typeof e&&e.stack&&(o=[e,e.stack]),x("exception thrown: "+o),A(1,e)}finally{}}function tc(e){e=e||_,!(eu>0)&&(J(),eu>0||(E.setStatus?(E.setStatus("Running..."),setTimeout(function(){setTimeout(function(){E.setStatus("")},1),t()},1)):t()));function t(){v||(v=!0,E.calledRun=!0,C||(Q(),ee(),o(E),E.onRuntimeInitialized&&E.onRuntimeInitialized(),tf&&tu(e),et()))}}function tl(e,t){t&&c&&0===e||(c||(C=!0,E.onExit&&E.onExit(e)),A(e,new ts(e)))}if(E.dynCall_vi=function(){return(E.dynCall_vi=E.asm.B).apply(null,arguments)},ec=function e(){v||tc(),v||(ec=e)},E.run=tc,E.preInit)for("function"==typeof E.preInit&&(E.preInit=[E.preInit]);E.preInit.length>0;)E.preInit.pop()();var tf=!0;return E.noInitialRun&&(tf=!1),c=!0,tc(),n.ready}}();let n="",o="";var i=()=>{n.length>0&&(console.log(n),n=""),o.length>0&&(console.error(o),o="")},a=e=>{n+=String.fromCharCode(e),10===e&&(console.log(n),n="")};let s=[],u=()=>new Promise(e=>{s.push(e),1===s.length&&s[0]()}),c=()=>{s.length>0&&(s.shift(),s.length>0&&s[0]())};return async(e={})=>{let{data:t=null,command:n=[],folder:o=[],isStrict:s=!1}=e;return await u(),new Promise((e,u)=>{let l=!1,f="";r({stdout:a,stderr:e=>{f+=String.fromCharCode(e),10===e&&(console.error(f),s&&u(f))},arguments:n,input:t,folder:o,output:t=>{e(t),l=!0}}).then(()=>{i(),l||u(),c()})})}}();var cwrap,ccall,HEAP,buffer,HEAP8,HEAPU8,HEAP16,HEAPU16,HEAP32,HEAPU32,HEAPF32,HEAPF64,STATIC_BASE,STATICTOP,staticSealed,STACK_BASE,STACKTOP,STACK_MAX,DYNAMIC_BASE,DYNAMICTOP_PTR,byteLength,initialStackTop,__TURBOPACK__imported__module__549186__=__turbopack_context__.i(549186);class GifImage extends __TURBOPACK__imported__module__549186__.ImageBase{async compress(){try{let{width:e,height:t,x:r,y:n}=this.getOutputDimension(),o=["--optimize=3",`--colors=${this.option.gif.colors}`];e!==this.info.width||t!==this.info.height?o.push(`--crop=${r},${n}+${e}x${t}`):o.push(`--resize=${e}x${t}`),this.option.gif.dithering&&o.push("--dither=floyd-steinberg"),o.push(`--output=/out/${this.info.name}`),o.push(this.info.name);let i=await this.info.blob.arrayBuffer(),a=await gifsicle({data:[{file:i,name:this.info.name}],command:[o.join(" ")]});if(!Array.isArray(a)||1!==a.length)return this.failResult();let s=new Blob([a[0].file],{type:this.info.blob.type});return{width:e,height:t,blob:s,src:URL.createObjectURL(s)}}catch(e){return this.failResult()}}async preview(){let{width:e,height:t,x:r,y:n}=this.getPreviewDimension(),o=[`--colors=${this.option.gif.colors}`,`--output=/out/${this.info.name}`];e!==this.info.width||t!==this.info.height?o.push(`--crop=${r},${n}+${e}x${t}`):o.push(`--resize=${e}x${t}`),o.push(this.info.name);let i=await this.info.blob.arrayBuffer(),a=await gifsicle({data:[{file:i,name:this.info.name}],command:[o.join(" ")]});if(!Array.isArray(a)||1!==a.length)return{width:this.info.width,height:this.info.height,blob:this.info.blob,src:URL.createObjectURL(this.info.blob)};let s=new Blob([a[0].file],{type:this.info.blob.type});return{width:e,height:t,blob:s,src:URL.createObjectURL(s)}}}var __TURBOPACK__imported__module__549186__1=__TURBOPACK__imported__module__549186__,__TURBOPACK__imported__module__247167__=__turbopack_context__.i(247167);let pngWasmBinaryFile=new URL("png.wasm",location.origin);Module||(Module=(void 0!==Module?Module:null)||{wasmBinaryFile:pngWasmBinaryFile}),Module.ENVIRONMENT="WEB";var moduleOverrides={};for(var key in Module)Module.hasOwnProperty(key)&&(moduleOverrides[key]=Module[key]);var ENVIRONMENT_IS_WEB=!1,ENVIRONMENT_IS_WORKER=!1,ENVIRONMENT_IS_NODE=!1,ENVIRONMENT_IS_SHELL=!1;if(Module.ENVIRONMENT)if("WEB"===Module.ENVIRONMENT)ENVIRONMENT_IS_WEB=!0;else if("WORKER"===Module.ENVIRONMENT)ENVIRONMENT_IS_WORKER=!0;else if("NODE"===Module.ENVIRONMENT)ENVIRONMENT_IS_NODE=!0;else if("SHELL"===Module.ENVIRONMENT)ENVIRONMENT_IS_SHELL=!0;else throw Error("The provided Module['ENVIRONMENT'] value is not valid. It must be one of: WEB|WORKER|NODE|SHELL.");else ENVIRONMENT_IS_WEB=!0,ENVIRONMENT_IS_WORKER="function"==typeof importScripts,ENVIRONMENT_IS_NODE="object"==typeof __TURBOPACK__imported__module__247167__.default&&!ENVIRONMENT_IS_WEB&&!ENVIRONMENT_IS_WORKER,ENVIRONMENT_IS_SHELL=!ENVIRONMENT_IS_WEB&&!ENVIRONMENT_IS_NODE&&!ENVIRONMENT_IS_WORKER;if(ENVIRONMENT_IS_SHELL)Module.print||(Module.print=print),"undefined"!=typeof printErr&&(Module.printErr=printErr),"undefined"!=typeof read?Module.read=read:Module.read=function(){throw"no read() available"},Module.readBinary=function(e){if("function"==typeof readbuffer)return new Uint8Array(readbuffer(e));var t=read(e,"binary");return assert("object"==typeof t),t},"undefined"!=typeof scriptArgs?Module.arguments=scriptArgs:"undefined"!=typeof arguments&&(Module.arguments=arguments),"function"==typeof quit&&(Module.quit=function(e,t){quit(e)});else if(ENVIRONMENT_IS_WEB||ENVIRONMENT_IS_WORKER)Module.read=function(e){var t=new XMLHttpRequest;return t.open("GET",e,!1),t.send(null),t.responseText},ENVIRONMENT_IS_WORKER&&(Module.readBinary=function(e){var t=new XMLHttpRequest;return t.open("GET",e,!1),t.responseType="arraybuffer",t.send(null),new Uint8Array(t.response)}),Module.readAsync=function(e,t,r){var n=new XMLHttpRequest;n.open("GET",e,!0),n.responseType="arraybuffer",n.onload=function(){200==n.status||0==n.status&&n.response?t(n.response):r()},n.onerror=r,n.send(null)},"undefined"!=typeof arguments&&(Module.arguments=arguments),"undefined"!=typeof console?(Module.print||(Module.print=function(e){console.log(e)}),Module.printErr||(Module.printErr=function(e){console.warn(e)})):Module.print||(Module.print=function(e){}),ENVIRONMENT_IS_WORKER&&(Module.load=importScripts),void 0===Module.setWindowTitle&&(Module.setWindowTitle=function(e){document.title=e});else throw"Unknown runtime environment. Where are we?";function globalEval(e){eval.call(null,e)}for(var key in!Module.load&&Module.read&&(Module.load=function(e){globalEval(Module.read(e))}),Module.print||(Module.print=function(){}),Module.printErr||(Module.printErr=Module.print),Module.arguments||(Module.arguments=[]),Module.thisProgram||(Module.thisProgram="./this.program"),Module.quit||(Module.quit=function(e,t){throw t}),Module.print=Module.print,Module.printErr=Module.printErr,Module.preRun=[],Module.postRun=[],moduleOverrides)moduleOverrides.hasOwnProperty(key)&&(Module[key]=moduleOverrides[key]);moduleOverrides=void 0;var Runtime={setTempRet0:function(e){return tempRet0=e,e},getTempRet0:function(){return tempRet0},stackSave:function(){return STACKTOP},stackRestore:function(e){STACKTOP=e},getNativeTypeSize:function(e){switch(e){case"i1":case"i8":return 1;case"i16":return 2;case"i32":case"float":return 4;case"i64":case"double":return 8;default:if("*"===e[e.length-1])return Runtime.QUANTUM_SIZE;if("i"!==e[0])return 0;var t=parseInt(e.substr(1));return assert(t%8==0),t/8}},getNativeFieldSize:function(e){return Math.max(Runtime.getNativeTypeSize(e),Runtime.QUANTUM_SIZE)},STACK_ALIGN:16,prepVararg:function(e,t){return"double"===t||"i64"===t?7&e&&(assert((7&e)==4),e+=4):assert((3&e)==0),e},getAlignSize:function(e,t,r){return r||"i64"!=e&&"double"!=e?e?Math.min(t||(e?Runtime.getNativeFieldSize(e):0),Runtime.QUANTUM_SIZE):Math.min(t,8):8},dynCall:function(e,t,r){return r&&r.length?Module["dynCall_"+e].apply(null,[t].concat(r)):Module["dynCall_"+e].call(null,t)},functionPointers:[],addFunction:function(e){for(var t=0;t<Runtime.functionPointers.length;t++)if(!Runtime.functionPointers[t])return Runtime.functionPointers[t]=e,2*(1+t);throw"Finished up all reserved function pointers. Use a higher value for RESERVED_FUNCTION_POINTERS."},removeFunction:function(e){Runtime.functionPointers[(e-2)/2]=null},warnOnce:function(e){Runtime.warnOnce.shown||(Runtime.warnOnce.shown={}),Runtime.warnOnce.shown[e]||(Runtime.warnOnce.shown[e]=1,Module.printErr(e))},funcWrappers:{},getFuncWrapper:function(e,t){if(e){assert(t),Runtime.funcWrappers[t]||(Runtime.funcWrappers[t]={});var r=Runtime.funcWrappers[t];return r[e]||(1===t.length?r[e]=function(){return Runtime.dynCall(t,e)}:2===t.length?r[e]=function(r){return Runtime.dynCall(t,e,[r])}:r[e]=function(){return Runtime.dynCall(t,e,Array.prototype.slice.call(arguments))}),r[e]}},getCompilerSetting:function(e){throw"You must build with -s RETAIN_COMPILER_SETTINGS=1 for Runtime.getCompilerSetting or emscripten_get_compiler_setting to work"},stackAlloc:function(e){var t=STACKTOP;return STACKTOP=(STACKTOP=STACKTOP+e|0)+15&-16,t},staticAlloc:function(e){var t=STATICTOP;return STATICTOP=(STATICTOP=STATICTOP+e|0)+15&-16,t},dynamicAlloc:function(e){var t=HEAP32[DYNAMICTOP_PTR>>2],r=t+e+15&-16;return(HEAP32[DYNAMICTOP_PTR>>2]=r,r>=TOTAL_MEMORY&&!enlargeMemory())?(HEAP32[DYNAMICTOP_PTR>>2]=t,0):t},alignMemory:function(e,t){return Math.ceil(e/(t||16))*(t||16)},makeBigInt:function(e,t,r){return r?+(e>>>0)+(t>>>0)*0x100000000:+(e>>>0)+(0|t)*0x100000000},GLOBAL_BASE:1024,QUANTUM_SIZE:4,__dummy__:0};Module.Runtime=Runtime;var ABORT=0,EXITSTATUS=0;function assert(e,t){e||abort("Assertion failed: "+t)}function getCFunc(ident){var func=Module["_"+ident];if(!func)try{func=eval("_"+ident)}catch(e){}return assert(func,"Cannot call unknown function "+ident+" (perhaps LLVM optimizations or closure removed it?)"),func}function setValue(e,t,r,n){switch("*"===(r=r||"i8").charAt(r.length-1)&&(r="i32"),r){case"i1":case"i8":HEAP8[0|e]=t;break;case"i16":HEAP16[e>>1]=t;break;case"i32":HEAP32[e>>2]=t;break;case"i64":tempI64=[t>>>0,+Math_abs(tempDouble=t)>=1?tempDouble>0?Math_min(+Math_floor(tempDouble/0x100000000),0xffffffff)>>>0:~~Math_ceil((tempDouble-(~~tempDouble>>>0))/0x100000000)>>>0:0],HEAP32[e>>2]=tempI64[0],HEAP32[e+4>>2]=tempI64[1];break;case"float":HEAPF32[e>>2]=t;break;case"double":HEAPF64[e>>3]=t;break;default:abort("invalid type for setValue: "+r)}}function getValue(e,t,r){switch("*"===(t=t||"i8").charAt(t.length-1)&&(t="i32"),t){case"i1":case"i8":return HEAP8[0|e];case"i16":return HEAP16[e>>1];case"i32":case"i64":return HEAP32[e>>2];case"float":return HEAPF32[e>>2];case"double":return HEAPF64[e>>3];default:abort("invalid type for setValue: "+t)}return null}!function(){var JSfuncs={stackSave:function(){Runtime.stackSave()},stackRestore:function(){Runtime.stackRestore()},arrayToC:function(e){var t=Runtime.stackAlloc(e.length);return writeArrayToMemory(e,t),t},stringToC:function(e){var t=0;if(null!=e&&0!==e){var r=(e.length<<2)+1;stringToUTF8(e,t=Runtime.stackAlloc(r),r)}return t}},toC={string:JSfuncs.stringToC,array:JSfuncs.arrayToC};ccall=function(e,t,r,n,o){var i=getCFunc(e),a=[],s=0;if(n)for(var u=0;u<n.length;u++){var c=toC[r[u]];c?(0===s&&(s=Runtime.stackSave()),a[u]=c(n[u])):a[u]=n[u]}var l=i.apply(null,a);if("string"===t&&(l=Pointer_stringify(l)),0!==s){if(o&&o.async)return void EmterpreterAsync.asyncFinalizers.push(function(){Runtime.stackRestore(s)});Runtime.stackRestore(s)}return l};var sourceRegex=/^function\s*[a-zA-Z$_0-9]*\s*\(([^)]*)\)\s*{\s*([^*]*?)[\s;]*(?:return\s*(.*?)[;\s]*)?}$/;function parseJSFunc(e){var t=e.toString().match(sourceRegex).slice(1);return{arguments:t[0],body:t[1],returnValue:t[2]}}var JSsource=null;function ensureJSsource(){if(!JSsource)for(var e in JSsource={},JSfuncs)JSfuncs.hasOwnProperty(e)&&(JSsource[e]=parseJSFunc(JSfuncs[e]))}cwrap=function cwrap(ident,returnType,argTypes){argTypes=argTypes||[];var cfunc=getCFunc(ident),numericArgs=argTypes.every(function(e){return"number"===e}),numericRet="string"!==returnType;if(numericRet&&numericArgs)return cfunc;var argNames=argTypes.map(function(e,t){return"$"+t}),funcstr="(function("+argNames.join(",")+") {",nargs=argTypes.length;if(!numericArgs){ensureJSsource(),funcstr+="var stack = "+JSsource.stackSave.body+";";for(var i=0;i<nargs;i++){var arg=argNames[i],type=argTypes[i];if("number"!==type){var convertCode=JSsource[type+"ToC"];funcstr+="var "+convertCode.arguments+" = "+arg+";",funcstr+=convertCode.body+";",funcstr+=arg+"=("+convertCode.returnValue+");"}}}var cfuncname=parseJSFunc(function(){return cfunc}).returnValue;return funcstr+="var ret = "+cfuncname+"("+argNames.join(",")+");",numericRet||(funcstr+="ret = "+parseJSFunc(function(){return Pointer_stringify}).returnValue+"(ret);"),numericArgs||(ensureJSsource(),funcstr+=JSsource.stackRestore.body.replace("()","(stack)")+";"),funcstr+="return ret})",eval(funcstr)}}(),Module.ccall=ccall,Module.cwrap=cwrap,Module.setValue=setValue,Module.getValue=getValue;var ALLOC_NORMAL=0,ALLOC_STACK=1,ALLOC_STATIC=2,ALLOC_DYNAMIC=3,ALLOC_NONE=4;function allocate(e,t,r,n){"number"==typeof e?(i=!0,a=e):(i=!1,a=e.length);var o="string"==typeof t?t:null;if(s=r==ALLOC_NONE?n:["function"==typeof _malloc?_malloc:Runtime.staticAlloc,Runtime.stackAlloc,Runtime.staticAlloc,Runtime.dynamicAlloc][void 0===r?ALLOC_STATIC:r](Math.max(a,o?1:t.length)),i){var i,a,s,u,n=s;for(assert((3&s)==0),u=s+(-4&a);n<u;n+=4)HEAP32[n>>2]=0;for(u=s+a;n<u;)HEAP8[0|n++]=0;return s}if("i8"===o)return e.subarray||e.slice?HEAPU8.set(e,s):HEAPU8.set(new Uint8Array(e),s),s;for(var c,l,f,d=0;d<a;){var h=e[d];if("function"==typeof h&&(h=Runtime.getFunctionIndex(h)),0===(c=o||t[d])){d++;continue}"i64"==c&&(c="i32"),setValue(s+d,h,c),f!==c&&(l=Runtime.getNativeTypeSize(c),f=c),d+=l}return s}function getMemory(e){return staticSealed?runtimeInitialized?_malloc(e):Runtime.dynamicAlloc(e):Runtime.staticAlloc(e)}function Pointer_stringify(e,t){if(0===t||!e)return"";for(var r=0,n=0;(r|=i=HEAPU8[e+n|0],0!=i||t)&&(n++,!t||n!=t););t||(t=n);var o="";if(r<128){for(var i,a,s=1024;t>0;)a=String.fromCharCode.apply(String,HEAPU8.subarray(e,e+Math.min(t,s))),o=o?o+a:a,e+=s,t-=s;return o}return Module.UTF8ToString(e)}function AsciiToString(e){for(var t="";;){var r=HEAP8[0|e++];if(!r)return t;t+=String.fromCharCode(r)}}function stringToAscii(e,t){return writeAsciiToMemory(e,t,!1)}Module.ALLOC_NORMAL=ALLOC_NORMAL,Module.ALLOC_STACK=ALLOC_STACK,Module.ALLOC_STATIC=ALLOC_STATIC,Module.ALLOC_DYNAMIC=ALLOC_DYNAMIC,Module.ALLOC_NONE=ALLOC_NONE,Module.allocate=allocate,Module.getMemory=getMemory,Module.Pointer_stringify=Pointer_stringify,Module.AsciiToString=AsciiToString,Module.stringToAscii=stringToAscii;var UTF8Decoder="undefined"!=typeof TextDecoder?new TextDecoder("utf8"):void 0;function UTF8ArrayToString(e,t){for(var r=t;e[r];)++r;if(r-t>16&&e.subarray&&UTF8Decoder)return UTF8Decoder.decode(e.subarray(t,r));for(var n,o,i,a,s,u="";;){if(!(n=e[t++]))return u;if(!(128&n)){u+=String.fromCharCode(n);continue}if(o=63&e[t++],(224&n)==192){u+=String.fromCharCode((31&n)<<6|o);continue}if(i=63&e[t++],(240&n)==224?n=(15&n)<<12|o<<6|i:(a=63&e[t++],(248&n)==240?n=(7&n)<<18|o<<12|i<<6|a:(s=63&e[t++],n=(252&n)==248?(3&n)<<24|o<<18|i<<12|a<<6|s:(1&n)<<30|o<<24|i<<18|a<<12|s<<6|63&e[t++])),n<65536)u+=String.fromCharCode(n);else{var c=n-65536;u+=String.fromCharCode(55296|c>>10,56320|1023&c)}}}function UTF8ToString(e){return UTF8ArrayToString(HEAPU8,e)}function stringToUTF8Array(e,t,r,n){if(!(n>0))return 0;for(var o=r,i=r+n-1,a=0;a<e.length;++a){var s=e.charCodeAt(a);if(s>=55296&&s<=57343&&(s=65536+((1023&s)<<10)|1023&e.charCodeAt(++a)),s<=127){if(r>=i)break;t[r++]=s}else if(s<=2047){if(r+1>=i)break;t[r++]=192|s>>6,t[r++]=128|63&s}else if(s<=65535){if(r+2>=i)break;t[r++]=224|s>>12,t[r++]=128|s>>6&63,t[r++]=128|63&s}else if(s<=2097151){if(r+3>=i)break;t[r++]=240|s>>18,t[r++]=128|s>>12&63,t[r++]=128|s>>6&63,t[r++]=128|63&s}else if(s<=0x3ffffff){if(r+4>=i)break;t[r++]=248|s>>24,t[r++]=128|s>>18&63,t[r++]=128|s>>12&63,t[r++]=128|s>>6&63,t[r++]=128|63&s}else{if(r+5>=i)break;t[r++]=252|s>>30,t[r++]=128|s>>24&63,t[r++]=128|s>>18&63,t[r++]=128|s>>12&63,t[r++]=128|s>>6&63,t[r++]=128|63&s}}return t[r]=0,r-o}function stringToUTF8(e,t,r){return stringToUTF8Array(e,HEAPU8,t,r)}function lengthBytesUTF8(e){for(var t=0,r=0;r<e.length;++r){var n=e.charCodeAt(r);n>=55296&&n<=57343&&(n=65536+((1023&n)<<10)|1023&e.charCodeAt(++r)),n<=127?++t:n<=2047?t+=2:n<=65535?t+=3:n<=2097151?t+=4:n<=0x3ffffff?t+=5:t+=6}return t}Module.UTF8ArrayToString=UTF8ArrayToString,Module.UTF8ToString=UTF8ToString,Module.stringToUTF8Array=stringToUTF8Array,Module.stringToUTF8=stringToUTF8,Module.lengthBytesUTF8=lengthBytesUTF8;var UTF16Decoder="undefined"!=typeof TextDecoder?new TextDecoder("utf-16le"):void 0;function demangle(e){var t=Module.___cxa_demangle||Module.__cxa_demangle;if(t){try{var r=e.substr(1),n=lengthBytesUTF8(r)+1,o=_malloc(n);stringToUTF8(r,o,n);var i=_malloc(4),a=t(o,0,0,i);if(0===getValue(i,"i32")&&a)return Pointer_stringify(a)}catch(e){}finally{o&&_free(o),i&&_free(i),a&&_free(a)}return e}return Runtime.warnOnce("warning: build with  -s DEMANGLE_SUPPORT=1  to link in libcxxabi demangling"),e}function demangleAll(e){var t=/__Z[\w\d_]+/g;return e.replace(t,function(e){var t=demangle(e);return e===t?e:e+" ["+t+"]"})}function jsStackTrace(){var e=Error();if(!e.stack){try{throw Error(0)}catch(t){e=t}if(!e.stack)return"(no stack trace available)"}return e.stack.toString()}function stackTrace(){var e=jsStackTrace();return Module.extraStackTrace&&(e+="\n"+Module.extraStackTrace()),demangleAll(e)}Module.stackTrace=stackTrace;var WASM_PAGE_SIZE=65536,ASMJS_PAGE_SIZE=0x1000000,MIN_TOTAL_MEMORY=0x1000000;function alignUp(e,t){return e%t>0&&(e+=t-e%t),e}function updateGlobalBuffer(e){Module.buffer=buffer=e}function updateGlobalBufferViews(){Module.HEAP8=HEAP8=new Int8Array(buffer),Module.HEAP16=HEAP16=new Int16Array(buffer),Module.HEAP32=HEAP32=new Int32Array(buffer),Module.HEAPU8=HEAPU8=new Uint8Array(buffer),Module.HEAPU16=HEAPU16=new Uint16Array(buffer),Module.HEAPU32=HEAPU32=new Uint32Array(buffer),Module.HEAPF32=HEAPF32=new Float32Array(buffer),Module.HEAPF64=HEAPF64=new Float64Array(buffer)}function abortOnCannotGrowMemory(){abort("Cannot enlarge memory arrays. Either (1) compile with  -s TOTAL_MEMORY=X  with X higher than the current value "+TOTAL_MEMORY+", (2) compile with  -s ALLOW_MEMORY_GROWTH=1  which allows increasing the size at runtime, or (3) if you want malloc to return NULL (0) instead of this abort, compile with  -s ABORTING_MALLOC=0 ")}function enlargeMemory(){var e=Module.usingWasm?WASM_PAGE_SIZE:ASMJS_PAGE_SIZE,t=0x80000000-e;if(HEAP32[DYNAMICTOP_PTR>>2]>t)return!1;var r=TOTAL_MEMORY;for(TOTAL_MEMORY=Math.max(TOTAL_MEMORY,MIN_TOTAL_MEMORY);TOTAL_MEMORY<HEAP32[DYNAMICTOP_PTR>>2];)TOTAL_MEMORY=TOTAL_MEMORY<=0x20000000?alignUp(2*TOTAL_MEMORY,e):Math.min(alignUp((3*TOTAL_MEMORY+0x80000000)/4,e),t);var n=Module.reallocBuffer(TOTAL_MEMORY);return n&&n.byteLength==TOTAL_MEMORY?(updateGlobalBuffer(n),updateGlobalBufferViews(),!0):(TOTAL_MEMORY=r,!1)}STATIC_BASE=STATICTOP=STACK_BASE=STACKTOP=STACK_MAX=DYNAMIC_BASE=DYNAMICTOP_PTR=0,staticSealed=!1,Module.reallocBuffer||(Module.reallocBuffer=function(e){try{if(ArrayBuffer.transfer)t=ArrayBuffer.transfer(buffer,e);else{var t,r=HEAP8;t=new ArrayBuffer(e),new Int8Array(t).set(r)}}catch(e){return!1}return!!_emscripten_replace_memory(t)&&t});try{(byteLength=Function.prototype.call.bind(Object.getOwnPropertyDescriptor(ArrayBuffer.prototype,"byteLength").get))(new ArrayBuffer(4))}catch(e){byteLength=function(e){return e.byteLength}}var TOTAL_STACK=Module.TOTAL_STACK||5242880,TOTAL_MEMORY=Module.TOTAL_MEMORY||0x1000000;function getTotalMemory(){return TOTAL_MEMORY}if(TOTAL_MEMORY<TOTAL_STACK&&Module.printErr("TOTAL_MEMORY should be larger than TOTAL_STACK, was "+TOTAL_MEMORY+"! (TOTAL_STACK="+TOTAL_STACK+")"),Module.buffer?buffer=Module.buffer:"object"==typeof WebAssembly&&"function"==typeof WebAssembly.Memory?(Module.wasmMemory=new WebAssembly.Memory({initial:TOTAL_MEMORY/WASM_PAGE_SIZE}),buffer=Module.wasmMemory.buffer):buffer=new ArrayBuffer(TOTAL_MEMORY),updateGlobalBufferViews(),HEAP32[0]=0x63736d65,HEAP16[1]=25459,115!==HEAPU8[2]||99!==HEAPU8[3])throw"Runtime error: expected the system to be little-endian!";function callRuntimeCallbacks(e){for(;e.length>0;){var t=e.shift();if("function"==typeof t){t();continue}var r=t.func;"number"==typeof r?void 0===t.arg?Module.dynCall_v(r):Module.dynCall_vi(r,t.arg):r(void 0===t.arg?null:t.arg)}}Module.HEAP=HEAP,Module.buffer=buffer,Module.HEAP8=HEAP8,Module.HEAP16=HEAP16,Module.HEAP32=HEAP32,Module.HEAPU8=HEAPU8,Module.HEAPU16=HEAPU16,Module.HEAPU32=HEAPU32,Module.HEAPF32=HEAPF32,Module.HEAPF64=HEAPF64;var __ATPRERUN__=[],__ATINIT__=[],__ATMAIN__=[],__ATEXIT__=[],__ATPOSTRUN__=[],runtimeInitialized=!1,runtimeExited=!1;function preRun(){if(Module.preRun)for("function"==typeof Module.preRun&&(Module.preRun=[Module.preRun]);Module.preRun.length;)addOnPreRun(Module.preRun.shift());callRuntimeCallbacks(__ATPRERUN__)}function ensureInitRuntime(){runtimeInitialized||(runtimeInitialized=!0,callRuntimeCallbacks(__ATINIT__))}function preMain(){callRuntimeCallbacks(__ATMAIN__)}function exitRuntime(){callRuntimeCallbacks(__ATEXIT__),runtimeExited=!0}function postRun(){if(Module.postRun)for("function"==typeof Module.postRun&&(Module.postRun=[Module.postRun]);Module.postRun.length;)addOnPostRun(Module.postRun.shift());callRuntimeCallbacks(__ATPOSTRUN__)}function addOnPreRun(e){__ATPRERUN__.unshift(e)}function addOnInit(e){__ATINIT__.unshift(e)}function addOnPreMain(e){__ATMAIN__.unshift(e)}function addOnExit(e){__ATEXIT__.unshift(e)}function addOnPostRun(e){__ATPOSTRUN__.unshift(e)}function intArrayFromString(e,t,r){var n=Array(r>0?r:lengthBytesUTF8(e)+1),o=stringToUTF8Array(e,n,0,n.length);return t&&(n.length=o),n}function intArrayToString(e){for(var t=[],r=0;r<e.length;r++){var n=e[r];n>255&&(n&=255),t.push(String.fromCharCode(n))}return t.join("")}function writeStringToMemory(e,t,r){var n,o;Runtime.warnOnce("writeStringToMemory is deprecated and should not be called! Use stringToUTF8() instead!"),r&&(n=HEAP8[o=t+lengthBytesUTF8(e)]),stringToUTF8(e,t,1/0),r&&(HEAP8[o]=n)}function writeArrayToMemory(e,t){HEAP8.set(e,t)}function writeAsciiToMemory(e,t,r){for(var n=0;n<e.length;++n)HEAP8[0|t++]=e.charCodeAt(n);r||(HEAP8[0|t]=0)}if(Module.addOnPreRun=addOnPreRun,Module.addOnInit=addOnInit,Module.addOnPreMain=addOnPreMain,Module.addOnExit=addOnExit,Module.addOnPostRun=addOnPostRun,Module.intArrayFromString=intArrayFromString,Module.intArrayToString=intArrayToString,Module.writeStringToMemory=writeStringToMemory,Module.writeArrayToMemory=writeArrayToMemory,Module.writeAsciiToMemory=writeAsciiToMemory,Math.imul&&-5===Math.imul(0xffffffff,5)||(Math.imul=function(e,t){var r=e>>>16,n=65535&e,o=t>>>16,i=65535&t;return n*i+(r*i+n*o<<16)|0}),Math.imul=Math.imul,!Math.fround){var froundBuffer=new Float32Array(1);Math.fround=function(e){return froundBuffer[0]=e,froundBuffer[0]}}Math.fround=Math.fround,Math.clz32||(Math.clz32=function(e){e>>>=0;for(var t=0;t<32;t++)if(e&1<<31-t)return t;return 32}),Math.clz32=Math.clz32,Math.trunc||(Math.trunc=function(e){return e<0?Math.ceil(e):Math.floor(e)}),Math.trunc=Math.trunc;var Math_abs=Math.abs,Math_cos=Math.cos,Math_sin=Math.sin,Math_tan=Math.tan,Math_acos=Math.acos,Math_asin=Math.asin,Math_atan=Math.atan,Math_atan2=Math.atan2,Math_exp=Math.exp,Math_log=Math.log,Math_sqrt=Math.sqrt,Math_ceil=Math.ceil,Math_floor=Math.floor,Math_pow=Math.pow,Math_imul=Math.imul,Math_fround=Math.fround,Math_round=Math.round,Math_min=Math.min,Math_clz32=Math.clz32,Math_trunc=Math.trunc,runDependencies=0,runDependencyWatcher=null,dependenciesFulfilled=null;function addRunDependency(e){runDependencies++,Module.monitorRunDependencies&&Module.monitorRunDependencies(runDependencies)}function removeRunDependency(e){if(runDependencies--,Module.monitorRunDependencies&&Module.monitorRunDependencies(runDependencies),0==runDependencies&&dependenciesFulfilled){var t=dependenciesFulfilled;dependenciesFulfilled=null,t()}}Module.addRunDependency=addRunDependency,Module.removeRunDependency=removeRunDependency,Module.preloadedImages={},Module.preloadedAudios={};var memoryInitializer=null;function integrateWasmJS(){var e=Module.wasmJSMethod||"native-wasm";Module.wasmJSMethod=e;var t=Module.wasmTextFile||"image_compressor.wast",r=Module.wasmBinaryFile||"image_compressor.wasm",n=Module.asmjsCodeFile||"image_compressor.temp.asm.js";"function"==typeof Module.locateFile&&(t=Module.locateFile(t),r=Module.locateFile(r),n=Module.locateFile(n));var o=65536,i={global:null,env:null,asm2wasm:{"f64-rem":function(e,t){return e%t},"f64-to-int":function(e){return 0|e},"i32s-div":function(e,t){return(0|e)/(0|t)|0},"i32u-div":function(e,t){return(e>>>0)/(t>>>0)>>>0},"i32s-rem":function(e,t){return(0|e)%(0|t)|0},"i32u-rem":function(e,t){return(e>>>0)%(t>>>0)>>>0},debugger:function(){}},parent:Module},a=null;function s(e){var t=Module.buffer;e.byteLength<t.byteLength&&Module.printErr("the new buffer in mergeMemory is smaller than the previous one. in native wasm, we should grow memory here");var r=new Int8Array(t),n=new Int8Array(e);memoryInitializer||r.set(n.subarray(Module.STATIC_BASE,Module.STATIC_BASE+Module.STATIC_BUMP),Module.STATIC_BASE),n.set(r),updateGlobalBuffer(e),updateGlobalBufferViews()}function u(e){return e}function c(){try{var e;if(Module.wasmBinary)e=Module.wasmBinary,e=new Uint8Array(e);else if(Module.readBinary)e=Module.readBinary(r);else throw"on the web, we need the wasm binary to be preloaded and set on Module['wasmBinary']. emcc.py will do that for you when generating HTML (but not JS)";return e}catch(e){abort(e)}}function l(){return!Module.wasmBinary&&(ENVIRONMENT_IS_WEB||ENVIRONMENT_IS_WORKER)&&"function"==typeof fetch?fetch(r,{credentials:"same-origin"}).then(function(e){if(!e.ok)throw"failed to load wasm binary file at '"+r+"'";return e.arrayBuffer()}):new Promise(function(e,t){e(c())})}function f(e,t,n){if("object"!=typeof WebAssembly)return Module.printErr("no native wasm support detected"),!1;if(!(Module.wasmMemory instanceof WebAssembly.Memory))return Module.printErr("no native wasm Memory in use"),!1;function o(e){(a=e.exports).memory&&s(a.memory),Module.asm=a,Module.usingWasm=!0,removeRunDependency("wasm-instantiate")}if(t.memory=Module.wasmMemory,i.global={NaN:NaN,Infinity:1/0},i["global.Math"]=e.Math,i.env=t,addRunDependency("wasm-instantiate"),Module.instantiateWasm)try{return Module.instantiateWasm(i,o)}catch(e){return Module.printErr("Module.instantiateWasm callback failed with error: "+e),!1}function u(e){o(e.instance)}function c(e){l().then(function(e){return WebAssembly.instantiate(e,i)}).then(e).catch(function(e){Module.printErr("failed to asynchronously prepare wasm: "+e),abort(e)})}return Module.wasmBinary||"function"!=typeof WebAssembly.instantiateStreaming?c(u):WebAssembly.instantiateStreaming(fetch(r,{credentials:"same-origin"}),i).then(u).catch(function(e){Module.printErr("wasm streaming compile failed: "+e),Module.printErr("falling back to ArrayBuffer instantiation"),c(u)}),{}}Module.asmPreload=Module.asm,Module.reallocBuffer;var d=function(e){e=alignUp(e,Module.usingWasm?WASM_PAGE_SIZE:ASMJS_PAGE_SIZE);var t=Module.buffer,r=t.byteLength;if(!Module.usingWasm)return a.__growWasmMemory((e-r)/o),Module.buffer!==t?Module.buffer:null;try{var n=Module.wasmMemory.grow((e-r)/o);if(-1!==n)return Module.buffer=Module.wasmMemory.buffer;return null}catch(e){return null}};Module.reallocBuffer=function(e){return d(e)},Module.asm=function(e,t,r){if(e=u(e),!(t=u(t)).table){var n,o=Module.wasmTableSize;void 0===o&&(o=1024);var i=Module.wasmMaxTableSize;"object"==typeof WebAssembly&&"function"==typeof WebAssembly.Table?void 0!==i?t.table=new WebAssembly.Table({initial:o,maximum:i,element:"anyfunc"}):t.table=new WebAssembly.Table({initial:o,element:"anyfunc"}):t.table=Array(o),Module.wasmTable=t.table}return t.memoryBase||(t.memoryBase=Module.STATIC_BASE),t.tableBase||(t.tableBase=0),(n=f(e,t,r))||abort("no binaryen method succeeded. consider enabling more options, like interpreting, if you want that: https://github.com/kripken/emscripten/wiki/WebAssembly#binaryen-methods"),n},Module.asm}integrateWasmJS();var ASM_CONSTS=[];STATIC_BASE=Runtime.GLOBAL_BASE,STATICTOP=STATIC_BASE+21776,__ATINIT__.push(),memoryInitializer=Module.wasmJSMethod.indexOf("asmjs")>=0||Module.wasmJSMethod.indexOf("interpret-asm2wasm")>=0?"image_compressor.js.mem":null;var STATIC_BUMP=21776;Module.STATIC_BASE=STATIC_BASE,Module.STATIC_BUMP=STATIC_BUMP;var tempDoublePtr=STATICTOP;function _longjmp(e,t){throw Module.setThrew(e,t||1),"longjmp"}function _abort(){Module.abort()}function _emscripten_longjmp(e,t){_longjmp(e,t)}function ___lock(){}function ___unlock(){}STATICTOP+=16;var SYSCALLS={varargs:0,get:function(e){return SYSCALLS.varargs+=4,HEAP32[SYSCALLS.varargs-4>>2]},getStr:function(){return Pointer_stringify(SYSCALLS.get())},get64:function(){var e=SYSCALLS.get(),t=SYSCALLS.get();return e>=0?assert(0===t):assert(-1===t),e},getZero:function(){assert(0===SYSCALLS.get())}};function ___syscall6(e,t){SYSCALLS.varargs=t;try{var r=SYSCALLS.getStreamFromFD();return FS.close(r),0}catch(e){return"undefined"!=typeof FS&&e instanceof FS.ErrnoError||abort(e),-e.errno}}function _llvm_stackrestore(e){var t=_llvm_stacksave,r=t.LLVM_SAVEDSTACKS[e];t.LLVM_SAVEDSTACKS.splice(e,1),Runtime.stackRestore(r)}function ___setErrNo(e){return Module.___errno_location&&(HEAP32[Module.___errno_location()>>2]=e),e}function _emscripten_memcpy_big(e,t,r){return HEAPU8.set(HEAPU8.subarray(t,t+r),e),e}var _llvm_pow_f32=Math_pow;function _llvm_stacksave(){var e=_llvm_stacksave;return e.LLVM_SAVEDSTACKS||(e.LLVM_SAVEDSTACKS=[]),e.LLVM_SAVEDSTACKS.push(Runtime.stackSave()),e.LLVM_SAVEDSTACKS.length-1}var _llvm_pow_f64=Math_pow;function ___syscall140(e,t){SYSCALLS.varargs=t;try{var r=SYSCALLS.getStreamFromFD(),n=(SYSCALLS.get(),SYSCALLS.get()),o=SYSCALLS.get(),i=SYSCALLS.get(),a=n;return FS.llseek(r,a,i),HEAP32[o>>2]=r.position,r.getdents&&0===a&&0===i&&(r.getdents=null),0}catch(e){return"undefined"!=typeof FS&&e instanceof FS.ErrnoError||abort(e),-e.errno}}function ___syscall146(e,t){SYSCALLS.varargs=t;try{var r=SYSCALLS.get(),n=SYSCALLS.get(),o=SYSCALLS.get(),i=0;___syscall146.buffer||(___syscall146.buffers=[null,[],[]],___syscall146.printChar=function(e,t){var r=___syscall146.buffers[e];assert(r),0===t||10===t?((1===e?Module.print:Module.printErr)(UTF8ArrayToString(r,0)),r.length=0):r.push(t)});for(var a=0;a<o;a++){for(var s=HEAP32[n+8*a>>2],u=HEAP32[n+(8*a+4)>>2],c=0;c<u;c++)___syscall146.printChar(r,HEAPU8[s+c]);i+=u}return i}catch(e){return"undefined"!=typeof FS&&e instanceof FS.ErrnoError||abort(e),-e.errno}}function ___syscall54(e,t){SYSCALLS.varargs=t;try{return 0}catch(e){return"undefined"!=typeof FS&&e instanceof FS.ErrnoError||abort(e),-e.errno}}function invoke_iiii(e,t,r,n){try{return Module.dynCall_iiii(e,t,r,n)}catch(e){if("number"!=typeof e&&"longjmp"!==e)throw e;Module.setThrew(1,0)}}function invoke_vif(e,t,r){try{Module.dynCall_vif(e,t,r)}catch(e){if("number"!=typeof e&&"longjmp"!==e)throw e;Module.setThrew(1,0)}}function invoke_viiiii(e,t,r,n,o,i){try{Module.dynCall_viiiii(e,t,r,n,o,i)}catch(e){if("number"!=typeof e&&"longjmp"!==e)throw e;Module.setThrew(1,0)}}function invoke_i(e){try{return Module.dynCall_i(e)}catch(e){if("number"!=typeof e&&"longjmp"!==e)throw e;Module.setThrew(1,0)}}function invoke_vi(e,t){try{Module.dynCall_vi(e,t)}catch(e){if("number"!=typeof e&&"longjmp"!==e)throw e;Module.setThrew(1,0)}}function invoke_vii(e,t,r){try{Module.dynCall_vii(e,t,r)}catch(e){if("number"!=typeof e&&"longjmp"!==e)throw e;Module.setThrew(1,0)}}function invoke_viiiiiiiii(e,t,r,n,o,i,a,s,u,c){try{Module.dynCall_viiiiiiiii(e,t,r,n,o,i,a,s,u,c)}catch(e){if("number"!=typeof e&&"longjmp"!==e)throw e;Module.setThrew(1,0)}}function invoke_iiiiid(e,t,r,n,o,i){try{return Module.dynCall_iiiiid(e,t,r,n,o,i)}catch(e){if("number"!=typeof e&&"longjmp"!==e)throw e;Module.setThrew(1,0)}}function invoke_ii(e,t){try{return Module.dynCall_ii(e,t)}catch(e){if("number"!=typeof e&&"longjmp"!==e)throw e;Module.setThrew(1,0)}}function invoke_iif(e,t,r){try{return Module.dynCall_iif(e,t,r)}catch(e){if("number"!=typeof e&&"longjmp"!==e)throw e;Module.setThrew(1,0)}}function invoke_viii(e,t,r,n){try{Module.dynCall_viii(e,t,r,n)}catch(e){if("number"!=typeof e&&"longjmp"!==e)throw e;Module.setThrew(1,0)}}function invoke_v(e){try{Module.dynCall_v(e)}catch(e){if("number"!=typeof e&&"longjmp"!==e)throw e;Module.setThrew(1,0)}}function invoke_iiiii(e,t,r,n,o){try{return Module.dynCall_iiiii(e,t,r,n,o)}catch(e){if("number"!=typeof e&&"longjmp"!==e)throw e;Module.setThrew(1,0)}}function invoke_iii(e,t,r){try{return Module.dynCall_iii(e,t,r)}catch(e){if("number"!=typeof e&&"longjmp"!==e)throw e;Module.setThrew(1,0)}}function invoke_ifi(e,t,r){try{return Module.dynCall_ifi(e,t,r)}catch(e){if("number"!=typeof e&&"longjmp"!==e)throw e;Module.setThrew(1,0)}}function invoke_viiii(e,t,r,n,o){try{Module.dynCall_viiii(e,t,r,n,o)}catch(e){if("number"!=typeof e&&"longjmp"!==e)throw e;Module.setThrew(1,0)}}__ATEXIT__.push(function(){var e=Module._fflush;e&&e(0);var t=___syscall146.printChar;if(t){var r=___syscall146.buffers;r[1].length&&t(1,10),r[2].length&&t(2,10)}}),DYNAMICTOP_PTR=allocate(1,"i32",ALLOC_STATIC),STACK_BASE=STACKTOP=Runtime.alignMemory(STATICTOP),STACK_MAX=STACK_BASE+TOTAL_STACK,DYNAMIC_BASE=Runtime.alignMemory(STACK_MAX),HEAP32[DYNAMICTOP_PTR>>2]=DYNAMIC_BASE,staticSealed=!0,Module.wasmTableSize=94,Module.wasmMaxTableSize=94,Module.asmGlobalArg={Math:Math,Int8Array:Int8Array,Int16Array:Int16Array,Int32Array:Int32Array,Uint8Array:Uint8Array,Uint16Array:Uint16Array,Uint32Array:Uint32Array,Float32Array:Float32Array,Float64Array:Float64Array,NaN:NaN,Infinity:1/0,byteLength:byteLength},Module.asmLibraryArg={abort:abort,assert:assert,enlargeMemory:enlargeMemory,getTotalMemory:getTotalMemory,abortOnCannotGrowMemory:abortOnCannotGrowMemory,invoke_iiii:invoke_iiii,invoke_vif:invoke_vif,invoke_viiiii:invoke_viiiii,invoke_i:invoke_i,invoke_vi:invoke_vi,invoke_vii:invoke_vii,invoke_viiiiiiiii:invoke_viiiiiiiii,invoke_iiiiid:invoke_iiiiid,invoke_ii:invoke_ii,invoke_iif:invoke_iif,invoke_viii:invoke_viii,invoke_v:invoke_v,invoke_iiiii:invoke_iiiii,invoke_iii:invoke_iii,invoke_ifi:invoke_ifi,invoke_viiii:invoke_viiii,_longjmp:_longjmp,_llvm_pow_f64:_llvm_pow_f64,___lock:___lock,___syscall6:___syscall6,___setErrNo:___setErrNo,_abort:_abort,___syscall140:___syscall140,_llvm_pow_f32:_llvm_pow_f32,_emscripten_longjmp:_emscripten_longjmp,_emscripten_memcpy_big:_emscripten_memcpy_big,___syscall54:___syscall54,___unlock:___unlock,_llvm_stackrestore:_llvm_stackrestore,_llvm_stacksave:_llvm_stacksave,___syscall146:___syscall146,DYNAMICTOP_PTR:DYNAMICTOP_PTR,tempDoublePtr:tempDoublePtr,ABORT:ABORT,STACKTOP:STACKTOP,STACK_MAX:STACK_MAX};var asm=Module.asm(Module.asmGlobalArg,Module.asmLibraryArg,buffer);Module.asm=asm;var _testSetjmp=Module._testSetjmp=function(){return Module.asm._testSetjmp.apply(null,arguments)},_saveSetjmp=Module._saveSetjmp=function(){return Module.asm._saveSetjmp.apply(null,arguments)},getTempRet0=Module.getTempRet0=function(){return Module.asm.getTempRet0.apply(null,arguments)},_free=Module._free=function(){return Module.asm._free.apply(null,arguments)},runPostSets=Module.runPostSets=function(){return Module.asm.runPostSets.apply(null,arguments)},setTempRet0=Module.setTempRet0=function(){return Module.asm.setTempRet0.apply(null,arguments)},_realloc=Module._realloc=function(){return Module.asm._realloc.apply(null,arguments)},establishStackSpace=Module.establishStackSpace=function(){return Module.asm.establishStackSpace.apply(null,arguments)},_memmove=Module._memmove=function(){return Module.asm._memmove.apply(null,arguments)},stackSave=Module.stackSave=function(){return Module.asm.stackSave.apply(null,arguments)},_memset=Module._memset=function(){return Module.asm._memset.apply(null,arguments)},_compress=Module._compress=function(){return Module.asm._compress.apply(null,arguments)},_malloc=Module._malloc=function(){return Module.asm._malloc.apply(null,arguments)},_emscripten_get_global_libc=Module._emscripten_get_global_libc=function(){return Module.asm._emscripten_get_global_libc.apply(null,arguments)},_memcpy=Module._memcpy=function(){return Module.asm._memcpy.apply(null,arguments)},_emscripten_replace_memory=Module._emscripten_replace_memory=function(){return Module.asm._emscripten_replace_memory.apply(null,arguments)},stackAlloc=Module.stackAlloc=function(){return Module.asm.stackAlloc.apply(null,arguments)},setThrew=Module.setThrew=function(){return Module.asm.setThrew.apply(null,arguments)},_sbrk=Module._sbrk=function(){return Module.asm._sbrk.apply(null,arguments)},stackRestore=Module.stackRestore=function(){return Module.asm.stackRestore.apply(null,arguments)},_llvm_bswap_i32=Module._llvm_bswap_i32=function(){return Module.asm._llvm_bswap_i32.apply(null,arguments)},dynCall_iiii=Module.dynCall_iiii=function(){return Module.asm.dynCall_iiii.apply(null,arguments)},dynCall_vif=Module.dynCall_vif=function(){return Module.asm.dynCall_vif.apply(null,arguments)},dynCall_viiiii=Module.dynCall_viiiii=function(){return Module.asm.dynCall_viiiii.apply(null,arguments)},dynCall_i=Module.dynCall_i=function(){return Module.asm.dynCall_i.apply(null,arguments)},dynCall_vi=Module.dynCall_vi=function(){return Module.asm.dynCall_vi.apply(null,arguments)},dynCall_vii=Module.dynCall_vii=function(){return Module.asm.dynCall_vii.apply(null,arguments)},dynCall_viiiiiiiii=Module.dynCall_viiiiiiiii=function(){return Module.asm.dynCall_viiiiiiiii.apply(null,arguments)},dynCall_iiiiid=Module.dynCall_iiiiid=function(){return Module.asm.dynCall_iiiiid.apply(null,arguments)},dynCall_ii=Module.dynCall_ii=function(){return Module.asm.dynCall_ii.apply(null,arguments)},dynCall_iif=Module.dynCall_iif=function(){return Module.asm.dynCall_iif.apply(null,arguments)},dynCall_viii=Module.dynCall_viii=function(){return Module.asm.dynCall_viii.apply(null,arguments)},dynCall_v=Module.dynCall_v=function(){return Module.asm.dynCall_v.apply(null,arguments)},dynCall_iiiii=Module.dynCall_iiiii=function(){return Module.asm.dynCall_iiiii.apply(null,arguments)},dynCall_iii=Module.dynCall_iii=function(){return Module.asm.dynCall_iii.apply(null,arguments)},dynCall_ifi=Module.dynCall_ifi=function(){return Module.asm.dynCall_ifi.apply(null,arguments)},dynCall_viiii=Module.dynCall_viiii=function(){return Module.asm.dynCall_viiii.apply(null,arguments)};if(Runtime.stackAlloc=Module.stackAlloc,Runtime.stackSave=Module.stackSave,Runtime.stackRestore=Module.stackRestore,Runtime.establishStackSpace=Module.establishStackSpace,Runtime.setTempRet0=Module.setTempRet0,Runtime.getTempRet0=Module.getTempRet0,Module.asm=asm,memoryInitializer)if("function"==typeof Module.locateFile?memoryInitializer=Module.locateFile(memoryInitializer):Module.memoryInitializerPrefixURL&&(memoryInitializer=Module.memoryInitializerPrefixURL+memoryInitializer),ENVIRONMENT_IS_NODE||ENVIRONMENT_IS_SHELL){var data=Module.readBinary(memoryInitializer);HEAPU8.set(data,Runtime.GLOBAL_BASE)}else{addRunDependency("memory initializer");var applyMemoryInitializer=function(e){e.byteLength&&(e=new Uint8Array(e)),HEAPU8.set(e,Runtime.GLOBAL_BASE),Module.memoryInitializerRequest&&delete Module.memoryInitializerRequest.response,removeRunDependency("memory initializer")};function doBrowserLoad(){Module.readAsync(memoryInitializer,applyMemoryInitializer,function(){throw"could not load memory initializer "+memoryInitializer})}if(Module.memoryInitializerRequest){function useRequest(){var e=Module.memoryInitializerRequest;if(200!==e.status&&0!==e.status){console.warn("a problem seems to have happened with Module.memoryInitializerRequest, status: "+e.status+", retrying "+memoryInitializer),doBrowserLoad();return}applyMemoryInitializer(e.response)}Module.memoryInitializerRequest.response?setTimeout(useRequest,0):Module.memoryInitializerRequest.addEventListener("load",useRequest)}else doBrowserLoad()}function ExitStatus(e){this.name="ExitStatus",this.message="Program terminated with exit("+e+")",this.status=e}ExitStatus.prototype=Error(),ExitStatus.prototype.constructor=ExitStatus;var preloadStartTime=null,calledMain=!1;function run(e){if(e=e||Module.arguments,null===preloadStartTime&&(preloadStartTime=Date.now()),!(runDependencies>0))preRun(),!(runDependencies>0)&&(Module.calledRun||(Module.setStatus?(Module.setStatus("Running..."),setTimeout(function(){setTimeout(function(){Module.setStatus("")},1),t()},1)):t()));function t(){Module.calledRun||(Module.calledRun=!0,ABORT||(ensureInitRuntime(),preMain(),Module.onRuntimeInitialized&&Module.onRuntimeInitialized(),Module._main&&shouldRunNow&&Module.callMain(e),postRun()))}}function exit(e,t){t&&Module.noExitRuntime||(Module.noExitRuntime||(ABORT=!0,EXITSTATUS=e,STACKTOP=initialStackTop,exitRuntime(),Module.onExit&&Module.onExit(e)),ENVIRONMENT_IS_NODE&&__TURBOPACK__imported__module__247167__.default.exit(e),Module.quit(e,new ExitStatus(e)))}dependenciesFulfilled=function e(){Module.calledRun||run(),Module.calledRun||(dependenciesFulfilled=e)},Module.callMain=Module.callMain=function(e){e=e||[],ensureInitRuntime();var t=e.length+1;function r(){for(var e=0;e<3;e++)n.push(0)}var n=[allocate(intArrayFromString(Module.thisProgram),"i8",ALLOC_NORMAL)];r();for(var o=0;o<t-1;o+=1)n.push(allocate(intArrayFromString(e[o]),"i8",ALLOC_NORMAL)),r();n.push(0),n=allocate(n,"i32",ALLOC_NORMAL);try{var i=Module._main(t,n,0);exit(i,!0)}catch(e){if(e instanceof ExitStatus)return;if("SimulateInfiniteLoop"==e){Module.noExitRuntime=!0;return}var a=e;e&&"object"==typeof e&&e.stack&&(a=[e,e.stack]),Module.printErr("exception thrown: "+a),Module.quit(1,e)}finally{calledMain=!0}},Module.run=Module.run=run,Module.exit=Module.exit=exit;var abortDecorators=[];function abort(e){Module.onAbort&&Module.onAbort(e),void 0!==e?(Module.print(e),Module.printErr(e),e=JSON.stringify(e)):e="",ABORT=!0,EXITSTATUS=1;var t="\nIf this abort() is unexpected, build with -s ASSERTIONS=1 which can give more information.",r="abort("+e+") at "+stackTrace()+t;throw abortDecorators.forEach(function(t){r=t(r,e)}),r}if(Module.abort=Module.abort=abort,Module.preInit)for("function"==typeof Module.preInit&&(Module.preInit=[Module.preInit]);Module.preInit.length>0;)Module.preInit.pop()();var shouldRunNow=!0;Module.noInitialRun&&(shouldRunNow=!1),Module.noExitRuntime=!0,run();class PngImage extends __TURBOPACK__imported__module__549186__1.ImageBase{async compress(){let{width:e,height:t,x:r,y:n}=this.getOutputDimension(),{context:o}=await this.createCanvas(e,t,r,n),i=o.getImageData(0,0,e,t).data;try{let r=Module._malloc(i.byteLength);Module.HEAPU8.set(i,r);let n=e*t*4;if(i.byteLength!==n)return this.failResult();let o=Module._malloc(4);if(Module._compress(e,t,this.option.png.colors,this.option.png.dithering,r,o))return this.failResult();let a=Module.getValue(o,"i32",!1),s=new Uint8Array(a);s.set(Module.HEAPU8.subarray(r,r+a)),Module._free(r),Module._free(o);let u=new Blob([s],{type:this.info.blob.type});return{width:e,height:t,blob:u,src:URL.createObjectURL(u)}}catch(e){return this.failResult()}}}var __TURBOPACK__imported__module__538149__=__turbopack_context__.i(538149),__TURBOPACK__imported__module__549186__2=__TURBOPACK__imported__module__549186__,__TURBOPACK__imported__module__175604__=__turbopack_context__.i(175604);class MozJPEGImage extends __TURBOPACK__imported__module__549186__2.ImageBase{static async encode(e,t,r,n={}){let o=e.getImageData(0,0,t,r);return new Blob([await (0,__TURBOPACK__imported__module__175604__.default)(o,n)],{type:__TURBOPACK__imported__module__538149__.Mimes.jpeg})}async compress(){let{width:e,height:t,x:r,y:n}=this.getOutputDimension();try{let{context:o}=await this.createCanvas(e,t,r,n),i=await MozJPEGImage.encode(o,e,t,this.option.jpeg);return{width:e,height:t,blob:i,src:URL.createObjectURL(i)}}catch(e){return this.failResult()}}}var __TURBOPACK__imported__module__501764__=__turbopack_context__.i(501764),__TURBOPACK__imported__module__538149__1=__TURBOPACK__imported__module__538149__,__TURBOPACK__imported__module__549186__3=__TURBOPACK__imported__module__549186__,__TURBOPACK__imported__module__126479__=__turbopack_context__.i(126479);class WebPImage extends __TURBOPACK__imported__module__549186__3.ImageBase{static async encode(e,t,r,n={}){let o=e.getImageData(0,0,t,r);return new Blob([await (0,__TURBOPACK__imported__module__126479__.default)(o,n)],{type:__TURBOPACK__imported__module__538149__1.Mimes.jpeg})}async compress(){let{width:e,height:t,x:r,y:n}=this.getOutputDimension();try{let{context:o}=await this.createCanvas(e,t,r,n),i=await WebPImage.encode(o,e,t,this.option.webp);return{width:e,height:t,blob:i,src:URL.createObjectURL(i)}}catch(e){return this.failResult()}}}var __TURBOPACK__imported__module__538149__2=__TURBOPACK__imported__module__538149__,__TURBOPACK__imported__module__549186__4=__TURBOPACK__imported__module__549186__,__TURBOPACK__imported__module__4436__=__turbopack_context__.i(4436),__TURBOPACK__imported__module__930733__=__turbopack_context__.i(930733);class JXLImage extends __TURBOPACK__imported__module__549186__4.ImageBase{decodedImageData=null;constructor(e,t,r){super(e,t),r?(this.decodedImageData=r,this.info.width=r.width,this.info.height=r.height):this.initialize()}async initialize(){if(!this.decodedImageData&&"image/jxl"===this.info.blob.type)try{this.decodedImageData=await (0,__TURBOPACK__imported__module__930733__.default)(this.info.blob),this.info.width=this.decodedImageData.width,this.info.height=this.decodedImageData.height}catch(e){this.decodedImageData=null}}static async encode(e,t,r,n={}){let o=e.getImageData(0,0,t,r);return new Blob([await (0,__TURBOPACK__imported__module__4436__.default)(o,n)],{type:__TURBOPACK__imported__module__538149__2.Mimes.jxl})}async compress(){let{width:e,height:t,x:r,y:n}=this.getOutputDimension();try{let{context:o}=await this.createCanvas(e,t,r,n),i=await JXLImage.encode(o,e,t,this.option.jxl);return{width:e,height:t,blob:i,src:URL.createObjectURL(i)}}catch(e){return this.failResult()}}async preview(){let e=400;if(this.decodedImageData||await this.initialize(),!this.decodedImageData)return this.failResult();let t=this.decodedImageData.width,r=this.decodedImageData.height,n=t,o=r;t>r?t>e&&(n=e,o=Math.round(r/t*e)):r>e&&(o=e,n=Math.round(t/r*e));try{let e=new OffscreenCanvas(n,o),t=e.getContext("2d");if(!t)throw Error("Failed to get 2D context");t.imageSmoothingEnabled=!0,t.imageSmoothingQuality="high";let r=await createImageBitmap(this.decodedImageData,{resizeWidth:n,resizeHeight:o,resizeQuality:"high"});t.drawImage(r,0,0),r.close();let i=await e.convertToBlob({type:"image/jpeg",quality:.85});return{width:n,height:o,blob:i,src:URL.createObjectURL(i)}}catch(e){return console.error("JXL preview failed:",e),this.failResult()}}}var __TURBOPACK__imported__module__538149__3=__TURBOPACK__imported__module__538149__,__TURBOPACK__imported__module__538149__4=__TURBOPACK__imported__module__538149__,__TURBOPACK__imported__module__549186__5=__TURBOPACK__imported__module__549186__;function minifySvg(e){return e.replace(/<!--[\s\S]*?-->/g,"").replace(/>\s+</g,"><").replace(/\s+/g," ").trim()}class SvgImage extends __TURBOPACK__imported__module__549186__5.ImageBase{async compress(){if(0===this.info.width||0===this.info.height)return this.failResult();let e=new Blob([minifySvg(await this.info.blob.text())],{type:__TURBOPACK__imported__module__538149__4.Mimes.svg});return{width:this.info.width,height:this.info.height,blob:e,src:URL.createObjectURL(e)}}async preview(){return this.failResult()}}let svgReg=/<svg\s([^>"']|"[^"]*"|'[^']*')*>/,extractorRegExps={height:/\sheight=(['"])([^%]+?)\1/,root:svgReg,viewbox:/\sviewBox=(['"])(.+?)\1/i,width:/\swidth=(['"])([^%]+?)\1/},INCH_CM=2.54,units={in:96,cm:96/INCH_CM,em:16,ex:8,m:96/INCH_CM*100,mm:96/INCH_CM/10,pc:96/72/12,pt:96/72,px:1},unitsReg=RegExp(`^([0-9.]+(?:e\\d+)?)(${Object.keys(units).join("|")})?$`);function parseLength(e){let t=unitsReg.exec(e);if(t)return Math.round(Number(t[1])*(units[t[2]]||1))}function parseViewbox(e){let t=e.split(" ");return{height:parseLength(t[3]),width:parseLength(t[2])}}function parseAttributes(e){let t=e.match(extractorRegExps.width),r=e.match(extractorRegExps.height),n=e.match(extractorRegExps.viewbox);return{height:r&&parseLength(r[2]),viewbox:n&&parseViewbox(n[2]),width:t&&parseLength(t[2])}}function calculateByDimensions(e){return{x:0,y:0,height:e.height,width:e.width}}function calculateByViewbox(e,t){let r=t.width/t.height;return e.width?{x:0,y:0,height:Math.floor(e.width/r),width:e.width}:e.height?{x:0,y:0,height:e.height,width:Math.floor(e.height*r)}:{x:0,y:0,height:t.height,width:t.width}}function getSvgDimension(e){let t=e.match(extractorRegExps.root);if(t){let e=parseAttributes(t[0]);if(e.width&&e.height)return calculateByDimensions(e);if(e.viewbox)return calculateByViewbox(e,e.viewbox)}throw TypeError("Invalid SVG")}var __TURBOPACK__imported__module__930733__1=__TURBOPACK__imported__module__930733__;async function createImageBitmapFromJXL(e,t){let r=new OffscreenCanvas(e.width,e.height),n=r.getContext("2d");if(!n)throw Error("Failed to get 2D context");return n.putImageData(e,0,0),await createImageBitmap(r,t??{})}async function convert(e,t="compress"){let r=e.info.blob.type.toLowerCase();if(__TURBOPACK__imported__module__538149__3.Mimes.svg===r){if(e.info.width>0&&e.info.height>0)return createHandler(e,t);let r=await e.info.blob.text(),n={width:0,height:0};try{n=getSvgDimension(r)}catch(e){}return e.info.width=n.width,e.info.height=n.height,createHandler(e,t)}let n=null,o=null;if(e.info.blob.type===__TURBOPACK__imported__module__538149__3.Mimes.jxl?(o=await (0,__TURBOPACK__imported__module__930733__1.default)(e.info.blob),e.info.width=o.width,e.info.height=o.height):(n=await createImageBitmap(e.info.blob),e.info.width=n.width,e.info.height=n.height),"compress"===t&&e.option.format.target&&e.option.format.target!==e.info.blob.type){let r=e.option.format.target.toLowerCase();if("avif"===r)return createHandler(e,t,__TURBOPACK__imported__module__538149__3.Mimes.avif);if(["jpg","jpeg"].includes(r))return createHandler(e,t,__TURBOPACK__imported__module__538149__3.Mimes.jpeg);if("webp"===r)return createHandler(e,t,__TURBOPACK__imported__module__538149__3.Mimes.webp);if("jxl"===r)return createHandler(e,t,__TURBOPACK__imported__module__538149__3.Mimes.jxl,o);let i=new OffscreenCanvas(n.width,n.height),a=i.getContext("2d");["jpg","jpeg"].includes(r)&&(a.fillStyle=e.option.format.transparentFill,a.fillRect(0,0,n.width,n.height)),a.drawImage(n,0,0,n.width,n.height,0,0,n.width,n.height),e.info.blob=await i.convertToBlob({type:__TURBOPACK__imported__module__538149__3.Mimes[r],quality:1})}return n&&n.close(),createHandler(e,t,void 0,o)}async function createHandler(e,t,r,n){let o=e.info.blob.type.toLowerCase();r&&(o=r);let i=null;if([__TURBOPACK__imported__module__538149__3.Mimes.webp].includes(o)?i=new WebPImage(e.info,e.option):o===__TURBOPACK__imported__module__538149__3.Mimes.avif?i=new __TURBOPACK__imported__module__501764__.AvifImage(e.info,e.option):o===__TURBOPACK__imported__module__538149__3.Mimes.jpeg||o===__TURBOPACK__imported__module__538149__3.Mimes.jpg?i=new MozJPEGImage(e.info,e.option):o===__TURBOPACK__imported__module__538149__3.Mimes.jxl?i=new JXLImage(e.info,e.option,n):o===__TURBOPACK__imported__module__538149__3.Mimes.png?i=new PngImage(e.info,e.option):o===__TURBOPACK__imported__module__538149__3.Mimes.gif?i=new GifImage(e.info,e.option):o===__TURBOPACK__imported__module__538149__3.Mimes.svg&&(i=new SvgImage(e.info,e.option)),!i)return null;let a={key:i.info.key,width:i.info.width,height:i.info.height};return i&&"preview"===t?(a.preview=await i.preview(),a):i&&"compress"===t?(a.compress=await i.compress(),a):null}__turbopack_context__.s(["convert",()=>convert],362197);var __TURBOPACK__imported__module__538149__5=__TURBOPACK__imported__module__538149__;let MimeAvif="image/avif";async function isAvifSupport(){let e=new OffscreenCanvas(1,1);e.getContext("2d");try{return await e.convertToBlob({type:MimeAvif}),!0}catch(e){return!1}}async function avifCheck(){await isAvifSupport()&&(__TURBOPACK__imported__module__538149__5.Mimes.avif=MimeAvif)}__turbopack_context__.s(["avifCheck",()=>avifCheck],673468)}]);